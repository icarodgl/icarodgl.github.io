(this["webpackJsonpadotei-web"]=this["webpackJsonpadotei-web"]||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},59:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),n=a.n(s),i=a(29),r=a.n(i),o=(a(39),a(9)),l=a(3),j=a(2),d=(a(40),a(30)),u=a.n(d),b=function(){var e=u.a.create({baseURL:"https://adotei-back.herokuapp.com/"});return e.interceptors.request.use((function(e){var t=localStorage.getItem("adotei@token");if(t){var a=JSON.parse(t).token;e.headers={auth:a}}return e}),(function(e){Promise.reject(e)})),e}(),O=a.p+"static/media/logodotei.f176e598.png";a(59);function h(){var e=n.a.useState(""),t=Object(j.a)(e,2),a=t[0],i=t[1],r=n.a.useState(1),d=Object(j.a)(r,2),u=(d[0],d[1]),b=n.a.useState(window.innerWidth),h=Object(j.a)(b,2),m=h[0],f=h[1],x=Object(l.f)();Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("adotei@token"));null===e?i(""):(i(e.user.name),u(e.role));var t=function(){f(window.innerWidth)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[x,m]);return m>=999?Object(c.jsx)("nav",{children:Object(c.jsx)("div",{className:"nav-wrapper",children:Object(c.jsxs)("div",{id:"logomenu",children:[Object(c.jsx)("img",{id:"logo",alt:"logo",src:O}),Object(c.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:""!==a?Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{children:Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsxs)(o.b,{id:"menuitem",to:"/admin",children:["Admin ",a]})})})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{id:"menuitem",to:"/login",onClick:function(){return localStorage.clear(),void x.push("/login")},children:"sair"})})]}):Object(c.jsx)("div",{children:Object(c.jsx)("li",{children:Object(c.jsx)(o.b,{id:"menuitem",to:"/login",children:"Longin"})})})})]})})}):Object(c.jsx)("div",{})}function m(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],i=Object(s.useState)(""),r=Object(j.a)(i,2),o=r[0],l=r[1];return Object(s.useEffect)((function(){l(!0),b.get("pet").then((function(e){n(e.data),l(!1)})).catch((function(e){console.log(e),l(!1)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)(h,{}),o?Object(c.jsx)("div",{className:"progress",children:Object(c.jsx)("div",{className:"indeterminate"})}):Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col s12 m8 offset-m2 l6 offset-l3 home-container",children:a.map((function(e){return Object(c.jsxs)("div",{className:"card z-depth-3",children:[Object(c.jsx)("div",{className:"card-image waves-effect waves-block waves-light",children:Object(c.jsx)("img",{className:"activator fotos",src:e.foto,alt:e.name})}),Object(c.jsx)("div",{className:"card-content",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("p",{className:"col s11 card-title activator orange-text text-darken-2",children:e.name}),Object(c.jsx)("button",{className:"col btn-floating btn-large waves-effect waves-light red",children:Object(c.jsx)("i",{className:"carinho material-icons",children:"favorite"})})]})}),Object(c.jsxs)("div",{className:"card-reveal",children:[Object(c.jsxs)("span",{className:"card-title orange-text text-darken-2",children:[e.name,Object(c.jsx)("i",{className:"material-icons right",children:"close"})]}),Object(c.jsx)("p",{children:e.sobre})]})]},e._id)}))})})]})}var f=a(11),x=a.n(f),p=a(13),v=(a(69),a(33));function g(){var e=Object(l.f)(),t=Object(s.useState)(""),a=Object(j.a)(t,2),n=a[0],i=a[1],r=Object(s.useState)(""),d=Object(j.a)(r,2),u=d[0],O=d[1],h=Object(s.useState)(!1),m=Object(j.a)(h,2),f=m[0],g=m[1],N=Object(s.useState)(!1),w=Object(j.a)(N,2),S=w[0],k=w[1],C=Object(s.useState)(!1),y=Object(j.a)(C,2),E=y[0],I=y[1];function _(){return(_=Object(p.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),I(!1),k(!1),""!==n||""!==u?(g(!0),b.post("/auth/login",{username:n,password:u}).then((function(t){localStorage.clear(),localStorage.setItem("adotei@token",JSON.stringify(t.data)),localStorage.setItem("adotei@perfil",JSON.stringify(t.data.user)),e.push("/"),g(!1)})).catch((function(e){g(!1),console.log(e),I(!0)}))):k(!0);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){null!==JSON.parse(localStorage.getItem("adotei@token"))&&e.push("/adocao")}),[e]),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"login-container col s12 m8 offset-m2 l6 offset-l3 xl4 offset-xl4",children:Object(c.jsx)("section",{className:"form col s8 offset-s2",children:Object(c.jsxs)("form",{onSubmit:function(e){return _.apply(this,arguments)},children:[Object(c.jsx)("h1",{id:"adotei",children:"Adotei"}),Object(c.jsx)("h3",{id:"bemvindo",children:"Bem vindo!"}),Object(c.jsx)("h5",{id:"textologin",children:"fa\xe7a seu login:"}),E?Object(c.jsx)("span",{id:"erro",children:"Usu\xe1rio ou Senha incorreto"}):Object(c.jsx)("p",{}),Object(c.jsx)("input",{placeholder:"Login",value:n,onChange:function(e){return i(e.target.value)}}),S?Object(c.jsx)("span",{id:"erro",children:"campo obrigat\xf3rio"}):null,Object(c.jsx)("input",{placeholder:"Senha",type:"password",value:u,onChange:function(e){return O(e.target.value)}}),S?Object(c.jsx)("span",{id:"erro",children:"campo obrigat\xf3rio"}):null,f?Object(c.jsx)("div",{className:"progress",children:Object(c.jsx)("div",{className:"indeterminate"})}):Object(c.jsx)("button",{className:"button btn waves-effect waves-light",type:"submit",children:"Entrar"}),Object(c.jsx)(o.b,{className:"row",to:"/registro",children:Object(c.jsxs)("div",{className:"col s12",children:[Object(c.jsx)(v.a,{size:16,color:"#3b5998"}),Object(c.jsx)("span",{id:"cadastro",children:"Cadastrar"})]})})]})})})})}var N=a(18),w=(a(70),a(32)),S=a.n(w);function k(){var e=Object(l.f)(),t=Object(s.useState)(""),a=Object(j.a)(t,2),i=a[0],r=a[1],d=Object(s.useState)(""),u=Object(j.a)(d,2),O=u[0],h=u[1],m=Object(s.useState)(""),f=Object(j.a)(m,2),v=f[0],g=f[1],w=Object(s.useState)(""),k=Object(j.a)(w,2),C=k[0],y=k[1],E=Object(s.useState)(""),I=Object(j.a)(E,2),_=I[0],J=I[1],L=Object(s.useState)(""),z=Object(j.a)(L,2),A=z[0],U=z[1],R=Object(s.useState)(""),B=Object(j.a)(R,2),D=B[0],P=B[1],q=Object(s.useState)(!1),M=Object(j.a)(q,2),W=M[0],F=M[1],K=Object(s.useState)(!0),T=Object(j.a)(K,2),V=T[0],G=T[1],H=n.a.useState([]),Q=Object(j.a)(H,2),X=Q[0],Y=Q[1],Z=n.a.useState(!0),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),ce=Object(j.a)(ae,2),se=ce[0],ne=ce[1];function ie(){return(ie=Object(p.a)(x.a.mark((function t(){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:1,0,F(!0),a={username:A,password:D,role:1,user:{name:i,foto:O,email:v,telefone:_,sobre:C,credito:0}},G(!0),ne(!1),b.post("auth/new",a).then((function(t){console.log("Cadastro realizado com sucesso",t.status),e.push("/"),F(!1)})).catch((function(e){e.response.data.message&&"usu\xe1rio j\xe1 cadastrado"===e.response.data.message?ne(!0):G(!1),F(!1),console.log("Erro no cadastro tente novamente: ",e.response.data)}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"caixaRegistro col s12 m8 offset-m2 l6 offset-l3 xl4 offset-xl4",children:[Object(c.jsxs)("section",{className:"col s12 sectionbox",children:[Object(c.jsx)("div",{className:"col s2",children:Object(c.jsx)(o.b,{className:".back-link",to:"/login",children:Object(c.jsx)("button",{className:"waves-effect waves-light btn voltarbtn",children:"Voltar"})})}),Object(c.jsx)("div",{className:"col s12 m6 offset-m1",children:Object(c.jsx)("h5",{id:"adotei",children:"Fa\xe7a cadastro no Adotei e ajude os bichinhos"})})]}),Object(c.jsxs)("form",{className:"col s6 offset-s3",children:[Object(c.jsx)("input",{placeholder:"Nome completo",value:i,onChange:function(e){return r(e.target.value)}}),se?Object(c.jsx)("span",{id:"erro",children:"Usu\xe1rio j\xe1 existe"}):Object(c.jsx)("div",{}),Object(c.jsx)("input",{placeholder:"Nome de usu\xe1rio",value:A,onChange:function(e){return U(e.target.value)}}),Object(c.jsx)("input",{placeholder:"senha",type:"password",value:D,onChange:function(e){return P(e.target.value)}}),Object(c.jsxs)("div",{className:"App",children:[ee?Object(c.jsx)("span",{}):Object(c.jsx)("span",{id:"erro",children:"Imagem maior que 1MB"}),Object(c.jsx)(S.a,{multiple:!0,value:X,onChange:function(e,t){void 0!==e[0]&&(e[0].file.size/1024/1024<1?(te(!0),Y(e),h("".concat(e[0].data_url))):te(!1))},maxNumber:1,dataURLKey:"data_url",children:function(e){var t=e.imageList,a=e.onImageUpload,s=e.isDragging,n=e.dragProps;return Object(c.jsxs)("div",{className:"upload__image-wrapper",children:[Object(c.jsx)("a",Object(N.a)(Object(N.a)({className:"waves-effect waves-light btn",style:s?{color:"red"}:void 0,onClick:a},n),{},{children:"Adicione uma foto"})),"\xa0",t.map((function(e,t){return Object(c.jsxs)("div",{className:"image-item",children:[Object(c.jsx)("img",{src:e.data_url,alt:"",width:"100"}),Object(c.jsx)("div",{className:"image-item__btn-wrapper",children:Object(c.jsx)("button",{className:"waves-effect waves-light btn",onClick:function(){return Y([]),void h([])},children:"Remove"})})]},t)}))]})}})]}),Object(c.jsx)("input",{placeholder:"Email",type:"email",value:v,onChange:function(e){return g(e.target.value)}}),Object(c.jsx)("input",{placeholder:"Telefone",value:_,onChange:function(e){return J(e.target.value)}}),Object(c.jsx)("input",{placeholder:"Descri\xe7\xe3o",type:"text",value:C,onChange:function(e){return y(e.target.value)}}),V?Object(c.jsx)("div",{}):Object(c.jsx)("span",{id:"erro",children:"Preencha todos os campos"}),W?Object(c.jsx)("div",{className:"progress",children:Object(c.jsx)("div",{className:"indeterminate"})}):Object(c.jsx)("button",{onClick:function(){return function(){return ie.apply(this,arguments)}()},className:"button btn waves-effect waves-light",type:"submit",name:"action",children:"Cadastrar"})]})]})})}function C(){return Object(c.jsx)(o.a,{children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/",exact:!0,component:m}),Object(c.jsx)(l.a,{path:"/login",exact:!0,component:g}),Object(c.jsx)(l.a,{path:"/admin",exact:!0,component:m}),Object(c.jsx)(l.a,{path:"/registro",component:k})]})})}var y=function(){return Object(c.jsx)("div",{className:"row",children:Object(c.jsx)(C,{})})};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(y,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.d66166fa.chunk.js.map