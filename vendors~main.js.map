{"version":3,"sources":["webpack:///./node_modules/excalibur/dist/Algebra.js","webpack:///./node_modules/excalibur/dist/Util/Util.js","webpack:///./node_modules/excalibur/dist/Drawing/Color.js","webpack:///./node_modules/excalibur/dist/Collision/Side.js","webpack:///./node_modules/excalibur/dist/Util/DrawUtil.js","webpack:///./node_modules/excalibur/dist/Math/Random.js","webpack:///./node_modules/excalibur/dist/Promises.js","webpack:///./node_modules/excalibur/dist/Physics.js","webpack:///./node_modules/excalibur/dist/Events.js","webpack:///./node_modules/excalibur/dist/Util/Log.js","webpack:///./node_modules/excalibur/dist/EventDispatcher.js","webpack:///./node_modules/excalibur/dist/Class.js","webpack:///./node_modules/excalibur/dist/Collision/CollisionContact.js","webpack:///./node_modules/excalibur/dist/Collision/CollisionJumpTable.js","webpack:///./node_modules/excalibur/dist/Collision/CircleArea.js","webpack:///./node_modules/excalibur/dist/Collision/EdgeArea.js","webpack:///./node_modules/excalibur/dist/Collision/PolygonArea.js","webpack:///./node_modules/excalibur/dist/Collision/BoundingBox.js","webpack:///./node_modules/excalibur/dist/Resources/Resource.js","webpack:///./node_modules/excalibur/dist/Drawing/SpriteEffects.js","webpack:///./node_modules/excalibur/dist/Configurable.js","webpack:///./node_modules/excalibur/dist/Drawing/Sprite.js","webpack:///./node_modules/excalibur/dist/Actions/RotationType.js","webpack:///./node_modules/excalibur/dist/Resources/Texture.js","webpack:///./node_modules/excalibur/dist/Actions/Action.js","webpack:///./node_modules/excalibur/dist/Actor.js","webpack:///./node_modules/excalibur/dist/Util/EasingFunctions.js","webpack:///./node_modules/excalibur/dist/Actions/ActionContext.js","webpack:///./node_modules/excalibur/dist/Collision/Pair.js","webpack:///./node_modules/excalibur/dist/Collision/Body.js","webpack:///./node_modules/excalibur/dist/Traits/CapturePointer.js","webpack:///./node_modules/excalibur/dist/Traits/EulerMovement.js","webpack:///./node_modules/excalibur/dist/Util/CullingBox.js","webpack:///./node_modules/excalibur/dist/Traits/OffscreenCulling.js","webpack:///./node_modules/excalibur/dist/Traits/TileMapCollisionDetection.js","webpack:///./node_modules/excalibur/dist/UIActor.js","webpack:///./node_modules/excalibur/dist/Camera.js","webpack:///./node_modules/excalibur/dist/Timer.js","webpack:///./node_modules/excalibur/dist/TileMap.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/AudioContext.js","webpack:///./node_modules/excalibur/dist/Util/WebAudio.js","webpack:///./node_modules/excalibur/dist/Loader.js","webpack:///./node_modules/excalibur/dist/Util/Detector.js","webpack:///./node_modules/excalibur/dist/Collision/DynamicTree.js","webpack:///./node_modules/excalibur/dist/Collision/DynamicTreeCollisionBroadphase.js","webpack:///./node_modules/excalibur/dist/Util/SortedList.js","webpack:///./node_modules/excalibur/dist/Group.js","webpack:///./node_modules/excalibur/dist/Label.js","webpack:///./node_modules/excalibur/dist/Trigger.js","webpack:///./node_modules/excalibur/dist/Util/Actors.js","webpack:///./node_modules/excalibur/dist/Scene.js","webpack:///./node_modules/excalibur/dist/Input/Gamepad.js","webpack:///./node_modules/excalibur/dist/Debug.js","webpack:///./node_modules/excalibur/dist/Input/Pointer.js","webpack:///./node_modules/excalibur/dist/Input/Keyboard.js","webpack:///./node_modules/excalibur/dist/Engine.js","webpack:///./node_modules/excalibur/dist/Particles.js","webpack:///./node_modules/excalibur/dist/Events/MediaEvents.js","webpack:///./node_modules/excalibur/dist/Collision/NaiveCollisionBroadphase.js","webpack:///./node_modules/excalibur/dist/Drawing/Animation.js","webpack:///./node_modules/excalibur/dist/Drawing/Polygon.js","webpack:///./node_modules/excalibur/dist/Drawing/SpriteSheet.js","webpack:///./node_modules/excalibur/dist/Interfaces/IAudioImplementation.js","webpack:///./node_modules/excalibur/dist/Math/PerlinNoise.js","webpack:///./node_modules/excalibur/dist/PostProcessing/ColorBlindCorrector.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/AudioInstance.js","webpack:///./node_modules/excalibur/dist/Util/Sound.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/Sound.js","webpack:///./node_modules/excalibur/dist/Util/Decorators.js","webpack:///./node_modules/excalibur/dist/index.js","webpack:///./node_modules/excalibur/dist/Util/index.js"],"names":["Vector","x","y","this","fromAngle","angle","Math","cos","sin","isValid","vec","isNaN","Infinity","distance","vec1","vec2","sqrt","pow","prototype","setTo","equals","vector","tolerance","abs","v","Zero","magnitude","normalize","d","average","add","scale","size","sub","addEqual","subEqual","scaleEqual","dot","cross","perpendicular","normal","negate","toAngle","atan2","rotate","anchor","sinAngle","cosAngle","clone","toString","One","Half","Up","Down","Left","Right","Ray","pos","dir","intersect","line","numerator","begin","getSlope","divisor","t","u","getLength","getPoint","time","Line","end","Object","defineProperty","get","enumerable","configurable","slope","distanceToPoint","point","x0","y0","l","dy","dx","findPoint","m","b","intercept","Error","hasPoint","currPoint","threshold","arguments","dxc","dyc","dx1","dy1","Projection","min","max","overlaps","projection","getOverlap","GlobalCoordinates","worldPos","pagePos","screenPos","fromPagePosition","xOrPos","yOrEngine","engineOrUndefined","pageX","pageY","engine","length","screenX","_Util_Util__WEBPACK_IMPORTED_MODULE_0__","j","canvas","screenY","screenToWorldCoordinates","e","i","s","a","h","c","p","f","_","g","w","n","o","r","TwoPI","PI","extend","extended","deep","call","assignExists","assign","merge","obj","prop","hasOwnProperty","base64Encode","inputStr","b64","outputStr","enc3","enc4","byte1","charCodeAt","byte2","byte3","enc1","enc2","charAt","clamp","val","randomInRange","random","_Math_Random__WEBPACK_IMPORTED_MODULE_1__","floating","randomIntInRange","integer","round","canonicalizeAngle","tmpAngle","toDegrees","radians","toRadians","degrees","getPosition","el","oLeft","oTop","calcOffsetLeft","parent","offsetLeft","offsetParent","calcOffsetTop","offsetTop","_Algebra__WEBPACK_IMPORTED_MODULE_0__","addItemToArray","item","array","indexOf","push","removeItemFromArray","index","splice","contains","getOppositeSide","side","_Collision_Side__WEBPACK_IMPORTED_MODULE_2__","Top","Bottom","None","getSideFromVector","direction","directions","directionEnum","Number","MAX_VALUE","maxIndex","Collection","initialSize","DefaultSize","_internalArray","_endPointer","Array","_resize","newSize","newArray","count","element","pop","clear","internalSize","elementAt","insert","value","remove","removed","removeElement","toArray","slice","forEach","func","map","__webpack_require__","__webpack_exports__","Color","fromRGB","fromHex","hex","match","parseInt","fromHSL","HSLColor","toRGBA","lighten","factor","temp","fromRGBA","darken","saturate","desaturate","mulitiply","color","screen","color1","invert","color2","format","toHSLA","toHex","_componentToHex","result","String","toFixed","fillStyle","Black","White","Gray","LightGray","DarkGray","Yellow","Orange","Red","Vermillion","Rose","Magenta","Violet","Blue","Azure","Cyan","Viridian","Green","Chartreuse","Transparent","hue2rgb","q","Side","ctx","x1","y1","x2","y2","thickness","cap","_Drawing_Color__WEBPACK_IMPORTED_MODULE_0__","beginPath","lineWidth","lineCap","strokeStyle","moveTo","lineTo","closePath","stroke","arc","origin","roundRect","width","height","radius","fill","br","tl","tr","bl","defaultRadius","quadraticCurveTo","circle","Random","seed","_lowerMask","_upperMask","_w","_n","_m","_a","_u","_s","_b","_t","_c","_l","_f","_mt","Date","now","_index","_twist","mag01","nextInt","next","floor","bool","likelihood","pickOne","pickSet","numPicks","allowDuplicates","_pickSetWithDuplicates","_pickSetWithoutDuplicates","currentPick","tempArray","shuffle","swap","randomIndex","range","d4","d6","d8","d10","d12","d20","P","S","A","E","C","T","M","D","O","k","R","B","F","I","L","H","z","W","U","N","V","X","G","Y","K","Q","Z","dt","ft","gt","yt","vt","mt","bt","wt","Dt","Ot","kt","Rt","Bt","Ft","It","Lt","Ht","zt","Wt","jt","Ut","Nt","qt","Vt","Xt","$t","te","ie","ne","ti","ei","Xe","Ge","ii","ni","oi","ri","ai","hi","ci","ui","li","pi","di","fi","_i","gi","mi","bi","vi","Si","Ai","PromiseState","Resolved","Rejected","Pending","CollisionResolutionStrategy","BroadphaseStrategy","Integrator","Promise","_state","_successCallbacks","_rejectCallback","resolve","reject","join","promises","isArray","joinedPromise","total","successes","rejects","errors","then","error","successCallback","rejectCallback","state","_value","_handleError","errorCallback","_errorCallback","_this","cb","Box","RigidBody","Naive","DynamicAABBTree","Euler","extendStatics","LogLevel","Physics_Physics","Physics","useBoxPhysics","collisionResolutionStrategy","useRigidBodyPhysics","acc","Algebra","enabled","collisionPasses","broadphaseStrategy","broadphaseDebug","showCollisionNormals","showMotionVectors","showBounds","showArea","showContacts","showNormals","defaultMass","integrator","integrationSteps","allowRigidBodyRotation","collisionShift","dynamicTreeVelocityMultiplyer","boundsPadding","surfaceEpsilon","checkForFastBodies","disableMinimumSpeedForFastBody","__extends","setPrototypeOf","__proto__","__","constructor","create","GameEvent","bubbles","_path","_name","stopPropagation","action","actor","eventPath","_onActionStart","eventDispatcher","emit","_onActionEnd","propagate","layPath","actorPath","getAncestors","_actor","KillEvent","_super","target","PreKillEvent","PostKillEvent","GameStartEvent","GameStopEvent","PreDrawEvent","delta","PostDrawEvent","PreDebugDrawEvent","PostDebugDrawEvent","PreUpdateEvent","PostUpdateEvent","PreFrameEvent","prevStats","PostFrameEvent","stats","GamepadConnectEvent","gamepad","GamepadDisconnectEvent","GamepadButtonEvent","button","GamepadAxisEvent","axis","SubscribeEvent","topic","handler","UnsubscribeEvent","VisibleEvent","HiddenEvent","PreCollisionEvent","other","intersection","PostCollisionEvent","CollisionStartEvent","pair","CollisionEndEvent","InitializeEvent","ActivateEvent","oldScene","DeactivateEvent","newScene","ExitViewPortEvent","EnterViewPortEvent","EnterTriggerEvent","ExitTriggerEvent","EventDispatcher_EventDispatcher","EventDispatcher","_handlers","_wiredEventDispatchers","_target","eventName","event","toLowerCase","len","on","off","eventHandlers","once","ev","wire","unwire","Class_Class","Class","eventObject","methods","child","apply","Super","tt","et","CollisionContact_CollisionContact","CollisionContact","bodyA","bodyB","mtv","strategy","_resolveRigidBodyCollision","_resolveBoxCollision","_applyBoxImpulse","collisionType","CollisionType","Active","Passive","velX","vel","Fixed","velY","Util","body","invMassA","mass","invMassB","invMoiA","moi","invMoiB","coefRestitution","restitution","coefFriction","friction","tangent","ra","getCenter","rb","rv","rx","rvNormal","rvTangent","raTangent","raNormal","rbTangent","rbNormal","impulse","addMtv","frictionImpulse","CollisionJumpTable","CollideCircleCircle","circleA","circleB","circleAPos","circleBPos","axisOfCollision","mvt","pointOfCollision","getFurthestPoint","CollideCirclePolygon","polygon","minAxis","testSeparatingAxisTheorem","verts","point1","point2","CollideCircleEdge","edge","cc","da","dda","db","ddb","den","pointOnEdge","dd","CollideEdgeEdge","CollidePolygonEdge","edgeNormal","getClosestFace","face","pc","linePoly","PolygonArea_PolygonArea","points","CollidePolygonPolygon","polyA","polyB","pointA","pointB","contact","CircleArea_CircleArea","CircleArea","options","rayCast","ray","orig","discriminant","toi","toi1","toi2","mintoi","collide","area","EdgeArea_EdgeArea","getBounds","BoundingBox_BoundingBox","getAxes","getMomentOfInertia","axes","closestPointOnPoly","minOverlap","minIndex","proj1","project","proj2","overlap","recalc","scalars","dotProduct","debugDraw","rotation","EdgeArea","_getBodyPos","bodyPos","_getTransformedBegin","_getTransformedEnd","transformedBegin","transformedEnd","PolygonArea","_transformedPoints","_axes","_sides","winding","clockwiseWinding","reverse","_calculateTransformation","getTransformedPoints","getSides","lines","testRay","reduce","accum","pts","furthestPoint","maxDistance","sides","POSITIVE_INFINITY","faceIndex","dist","minX","prev","curr","maxX","minY","maxY","denominator","iplusone","crossTerm","minContactTime","contactIndex","contactTime","poly2","concat","scalar","firstPoint","BoundingBox","left","top","right","bottom","fromPoints","getWidth","getHeight","getPoints","getPerimeter","results","toPolygon","farClipDistance","tmin","tmax","xinv","yinv","tx1","tx2","ty1","ty2","rayCastTime","combine","collides","collidable","totalBoundingBox","overlapX","overlapY","strokeRect","Debug","Info","Warn","Fatal","Logger","_appenders","defaultLevel","_instance","addAppender","ConsoleAppender","getInstance","appender","clearAppenders","_log","level","args","log","debug","info","warn","fatal","console","consoleArgs","unshift","ScreenAppender","_messages","_canvas","document","createElement","window","innerWidth","innerHeight","style","position","_ctx","getContext","appendChild","message","clearRect","opacity","fillText","Resource_extends","Resource_Resource","Resource","path","responseType","bustCache","data","logger","onprogress","oncomplete","onerror","isLoaded","wireEngine","_engine","_cacheBust","uri","test","_start","load","complete","request","XMLHttpRequest","open","onloadstart","onload","status","response","processData","send","getData","setData","URL","createObjectURL","Grayscale","updatePixel","imageData","firstPixel","pixel","avg","Invert","Opacity","Colorize","SpriteEffects_Lighten","Lighten","SpriteEffects_Darken","Darken","SpriteEffects_Saturate","Saturate","SpriteEffects_Desaturate","Desaturate","Fill","Configurable_extends","Configurable","base","class_1","filter","props","RotationType","Sprite_extends","Sprite","imageOrConfig","SpriteImpl","flipVertical","flipHorizontal","effects","_spriteCanvas","_spriteCtx","_pixelData","_pixelsLoaded","_dirtyEffect","image","Texture_Texture","drawWidth","drawHeight","_texture","loaded","naturalWidth","naturalHeight","_loadPixels","drawImage","addEffect","grayscale","colorize","effect","_applyEffects","removeEffect","param","indexToRemove","getImageData","putImageData","clearEffects","reset","save","translate","xpoint","ypoint","restore","draw","Texture_extends","Texture","_isLoaded","_sprite","Image","addEventListener","src","asSprite","ShortestPath","LongestPath","Clockwise","CounterClockwise","Action_EaseTo","EaseTo","duration","easingFcn","_currentLerpTime","_lerpDuration","_lerpStart","_lerpEnd","_initialized","_stopped","_distance","_initialize","update","newX","newY","isComplete","stop","Action_MoveTo","MoveTo","destx","desty","speed","_started","_end","_speed","_delta","_dir","Action_MoveBy","MoveBy","_time","Action_Follow","Follow","actorToFollow","followDistance","_actorToFollow","_current","_maximumDistance","_distanceBetween","actorToFollowSpeed","Action_Meet","Meet","actorToMeet","_speedWasSpecified","_actorToMeet","actorToMeetSpeed","Action_RotateTo","RotateTo","angleRadians","rotationType","_rotationType","distance1","distance2","_shortDistance","_longDistance","_shortestPathIsPositive","_direction","distanceTravelled","Action_RotateBy","RotateBy","ScaleTo","scaleX","scaleY","speedX","speedY","_endX","_endY","_speedX","_speedY","_startX","_startY","_distanceX","_distanceY","sx","directionX","sy","directionY","ScaleBy","Delay","delay","_elapsedTime","_delay","Blink","timeVisible","timeNotVisible","numBlinks","_timeVisible","_timeNotVisible","_totalTime","_duration","visible","Action_Fade","Fade","endOpacity","_multiplier","_endOpacity","Die","actionQueue","clearActions","kill","CallMethod","method","_method","_hasBeenCalled","Repeat","repeat","actions","_actionQueue","ActionQueue","_repeat","_originalRepeat","hasNext","RepeatForever","_actions","_completedActions","_currentAction","getActions","shift","EasingFunctions_EasingFunctions","EasingFunctions","CreateReversableEasingFunction","easing","start","CreateVectorEasingFunction","Linear","currentTime","startValue","endValue","EaseInQuad","EaseOutQuad","EaseInOutQuad","EaseInCubic","EaseOutCubic","EaseInOutCubic","ActionContext_ActionContext","ActionContext","_actors","_queues","addActorToContext","removeActorFromContext","easeTo","moveBy","rotateTo","rotateBy","scaleTo","sizeX","sizeY","scaleBy","blink","fade","die","callMethod","times","repeatForever","follow","meet","asPromise","Kt","Pair_Pair","Pair","id","collision","calculatePairHash","actorA","actorB","PreventCollision","isKilled","collisionArea","DrawUtil","Body_Body","Body","oldPos","oldVel","torque","motion","_totalMtv","applyMtv","getRelativeBounds","isGeometryDirty","getRelativeGeometry","useBoxCollision","center","usePolygonCollision","useCircleCollision","useEdgeCollision","touching","Jt","CapturePointer","enableCapturePointer","input","pointers","revisePointerEventsPaths","EulerMovement_EulerMovement","EulerMovement","seconds","totalAcc","CullingBox_CullingBox","CullingBox","_topLeft","_topRight","_bottomLeft","_bottomRight","isSpriteOffScreen","drawingWidth","currentDrawing","drawingHeight","getWorldPos","topLeftScreen","worldToScreenCoordinates","topRightScreen","bottomLeftScreen","bottomRightScreen","_xCoords","_yCoords","_xMin","_yMin","_xMax","_yMax","minWorld","maxWorld","_xMinWorld","_yMinWorld","_xMaxWorld","_yMaxWorld","boundingPoints","clientWidth","clientHeight","rect","OffscreenCulling_OffscreenCulling","OffscreenCulling","cullingBox","globalScale","getGlobalScale","cameraPos","currentScene","camera","actorScreenCoords","cameraScreenCoords","zoom","scene","getZoom","isOffScreen","halfDrawWidth","halfDrawHeight","TileMapCollisionDetection_TileMapCollisionDetection","TileMapCollisionDetection","tileMaps","intersectMap","getSideFromIntersect","Actor_extends","Actor","xOrConfig","ActorImpl","maxId","oldAcc","_height","_width","oldScale","previousOpacity","children","collisionGroups","_geometryDirty","_collisionHandlers","_isInitialized","frames","_effectsDirty","traits","capturePointer","captureMoveEvents","captureDragEvents","_zIndex","_isKilled","_opacityFx","_capturePointerEvents","_captureMoveEvents","_captureDragEvents","config","_initDefaults","set","theX","theY","thePos","theVel","theAcc","theAngle","angularVelocity","theTorque","theMass","theMoi","theFriction","theRestitution","_color","onInitialize","isInitialized","defaults","_checkForPointerOptIn","normalized","_prekill","_scene","onPreKill","_postkill","onPostKill","unkill","setDrawing","key","addDrawing","getZIndex","newZ","setZIndex","newIndex","cleanupDrawTree","updateDrawTree","addCollisionGroup","name","removeCollisionGroup","setWidth","setHeight","getLeft","getRight","getTop","getBottom","getWorldRotation","parents","root","reduceRight","px","py","parentScale","rotated","_getCalculatedAnchor","bb","getGeometry","recurse","containment","some","collidesWithSide","separationVector","bounds","otherBounds","onCollidesWith","group","getCollisionHandlers","removeCollidesWith","within","_reapplyEffects","drawing","integrate","_preupdate","_postupdate","onPreUpdate","onPostUpdate","_predraw","offsetX","offsetY","fillRect","_postdraw","onPreDraw","onPostDraw","ticks","0 Pi","Pi/2","Pi","3/2 Pi","oldFont","font","tick","textAlign","currentActor","Axis","UIActor_extends","UIActor_UIActor","UIActor","useWorld","coords","Timer","fcn","interval","repeats","numberOfRepeats","maxNumberOfRepeats","_totalTimeAlive","_paused","_numberOfTicks","newInterval","newNumberOfRepeats","getTimeRunning","pause","unpause","cancel","cancelTimer","TileMap_extends","TileMap","cellWidth","cellHeight","rows","cols","TileMapImpl","cd","_collidingX","_collidingY","_onScreenXStart","_onScreenXEnd","_onScreenYStart","_onScreenYEnd","_spriteSheets","Cell","registerSpriteSheet","spriteSheet","actorBounds","cell","getCellByPoint","solid","getCellByIndex","getCell","worldCoordsUpperLeft","worldCoordsLowerRight","cs","csi","cslen","xEnd","yEnd","sprites","spriteId","ss","spriteSheetKey","sprite","getSprite","TileSprite","CellImpl","_bounds","pushSprite","tileSprite","removeSprite","clearSprites","AudioContextFactory","_INSTANCE","AudioContext","webkitAudioContext","WebAudio_WebAudio","WebAudio","unlock","_unlocked","audioContext","buffer","createBuffer","source","createBufferSource","ended","connect","destination","onended","noteOn","setTimeout","playbackState","legacySource","PLAYING_STATE","FINISHED_STATE","isUnlocked","Loader_extends","Loader_Loader","Loader","loadables","_resourceList","_resourceCount","_numLoaded","_progressCounts","_totalCounts","logo","logoWidth","logoHeight","backgroundColor","addResources","_imageElement","addResource","loadable","me","progressArray","progressChunks","progressResult","loadNext","list","canvasHeight","devicePixelRatio","canvasWidth","imageHeight","oldAntialias","getAntialiasing","setAntialiasing","_image","progressWidth","margin","Loader_PauseAfterLoader","PauseAfterLoader","triggerElementId","_handleOnTrigger","_waitPromise","_loadedValue","_playTrigger","display","getElementById","REPORTED_FEATURES","webgl","webaudio","gamepadapi","Detector_Detector","Detector","_features","failedTests","_criticalTests","canvasSupport","elem","arrayBufferSupport","xhr","dataUrlSupport","toDataURL","objectUrlSupport","rgbaSupport","cssText","_warningTest","webAudioSupport","mozAudioContext","msAudioContext","oAudioContext","webglSupport","_loadBrowserFeatures","getBrowserFeatures","logBrowserFeatures","msg","supported","keys","feature","arraybuffer","dataurl","objecturl","rgba","navigator","getGamepads","failedCritical","warning","DynamicTree_TreeNode","TreeNode","isLeaf","DynamicTree_DynamicTree","DynamicTree","worldBounds","nodes","_insert","leaf","leafAABB","currentRoot","oldArea","combinedArea","cost","inheritanceCost","leftCost","leftCombined","rightCost","rightCombined","oldParent","newParent","currentNode","_balance","_remove","sibling","grandParent","trackBody","node","updateBody","untrackBody","multdx","multdy","balance","query","callback","helper","rayCastQuery","getNodes","DynamicTreeCollisionBroadphase_DynamicTreeCollisionBroadphase","DynamicTreeCollisionBroadphase","_dynamicCollisionTree","_collisionHash","_collisionPairCache","_lastFramePairs","_lastFramePairsHash","track","untrack","_canCollide","hash","broadphase","targets","potentialColliders","physics","pairs","potentialColliders_1","updateDistance","minDimension","fastBodies","minBody","updateVec","centerPoint","minTranslate","hitPoint","fastBodyCollisions","narrowphase","collisions","collidersHash","pairs_1","canCollide","runCollisionStartEnd","currentFrameHash","pairs_2","actor1","actor2","updated","SortedList","getComparable","_getComparable","find","_find","_root","getKey","_get","BinaryTreeNode","setLeft","setRight","removeByComparable","elementIndex","_findMinNode","setKey","_cleanup","comparable","current","_list","treeNode","_key","_data","_left","_right","MockedElement","getTheKey","Group_extends","Group_Group","Group","_logger","_members","groups","actorOrActors","getMembers","move","members","getRandomMember","Camera_extends","StrategyContainer","lockToActor","addStrategy","LockCameraToActorStrategy","lockToActorAxis","Camera_LockCameraToActorAxisStrategy","elasticToActor","cameraElasticity","cameraFriction","Camera_ElasticToActorStrategy","radiusAroundActor","RadiusAroundActorStrategy","FontUnit","TextAlign","BaseAlign","FontStyle","_cam","_eng","cam","currentFocus","getFocus","focus","cameraVel","stretch","offset","Camera_BaseCamera","BaseCamera","_cameraStrategies","dz","ax","ay","az","_x","_y","_cameraMoving","_isShaking","_shakeMagnitudeX","_shakeMagnitudeY","_shakeDuration","_elapsedShakeTime","_xShake","_yShake","_isZooming","_zoomStart","_zoomEnd","_currentZoomTime","_zoomDuration","_zoomEasing","_easing","_follow","easingFn","_lerpPromise","shake","magnitudeX","magnitudeY","_zoomPromise","cameraStrategy","removeStrategy","clearAllStrategies","newZoom","lerpPoint","_isDoneShaking","pixelRatio","newCanvasWidth","newCanvasHeight","Label_extends","Em","Rem","Px","Pt","Percent","Center","Start","End","Hanging","Middle","Alphabetic","Ideographic","Normal","Italic","Oblique","Label","textOrConfig","fontFamily","spriteFont","LabelImpl","bold","fontSize","fontStyle","fontUnit","baseAlign","letterSpacing","caseInsensitive","text","_textShadowOn","_shadowOffsetX","_shadowOffsetY","getTextWidth","_fontString","measureText","_lookupFontUnit","_lookupTextAlign","_lookupBaseAlign","_lookupFontStyle","boldstring","setTextShadow","shadowColor","useTextShadow","clearTextShadow","_fontDraw","oldAlign","oldTextBaseline","textBaseline","maxWidth","Trigger_extends","triggerDefaults","Trigger_Trigger","Trigger","opts","evt","_dispatchAction","wp","isUIActor","Buttons","Axes","Scene_extends","Scene_Scene","Scene","actors","triggers","uiActors","_sortedDrawingTree","_broadphase","_killQueue","_triggerKillQueue","_timers","_cancelQueue","onActivate","_oldScene","_newScene","onDeactivate","_initializeChildren","_activate","_deactivate","removeTimer","_collectActorStats","beforeBroadphase","currFrame","afterBroadphase","beforeNarrowphase","iter","collisionDelta","afterNarrowphase","killed","_processKillQueue","killQueue","collection","actorIndex","killQueue_1","sortedChildren","isDebug","entity","addUIActor","_addChild","addTimer","addTileMap","removeUIActor","_removeChild","removeTileMap","tileMap","timer","isTimerActive","createGroup","getGroup","removeGroup","isActorInDrawTree","isCurrentScene","alive","_d","_e","FrameStats","prevFrame","_id","_fps","_actorStats","remaining","_durationStats","_physicsStats","PhysicsStats","otherStats","fps","fs","_pairs","_collisions","_collidersHash","_fastBodies","_fastBodyCollisions","_narrowphase","ps","colliders","Gamepad_extends","Gamepad_Gamepads","Gamepads","_gamePadTimeStamps","_oldPads","_pads","_initSuccess","_navigator","_minimumConfiguration","init","_clonePads","setMinimumGamepadConfiguration","_enableAndUpdate","_isGamepadValid","pad","axesLength","buttonLength","buttons","connected","gamepads","at","timestamp","navigatorGamepad","getButton","pressed","updateButton","updateAxes","_clonePad","Gamepad","getValidGamepads","pads","arr","clonedPad","MinAxisMoveThreshold","_buttons","isButtonPressed","buttonIndex","axesIndex","Face1","Face2","Face3","Face4","LeftBumper","RightBumper","LeftTrigger","RightTrigger","Select","LeftStick","RightStick","DpadUp","DpadDown","DpadLeft","DpadRight","LeftStickX","LeftStickY","RightStickX","RightStickY","PointerType","PointerButton","WheelDeltaMode","PointerScope","Pointer_extends","Touch","Mouse","Pen","Unknown","Pixel","Page","Canvas","Document","PointerEvent","coordinates","pointer","pointerType","isActorUnderPointer","PointerEventFactory","_pointerEventType","PointerDragEvent","PointerUpEvent","isDragEnd","PointerDownEvent","isDragStart","PointerMoveEvent","hasActorsUnderPointer","getActorsUnderPointer","_onActorLeave","isDragging","dragTarget","hasActorUnderPointerInList","_onActorEnter","pe","createPointerEventByName","addActorUnderPointer","removeActorUnderPointer","PointerEnterEvent","PointerLeaveEvent","PointerCancelEvent","WheelEvent","deltaX","deltaY","deltaZ","deltaMode","factory","Keys","Pointer_Pointers","Pointers","_pointerDown","_pointerUp","_pointerMove","_pointerCancel","_wheel","_pointers","_activePointers","Pointer_Pointer","primary","_handleTouchEvent","touchAction","_handlePointerEvent","MSPointerEvent","msTouchAction","_handleMouseEvent","_handleWheelEvent","onmousewheel","_propagatePointerEvent","_propagateWheelEvent","_revisePointerEventPath","_validateWheelEventPath","wheelEvent","isNotUIActor","_propagateWheelPointerEvent","eventArr","preventDefault","changedTouches","_getPointerIndex","identifier","pointerId","_stringToPointerType","pageScrollPreventionMode","ScrollPreventionMode","All","transformedPoint","wheelDeltaX","wheelDeltaY","wheelDelta","detail","we","idx","Pointer","_isDown","_wasDown","_actorsUnderPointer","lastPagePos","lastScreenPos","lastWorldPos","_onPointerMove","_onPointerDown","_onPointerUp","Keyboard_extends","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","Num0","Numlock","Semicolon","J","Shift","Alt","Space","Esc","DisplayMode","KeyEvent","Keyboard","_keys","_keysUp","_keysDown","global","code","_normalizeKeyCode","keyCode","keyEvent","getKeys","wasPressed","isHeld","wasReleased","Engine_extends","FullScreen","Container","Position","EmitterType","Engine_Engine","Engine","_hasStarted","postProcessors","scenes","_animations","isFullscreen","displayMode","_suppressHiDPIScaling","pauseAudioWhenHidden","debugColor","onFatalException","_isSmoothingEnabled","_timescale","_isLoading","_DefaultEngineOptions","detector","suppressMinimumBrowserFeatureDetection","_compatible","innerText","testMessage","canvasElementId","parentElement","removeChild","suppressConsoleBootMessage","EX_VERSION","_loader","rootScene","addScene","goToScene","getWorldBounds","playAnimation","animation","AnimationNode","removeScene","_setHeightByDisplayMode","overflow","hidden","visibilityChange","_intializeDisplayModePosition","keyboard","pointerScope","scrollPreventionMode","suppressHiDPIScaling","_initializeHiDpi","specifiedPosition","split","marginTop","marginLeft","isHiDpi","oldWidth","oldHeight","isSmooth","imageSmoothingEnabled","smoothing","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","_overrideInitialize","_update","isDone","_draw","process","loader","loadingComplete","createMainLoop","requestAnimationFrame","game","raf","nowFn","lastTime","mainloop","_requestId","elapsed","timescale","frameId","beforeUpdate","afterUpdate","afterDraw","cancelAnimationFrame","isPaused","screenshot","raw","MediaEvents_extends","MediaEvent","_val","NativeSoundEvent","Oi","Particles_extends","Circle","Rectangle","Particle","emitterOrConfig","life","beginColor","endColor","velocity","acceleration","startSize","endSize","ParticleImpl","particleRotationalVelocity","currentRotation","focusAccel","fadeFlag","_rRate","_gRate","_bRate","_aRate","_currentColor","emitter","particleSize","particleSprite","sizeRate","elapsedMultiplier","ParticleEmitter","removeParticle","accel","ParticleEmitterImpl","numParticles","isEmitting","particles","deadParticles","minVel","maxVel","minAngle","maxAngle","emitRate","particleLife","minSize","maxSize","emitterType","randomRotation","_particlesToEmit","particle","emitParticles","particleCount","_createParticle","clearParticles","ranX","ranY","Internal","Actions","Action_namespaceObject","NaiveCollisionBroadphase_NaiveCollisionBroadphase","NaiveCollisionBroadphase","collisionPairs","minimumTranslationVector","cp","Animation_extends","Animation","engineOrConfig","images","loop","AnimationImpl","currentFrame","_oldTime","freezeFrame","_setAnchor","_setRotation","_setScale","_updateValues","skip","currSprite","play","Polygon_Polygon","Polygon","filled","_points","fillColor","lineColor","SpriteSheet_extends","SpriteSheet","imageOrConfigOrSprites","columns","spWidth","spHeight","SpriteSheetImpl","loadFromImage","getAnimationByIndices","indices","getAnimationBetween","beginIndex","endIndex","getAnimationForAll","getAnimationByCoords","spriteCoordinates","maxHeight","coord","anim","SpriteFont","alphabet","SpriteFontImpl","_currentOpacity","_sprites","_textShadowDirty","_textShadowColor","_textShadowSprites","_alphabet","_caseInsensitive","getTextSprites","lookup","char","character","_parseOptions","characterShadow","currX","currY","charSprite","ExResponse","type","any","blob","json","_lerp","_fade","ColorBlindness","PerlinNoise_PerlinGenerator","PerlinGenerator","_perm","_p","Uint8Array","_defaultPerlinOptions","octaves","frequency","amplitude","persistance","_random","noise","amp","freq","maxValue","_noise1d","_noise2d","_noise3d","sequence","step","grid","_gradient3d","_gradient2d","_gradient1d","intX","intY","fadeX","fadeY","intZ","fadeZ","aa","ba","ab","PerlinNoise_PerlinDrawer2D","PerlinDrawer2D","generator","colorFcn","Protanope","Deuteranope","Tritanope","ColorBlindCorrector_ColorBlindCorrector","ColorBlindCorrector","simulate","colorMode","_vertexShader","_fragmentShader","_internalCanvas","_gl","preserveDrawingBuffer","_program","createProgram","fragmentShader","_getShader","_getFragmentShaderByMode","vertextShader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","replace","_setRectangle","bufferData","ARRAY_BUFFER","Float32Array","STATIC_DRAW","program","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","out","positionLocation","getAttribLocation","texCoordLocation","texCoordBuffer","bindBuffer","enableVertexAttribArray","vertexAttribPointer","FLOAT","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","resolutionLocation","getUniformLocation","uniform2f","positionBuffer","drawArrays","TRIANGLES","pixelData","readPixels","AudioInstance_extends","AudioInstanceFactory","AudioInstance_AudioTagInstance","AudioBuffer","AudioInstance_WebAudioInstance","AudioInstance_AudioInstance","AudioInstance","_src","_volume","_loop","_isPlaying","_isPaused","_wireUpOnEnded","isPlaying","_resumePlayBack","_startPlayBack","_playingPromise","_handleOnEnded","AudioTagInstance","Audio","volume","WebAudioInstance","_audioContext","_volumeNode","createGain","_currentOffset","_createNewBufferSource","gain","setTargetAtTime","playbackRate","_setPauseOffset","_rememberStartTime","_playbackRate","restartTime","amend","_startTime","getTime","setValueAtTime","tn","canPlayFile","file","canPlayType","Sound_extends","Sound_Sound","Sound","paths","_tracks","_wasPlayingOnHidden","_processedData","_detectResponseType","paths_1","instanceCount","_resumePlayback","_startPlayback","ArrayBuffer","_processArrayBufferData","_processBlobData","processedData","_setProcessedData","getTrackId","resumed","newTrack","_createNewTrack","playPromise","resolved","decodeAudioData","aiPromise","_getTrackInstance","pt","obsolete","alternateMethod","property","descriptor","SyntaxError","_DrawUtil__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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A,IACA,IACA,GACA,EACA,GACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,GACA,IACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,EACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,EACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,KAEA7pE,KAAA8pE,GAAA,IAAAC,WAAA,KACA/pE,KAAAgqE,uBACAC,QAAA,EACAC,UAAA,EACAC,UAAA,EACAC,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","file":"vendors~main.js","sourcesContent":["import * as Util from './Util/Util';\r\n/**\r\n * A 2D vector on a plane.\r\n */\r\nvar Vector = /** @class */ (function () {\r\n    /**\r\n     * @param x  X component of the Vector\r\n     * @param y  Y component of the Vector\r\n     */\r\n    function Vector(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\r\n     * @param angle The angle to generate the vector\r\n     */\r\n    Vector.fromAngle = function (angle) {\r\n        return new Vector(Math.cos(angle), Math.sin(angle));\r\n    };\r\n    /**\r\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\r\n     */\r\n    Vector.isValid = function (vec) {\r\n        if (vec === null || vec === undefined) {\r\n            return false;\r\n        }\r\n        if (isNaN(vec.x) || isNaN(vec.y)) {\r\n            return false;\r\n        }\r\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Calculates distance between two Vectors\r\n     * @param vec1\r\n     * @param vec2\r\n     */\r\n    Vector.distance = function (vec1, vec2) {\r\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\r\n    };\r\n    /**\r\n     * Sets the x and y components at once\r\n     */\r\n    Vector.prototype.setTo = function (x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    };\r\n    /**\r\n     * Compares this point against another and tests for equality\r\n     * @param point  The other point to compare to\r\n     */\r\n    Vector.prototype.equals = function (vector, tolerance) {\r\n        if (tolerance === void 0) { tolerance = 0.001; }\r\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\r\n    };\r\n    /**\r\n     * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\r\n     * @param v  The other vector. Leave blank to use origin vector.\r\n     */\r\n    Vector.prototype.distance = function (v) {\r\n        if (!v) {\r\n            v = Vector.Zero;\r\n        }\r\n        return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\r\n    };\r\n    /**\r\n     * The magnitude (size) of the Vector\r\n     */\r\n    Vector.prototype.magnitude = function () {\r\n        return this.distance();\r\n    };\r\n    /**\r\n     * Normalizes a vector to have a magnitude of 1.\r\n     */\r\n    Vector.prototype.normalize = function () {\r\n        var d = this.distance();\r\n        if (d > 0) {\r\n            return new Vector(this.x / d, this.y / d);\r\n        }\r\n        else {\r\n            return new Vector(0, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the average (midpoint) between the current point and the specified\r\n     */\r\n    Vector.prototype.average = function (vec) {\r\n        return this.add(vec).scale(0.5);\r\n    };\r\n    /**\r\n     * Scales a vector's by a factor of size\r\n     * @param size  The factor to scale the magnitude by\r\n     */\r\n    Vector.prototype.scale = function (size) {\r\n        return new Vector(this.x * size, this.y * size);\r\n    };\r\n    /**\r\n     * Adds one vector to another\r\n     * @param v The vector to add\r\n     */\r\n    Vector.prototype.add = function (v) {\r\n        return new Vector(this.x + v.x, this.y + v.y);\r\n    };\r\n    /**\r\n     * Subtracts a vector from another, if you subract vector `B.sub(A)` the resulting vector points from A -> B\r\n     * @param v The vector to subtract\r\n     */\r\n    Vector.prototype.sub = function (v) {\r\n        return new Vector(this.x - v.x, this.y - v.y);\r\n    };\r\n    /**\r\n     * Adds one vector to this one modifying the original\r\n     * @param v The vector to add\r\n     */\r\n    Vector.prototype.addEqual = function (v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        return this;\r\n    };\r\n    /**\r\n     * Subtracts a vector from this one modifying the original\r\n     * @parallel v The vector to subtract\r\n     */\r\n    Vector.prototype.subEqual = function (v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        return this;\r\n    };\r\n    /**\r\n     * Scales this vector by a factor of size and modifies the original\r\n     */\r\n    Vector.prototype.scaleEqual = function (size) {\r\n        this.x *= size;\r\n        this.y *= size;\r\n        return this;\r\n    };\r\n    /**\r\n     * Performs a dot product with another vector\r\n     * @param v  The vector to dot\r\n     */\r\n    Vector.prototype.dot = function (v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    };\r\n    Vector.prototype.cross = function (v) {\r\n        if (v instanceof Vector) {\r\n            return this.x * v.y - this.y * v.x;\r\n        }\r\n        else if (typeof v === 'number') {\r\n            return new Vector(v * this.y, -v * this.x);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the perpendicular vector to this one\r\n     */\r\n    Vector.prototype.perpendicular = function () {\r\n        return new Vector(this.y, -this.x);\r\n    };\r\n    /**\r\n     * Returns the normal vector to this one, same as the perpendicular of length 1\r\n     */\r\n    Vector.prototype.normal = function () {\r\n        return this.perpendicular().normalize();\r\n    };\r\n    /**\r\n     * Negate the current vector\r\n     */\r\n    Vector.prototype.negate = function () {\r\n        return this.scale(-1);\r\n    };\r\n    /**\r\n     * Returns the angle of this vector.\r\n     */\r\n    Vector.prototype.toAngle = function () {\r\n        return Math.atan2(this.y, this.x);\r\n    };\r\n    /**\r\n     * Rotates the current vector around a point by a certain number of\r\n     * degrees in radians\r\n     */\r\n    Vector.prototype.rotate = function (angle, anchor) {\r\n        if (!anchor) {\r\n            anchor = new Vector(0, 0);\r\n        }\r\n        var sinAngle = Math.sin(angle);\r\n        var cosAngle = Math.cos(angle);\r\n        var x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\r\n        var y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\r\n        return new Vector(x, y);\r\n    };\r\n    /**\r\n     * Creates new vector that has the same values as the previous.\r\n     */\r\n    Vector.prototype.clone = function () {\r\n        return new Vector(this.x, this.y);\r\n    };\r\n    /**\r\n     * Returns a string repesentation of the vector.\r\n     */\r\n    Vector.prototype.toString = function () {\r\n        return \"(\" + this.x + \", \" + this.y + \")\";\r\n    };\r\n    /**\r\n     * A (0, 0) vector\r\n     */\r\n    Vector.Zero = new Vector(0, 0);\r\n    /**\r\n     * A (1, 1) vector\r\n     */\r\n    Vector.One = new Vector(1, 1);\r\n    /**\r\n     * A (0.5, 0.5) vector\r\n     */\r\n    Vector.Half = new Vector(0.5, 0.5);\r\n    /**\r\n     * A unit vector pointing up (0, -1)\r\n     */\r\n    Vector.Up = new Vector(0, -1);\r\n    /**\r\n     * A unit vector pointing down (0, 1)\r\n     */\r\n    Vector.Down = new Vector(0, 1);\r\n    /**\r\n     * A unit vector pointing left (-1, 0)\r\n     */\r\n    Vector.Left = new Vector(-1, 0);\r\n    /**\r\n     * A unit vector pointing right (1, 0)\r\n     */\r\n    Vector.Right = new Vector(1, 0);\r\n    return Vector;\r\n}());\r\nexport { Vector };\r\n/**\r\n * A 2D ray that can be cast into the scene to do collision detection\r\n */\r\nvar Ray = /** @class */ (function () {\r\n    /**\r\n     * @param pos The starting position for the ray\r\n     * @param dir The vector indicating the direction of the ray\r\n     */\r\n    function Ray(pos, dir) {\r\n        this.pos = pos;\r\n        this.dir = dir.normalize();\r\n    }\r\n    /**\r\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\r\n     * This number indicates the mathematical intersection time.\r\n     * @param line  The line to test\r\n     */\r\n    Ray.prototype.intersect = function (line) {\r\n        var numerator = line.begin.sub(this.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\r\n            return -1;\r\n        }\r\n        // Lines are parallel\r\n        var divisor = this.dir.cross(line.getSlope());\r\n        if (divisor === 0) {\r\n            return -1;\r\n        }\r\n        var t = numerator.cross(line.getSlope()) / divisor;\r\n        if (t >= 0) {\r\n            var u = numerator.cross(this.dir) / divisor / line.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return t;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * Returns the point of intersection given the intersection time\r\n     */\r\n    Ray.prototype.getPoint = function (time) {\r\n        return this.pos.add(this.dir.scale(time));\r\n    };\r\n    return Ray;\r\n}());\r\nexport { Ray };\r\n/**\r\n * A 2D line segment\r\n */\r\nvar Line = /** @class */ (function () {\r\n    /**\r\n     * @param begin  The starting point of the line segment\r\n     * @param end  The ending point of the line segment\r\n     */\r\n    function Line(begin, end) {\r\n        this.begin = begin;\r\n        this.end = end;\r\n    }\r\n    Object.defineProperty(Line.prototype, \"slope\", {\r\n        /**\r\n         * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\r\n         */\r\n        get: function () {\r\n            return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Line.prototype, \"intercept\", {\r\n        /**\r\n         * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\r\n         */\r\n        get: function () {\r\n            return this.begin.y - this.slope * this.begin.x;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets the normal of the line\r\n     */\r\n    Line.prototype.normal = function () {\r\n        return this.end.sub(this.begin).normal();\r\n    };\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    Line.prototype.getSlope = function () {\r\n        var begin = this.begin;\r\n        var end = this.end;\r\n        var distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    };\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    Line.prototype.getLength = function () {\r\n        var begin = this.begin;\r\n        var end = this.end;\r\n        var distance = begin.distance(end);\r\n        return distance;\r\n    };\r\n    /**\r\n     * Find the perpendicular distance from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * @param point\r\n     */\r\n    Line.prototype.distanceToPoint = function (point) {\r\n        var x0 = point.x;\r\n        var y0 = point.y;\r\n        var l = this.getLength();\r\n        var dy = this.end.y - this.begin.y;\r\n        var dx = this.end.x - this.begin.x;\r\n        var distance = Math.abs(dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\r\n        return distance;\r\n    };\r\n    /**\r\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\r\n     * a new point with the calculated Y value and vice-versa.\r\n     *\r\n     * @param x The known X value of the target point\r\n     * @param y The known Y value of the target point\r\n     * @returns A new point with the other calculated axis value\r\n     */\r\n    Line.prototype.findPoint = function (x, y) {\r\n        if (x === void 0) { x = null; }\r\n        if (y === void 0) { y = null; }\r\n        var m = this.slope;\r\n        var b = this.intercept;\r\n        if (x !== null) {\r\n            return new Vector(x, m * x + b);\r\n        }\r\n        else if (y !== null) {\r\n            return new Vector((y - b) / m, y);\r\n        }\r\n        else {\r\n            throw new Error('You must provide an X or a Y value');\r\n        }\r\n    };\r\n    /**\r\n     * @see http://stackoverflow.com/a/11908158/109458\r\n     */\r\n    Line.prototype.hasPoint = function () {\r\n        var currPoint;\r\n        var threshold = 0;\r\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            currPoint = new Vector(arguments[0], arguments[1]);\r\n            threshold = arguments[2] || 0;\r\n        }\r\n        else if (arguments[0] instanceof Vector) {\r\n            currPoint = arguments[0];\r\n            threshold = arguments[1] || 0;\r\n        }\r\n        else {\r\n            throw 'Could not determine the arguments for Vector.hasPoint';\r\n        }\r\n        var dxc = currPoint.x - this.begin.x;\r\n        var dyc = currPoint.y - this.begin.y;\r\n        var dx1 = this.end.x - this.begin.x;\r\n        var dy1 = this.end.y - this.begin.y;\r\n        var cross = dxc * dy1 - dyc * dx1;\r\n        // check whether point lines on the line\r\n        if (Math.abs(cross) > threshold) {\r\n            return false;\r\n        }\r\n        // check whether point lies in-between start and end\r\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\r\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\r\n        }\r\n        else {\r\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\r\n        }\r\n    };\r\n    return Line;\r\n}());\r\nexport { Line };\r\n/**\r\n * A 1 dimensional projection on an axis, used to test overlaps\r\n */\r\nvar Projection = /** @class */ (function () {\r\n    function Projection(min, max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    Projection.prototype.overlaps = function (projection) {\r\n        return this.max > projection.min && projection.max > this.min;\r\n    };\r\n    Projection.prototype.getOverlap = function (projection) {\r\n        if (this.overlaps(projection)) {\r\n            if (this.max > projection.max) {\r\n                return projection.max - this.min;\r\n            }\r\n            else {\r\n                return this.max - projection.min;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    return Projection;\r\n}());\r\nexport { Projection };\r\nvar GlobalCoordinates = /** @class */ (function () {\r\n    function GlobalCoordinates(worldPos, pagePos, screenPos) {\r\n        this.worldPos = worldPos;\r\n        this.pagePos = pagePos;\r\n        this.screenPos = screenPos;\r\n    }\r\n    GlobalCoordinates.fromPagePosition = function (xOrPos, yOrEngine, engineOrUndefined) {\r\n        var pageX;\r\n        var pageY;\r\n        var pagePos;\r\n        var engine;\r\n        if (arguments.length === 3) {\r\n            pageX = xOrPos;\r\n            pageY = yOrEngine;\r\n            pagePos = new Vector(pageX, pageY);\r\n            engine = engineOrUndefined;\r\n        }\r\n        else {\r\n            pagePos = xOrPos;\r\n            pageX = pagePos.x;\r\n            pageY = pagePos.y;\r\n            engine = yOrEngine;\r\n        }\r\n        var screenX = pageX - Util.getPosition(engine.canvas).x;\r\n        var screenY = pageY - Util.getPosition(engine.canvas).y;\r\n        var screenPos = new Vector(screenX, screenY);\r\n        var worldPos = engine.screenToWorldCoordinates(screenPos);\r\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\r\n    };\r\n    return GlobalCoordinates;\r\n}());\r\nexport { GlobalCoordinates };\r\n//# sourceMappingURL=Algebra.js.map","import { Vector } from '../Algebra';\r\nimport { Random } from '../Math/Random';\r\nimport { Side } from '../Collision/Side';\r\n/**\r\n * Two PI constant\r\n */\r\nexport var TwoPI = Math.PI * 2;\r\n/**\r\n * Merges one or more objects into a single target object\r\n *\r\n * @returns Merged object with properties from other objects\r\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\r\n */\r\nexport function extend() {\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments.length;\r\n    // Check if a deep merge\r\n    if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\r\n        deep = arguments[0];\r\n        i++;\r\n    }\r\n    // Merge the object into the extended object\r\n    var assignExists = typeof Object.assign === 'function';\r\n    var merge = null;\r\n    if (!assignExists) {\r\n        merge = function (obj) {\r\n            for (var prop in obj) {\r\n                if (Object.prototype.hasOwnProperty.call(obj, prop)) {\r\n                    // If deep merge and property is an object, merge properties\r\n                    if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\r\n                        extended[prop] = extend(true, extended[prop], obj[prop]);\r\n                    }\r\n                    else {\r\n                        extended[prop] = obj[prop];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        merge = Object.assign;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = arguments[i];\r\n        if (!assignExists) {\r\n            merge(obj);\r\n        }\r\n        else {\r\n            merge(extended, obj);\r\n        }\r\n    }\r\n    return extended;\r\n}\r\nexport function base64Encode(inputStr) {\r\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n    var outputStr = '';\r\n    var i = 0;\r\n    while (i < inputStr.length) {\r\n        //all three \"& 0xff\" added below are there to fix a known bug\r\n        //with bytes returned by xhr.responseText\r\n        var byte1 = inputStr.charCodeAt(i++) & 0xff;\r\n        var byte2 = inputStr.charCodeAt(i++) & 0xff;\r\n        var byte3 = inputStr.charCodeAt(i++) & 0xff;\r\n        var enc1 = byte1 >> 2;\r\n        var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\r\n        var enc3, enc4;\r\n        if (isNaN(byte2)) {\r\n            enc3 = enc4 = 64;\r\n        }\r\n        else {\r\n            enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\r\n            if (isNaN(byte3)) {\r\n                enc4 = 64;\r\n            }\r\n            else {\r\n                enc4 = byte3 & 63;\r\n            }\r\n        }\r\n        outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\r\n    }\r\n    return outputStr;\r\n}\r\n/**\r\n * Clamps a value between a min and max inclusive\r\n */\r\nexport function clamp(val, min, max) {\r\n    return Math.min(Math.max(min, val), max);\r\n}\r\nexport function randomInRange(min, max, random) {\r\n    if (random === void 0) { random = new Random(); }\r\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\r\n}\r\nexport function randomIntInRange(min, max, random) {\r\n    if (random === void 0) { random = new Random(); }\r\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\r\n}\r\nexport function canonicalizeAngle(angle) {\r\n    var tmpAngle = angle;\r\n    if (angle > TwoPI) {\r\n        while (tmpAngle > TwoPI) {\r\n            tmpAngle -= TwoPI;\r\n        }\r\n    }\r\n    if (angle < 0) {\r\n        while (tmpAngle < 0) {\r\n            tmpAngle += TwoPI;\r\n        }\r\n    }\r\n    return tmpAngle;\r\n}\r\nexport function toDegrees(radians) {\r\n    return (180 / Math.PI) * radians;\r\n}\r\nexport function toRadians(degrees) {\r\n    return (degrees / 180) * Math.PI;\r\n}\r\nexport function getPosition(el) {\r\n    var oLeft = 0, oTop = 0;\r\n    var calcOffsetLeft = function (parent) {\r\n        oLeft += parent.offsetLeft;\r\n        if (parent.offsetParent) {\r\n            calcOffsetLeft(parent.offsetParent);\r\n        }\r\n    };\r\n    var calcOffsetTop = function (parent) {\r\n        oTop += parent.offsetTop;\r\n        if (parent.offsetParent) {\r\n            calcOffsetTop(parent.offsetParent);\r\n        }\r\n    };\r\n    calcOffsetLeft(el);\r\n    calcOffsetTop(el);\r\n    return new Vector(oLeft, oTop);\r\n}\r\nexport function addItemToArray(item, array) {\r\n    if (array.indexOf(item) === -1) {\r\n        array.push(item);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function removeItemFromArray(item, array) {\r\n    var index = -1;\r\n    if ((index = array.indexOf(item)) > -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function contains(array, obj) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        if (array[i] === obj) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function getOppositeSide(side) {\r\n    if (side === Side.Top) {\r\n        return Side.Bottom;\r\n    }\r\n    if (side === Side.Bottom) {\r\n        return Side.Top;\r\n    }\r\n    if (side === Side.Left) {\r\n        return Side.Right;\r\n    }\r\n    if (side === Side.Right) {\r\n        return Side.Left;\r\n    }\r\n    return Side.None;\r\n}\r\nexport function getSideFromVector(direction) {\r\n    var directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n    var directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n    var max = -Number.MAX_VALUE;\r\n    var maxIndex = -1;\r\n    for (var i = 0; i < directions.length; i++) {\r\n        if (directions[i].dot(direction) > max) {\r\n            max = directions[i].dot(direction);\r\n            maxIndex = i;\r\n        }\r\n    }\r\n    return directionEnum[maxIndex];\r\n}\r\n/**\r\n * Excalibur's dynamically resizing collection\r\n */\r\nvar Collection = /** @class */ (function () {\r\n    /**\r\n     * @param initialSize  Initial size of the internal backing array\r\n     */\r\n    function Collection(initialSize) {\r\n        if (initialSize === void 0) { initialSize = Collection.DefaultSize; }\r\n        this._internalArray = null;\r\n        this._endPointer = 0;\r\n        this._internalArray = new Array(initialSize);\r\n    }\r\n    Collection.prototype._resize = function () {\r\n        var newSize = this._internalArray.length * 2;\r\n        var newArray = new Array(newSize);\r\n        var count = this.count();\r\n        for (var i = 0; i < count; i++) {\r\n            newArray[i] = this._internalArray[i];\r\n        }\r\n        delete this._internalArray;\r\n        this._internalArray = newArray;\r\n    };\r\n    /**\r\n     * Push elements to the end of the collection\r\n     */\r\n    Collection.prototype.push = function (element) {\r\n        if (this._endPointer === this._internalArray.length) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[this._endPointer++] = element);\r\n    };\r\n    /**\r\n     * Removes elements from the end of the collection\r\n     */\r\n    Collection.prototype.pop = function () {\r\n        this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\r\n        return this._internalArray[this._endPointer];\r\n    };\r\n    /**\r\n     * Returns the count of the collection\r\n     */\r\n    Collection.prototype.count = function () {\r\n        return this._endPointer;\r\n    };\r\n    /**\r\n     * Empties the collection\r\n     */\r\n    Collection.prototype.clear = function () {\r\n        this._endPointer = 0;\r\n    };\r\n    /**\r\n     * Returns the size of the internal backing array\r\n     */\r\n    Collection.prototype.internalSize = function () {\r\n        return this._internalArray.length;\r\n    };\r\n    /**\r\n     * Returns an element at a specific index\r\n     * @param index  Index of element to retrieve\r\n     */\r\n    Collection.prototype.elementAt = function (index) {\r\n        if (index >= this.count()) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid index ' + index);\r\n        }\r\n        return this._internalArray[index];\r\n    };\r\n    /**\r\n     * Inserts an element at a specific index\r\n     * @param index  Index to insert the element\r\n     * @param value  Element to insert\r\n     */\r\n    Collection.prototype.insert = function (index, value) {\r\n        if (index >= this.count()) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[index] = value);\r\n    };\r\n    /**\r\n     * Removes an element at a specific index\r\n     * @param index  Index of element to remove\r\n     */\r\n    Collection.prototype.remove = function (index) {\r\n        var count = this.count();\r\n        if (count === 0) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid parameter ' + index);\r\n        }\r\n        // O(n) Shift\r\n        var removed = this._internalArray[index];\r\n        for (var i = index; i < count; i++) {\r\n            this._internalArray[i] = this._internalArray[i + 1];\r\n        }\r\n        this._endPointer--;\r\n        return removed;\r\n    };\r\n    /**\r\n     * Removes an element by reference\r\n     * @param element  Element to retrieve\r\n     */\r\n    Collection.prototype.removeElement = function (element) {\r\n        var index = this._internalArray.indexOf(element);\r\n        this.remove(index);\r\n    };\r\n    /**\r\n     * Returns a array representing the collection\r\n     */\r\n    Collection.prototype.toArray = function () {\r\n        return this._internalArray.slice(0, this._endPointer);\r\n    };\r\n    /**\r\n     * Iterate over every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\r\n     */\r\n    Collection.prototype.forEach = function (func) {\r\n        var i = 0, count = this.count();\r\n        for (i; i < count; i++) {\r\n            func.call(this, this._internalArray[i], i);\r\n        }\r\n    };\r\n    /**\r\n     * Mutate every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\r\n     * the collection\r\n     */\r\n    Collection.prototype.map = function (func) {\r\n        var count = this.count();\r\n        for (var i = 0; i < count; i++) {\r\n            this._internalArray[i] = func.call(this, this._internalArray[i], i);\r\n        }\r\n    };\r\n    /**\r\n     * Default collection size\r\n     */\r\n    Collection.DefaultSize = 200;\r\n    return Collection;\r\n}());\r\nexport { Collection };\r\n//# sourceMappingURL=Util.js.map","/**\r\n * Provides standard colors (e.g. [[Color.Black]])\r\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\r\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\r\n *\r\n * [[include:Colors.md]]\r\n */\r\nvar Color = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    function Color(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a != null ? a : 1;\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    Color.fromRGB = function (r, g, b, a) {\r\n        return new Color(r, g, b, a);\r\n    };\r\n    /**\r\n     * Creates a new inscance of Color from a hex string\r\n     *\r\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\r\n     */\r\n    Color.fromHex = function (hex) {\r\n        var hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\r\n        var match = null;\r\n        if ((match = hex.match(hexRegEx))) {\r\n            var r = parseInt(match[1], 16);\r\n            var g = parseInt(match[2], 16);\r\n            var b = parseInt(match[3], 16);\r\n            var a = 1;\r\n            if (match[4]) {\r\n                a = parseInt(match[4], 16) / 255;\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid hex string: ' + hex);\r\n        }\r\n    };\r\n    /**\r\n     * Creats a new instance of Color from hsla values\r\n     *\r\n     * @param h  Hue is represented [0-1]\r\n     * @param s  Saturation is represented [0-1]\r\n     * @param l  Luminance is represented [0-1]\r\n     * @param a  Alpha is represented [0-1]\r\n     */\r\n    Color.fromHSL = function (h, s, l, a) {\r\n        if (a === void 0) { a = 1.0; }\r\n        var temp = new HSLColor(h, s, l, a);\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Lightens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to lighten by [0-1]\r\n     */\r\n    Color.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l += temp.l * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Darkens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to darken by [0-1]\r\n     */\r\n    Color.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l -= temp.l * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Saturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to saturate by [0-1]\r\n     */\r\n    Color.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s += temp.s * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Desaturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to desaturate by [0-1]\r\n     */\r\n    Color.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s -= temp.s * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Multiplies a color by another, results in a darker color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.mulitiply = function (color) {\r\n        var newR = (((color.r / 255) * this.r) / 255) * 255;\r\n        var newG = (((color.g / 255) * this.g) / 255) * 255;\r\n        var newB = (((color.b / 255) * this.b) / 255) * 255;\r\n        var newA = color.a * this.a;\r\n        return new Color(newR, newG, newB, newA);\r\n    };\r\n    /**\r\n     * Screens a color by another, results in a lighter color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.screen = function (color) {\r\n        var color1 = color.invert();\r\n        var color2 = color.invert();\r\n        return color1.mulitiply(color2).invert();\r\n    };\r\n    /**\r\n     * Inverts the current color\r\n     */\r\n    Color.prototype.invert = function () {\r\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\r\n    };\r\n    /**\r\n     * Averages the current color with another\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.average = function (color) {\r\n        var newR = (color.r + this.r) / 2;\r\n        var newG = (color.g + this.g) / 2;\r\n        var newB = (color.b + this.b) / 2;\r\n        var newA = (color.a + this.a) / 2;\r\n        return new Color(newR, newG, newB, newA);\r\n    };\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     *\r\n     * @param format Color representation, accepts: rgb, hsl, or hex\r\n     */\r\n    Color.prototype.toString = function (format) {\r\n        if (format === void 0) { format = 'rgb'; }\r\n        switch (format) {\r\n            case 'rgb':\r\n                return this.toRGBA();\r\n            case 'hsl':\r\n                return this.toHSLA();\r\n            case 'hex':\r\n                return this.toHex();\r\n            default:\r\n                throw new Error('Invalid Color format');\r\n        }\r\n    };\r\n    /**\r\n     * Returns Hex Value of a color component\r\n     * @param c color component\r\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n     */\r\n    Color.prototype._componentToHex = function (c) {\r\n        var hex = c.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    };\r\n    /**\r\n     * Return Hex representation of a color.\r\n     */\r\n    Color.prototype.toHex = function () {\r\n        return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\r\n    };\r\n    /**\r\n     * Return RGBA representation of a color.\r\n     */\r\n    Color.prototype.toRGBA = function () {\r\n        var result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\r\n        if (this.a !== undefined || this.a !== null) {\r\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\r\n        }\r\n        return 'rgb(' + result + ')';\r\n    };\r\n    /**\r\n     * Return HSLA representation of a color.\r\n     */\r\n    Color.prototype.toHSLA = function () {\r\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\r\n    };\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     */\r\n    Color.prototype.fillStyle = function () {\r\n        return this.toString();\r\n    };\r\n    /**\r\n     * Returns a clone of the current color.\r\n     */\r\n    Color.prototype.clone = function () {\r\n        return new Color(this.r, this.g, this.b, this.a);\r\n    };\r\n    /**\r\n     * Black (#000000)\r\n     */\r\n    Color.Black = Color.fromHex('#000000');\r\n    /**\r\n     * White (#FFFFFF)\r\n     */\r\n    Color.White = Color.fromHex('#FFFFFF');\r\n    /**\r\n     * Gray (#808080)\r\n     */\r\n    Color.Gray = Color.fromHex('#808080');\r\n    /**\r\n     * Light gray (#D3D3D3)\r\n     */\r\n    Color.LightGray = Color.fromHex('#D3D3D3');\r\n    /**\r\n     * Dark gray (#A9A9A9)\r\n     */\r\n    Color.DarkGray = Color.fromHex('#A9A9A9');\r\n    /**\r\n     * Yellow (#FFFF00)\r\n     */\r\n    Color.Yellow = Color.fromHex('#FFFF00');\r\n    /**\r\n     * Orange (#FFA500)\r\n     */\r\n    Color.Orange = Color.fromHex('#FFA500');\r\n    /**\r\n     * Red (#FF0000)\r\n     */\r\n    Color.Red = Color.fromHex('#FF0000');\r\n    /**\r\n     * Vermillion (#FF5B31)\r\n     */\r\n    Color.Vermillion = Color.fromHex('#FF5B31');\r\n    /**\r\n     * Rose (#FF007F)\r\n     */\r\n    Color.Rose = Color.fromHex('#FF007F');\r\n    /**\r\n     * Magenta (#FF00FF)\r\n     */\r\n    Color.Magenta = Color.fromHex('#FF00FF');\r\n    /**\r\n     * Violet (#7F00FF)\r\n     */\r\n    Color.Violet = Color.fromHex('#7F00FF');\r\n    /**\r\n     * Blue (#0000FF)\r\n     */\r\n    Color.Blue = Color.fromHex('#0000FF');\r\n    /**\r\n     * Azure (#007FFF)\r\n     */\r\n    Color.Azure = Color.fromHex('#007FFF');\r\n    /**\r\n     * Cyan (#00FFFF)\r\n     */\r\n    Color.Cyan = Color.fromHex('#00FFFF');\r\n    /**\r\n     * Viridian (#59978F)\r\n     */\r\n    Color.Viridian = Color.fromHex('#59978F');\r\n    /**\r\n     * Green (#00FF00)\r\n     */\r\n    Color.Green = Color.fromHex('#00FF00');\r\n    /**\r\n     * Chartreuse (#7FFF00)\r\n     */\r\n    Color.Chartreuse = Color.fromHex('#7FFF00');\r\n    /**\r\n     * Transparent (#FFFFFF00)\r\n     */\r\n    Color.Transparent = Color.fromHex('#FFFFFF00');\r\n    return Color;\r\n}());\r\nexport { Color };\r\n/**\r\n * Internal HSL Color representation\r\n *\r\n * http://en.wikipedia.org/wiki/HSL_and_HSV\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n */\r\nvar HSLColor = /** @class */ (function () {\r\n    function HSLColor(h, s, l, a) {\r\n        this.h = h;\r\n        this.s = s;\r\n        this.l = l;\r\n        this.a = a;\r\n    }\r\n    HSLColor.hue2rgb = function (p, q, t) {\r\n        if (t < 0) {\r\n            t += 1;\r\n        }\r\n        if (t > 1) {\r\n            t -= 1;\r\n        }\r\n        if (t < 1 / 6) {\r\n            return p + (q - p) * 6 * t;\r\n        }\r\n        if (t < 1 / 2) {\r\n            return q;\r\n        }\r\n        if (t < 2 / 3) {\r\n            return p + (q - p) * (2 / 3 - t) * 6;\r\n        }\r\n        return p;\r\n    };\r\n    HSLColor.fromRGBA = function (r, g, b, a) {\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return new HSLColor(h, s, l, a);\r\n    };\r\n    HSLColor.prototype.toRGBA = function () {\r\n        var r, g, b;\r\n        if (this.s === 0) {\r\n            r = g = b = this.l; // achromatic\r\n        }\r\n        else {\r\n            var q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\r\n            var p = 2 * this.l - q;\r\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\r\n            g = HSLColor.hue2rgb(p, q, this.h);\r\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\r\n        }\r\n        return new Color(r * 255, g * 255, b * 255, this.a);\r\n    };\r\n    HSLColor.prototype.toString = function () {\r\n        var h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\r\n        return \"hsla(\" + h + \", \" + s + \", \" + l + \", \" + a + \")\";\r\n    };\r\n    return HSLColor;\r\n}());\r\n//# sourceMappingURL=Color.js.map","/**\r\n * An enum that describes the sides of an Actor for collision\r\n */\r\nexport var Side;\r\n(function (Side) {\r\n    Side[Side[\"None\"] = 0] = \"None\";\r\n    Side[Side[\"Top\"] = 1] = \"Top\";\r\n    Side[Side[\"Bottom\"] = 2] = \"Bottom\";\r\n    Side[Side[\"Left\"] = 3] = \"Left\";\r\n    Side[Side[\"Right\"] = 4] = \"Right\";\r\n})(Side || (Side = {}));\r\n//# sourceMappingURL=Side.js.map","import { Color } from '../Drawing/Color';\r\n/**\r\n * Draw a line on canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param color The color of the line\r\n * @param x1 The start x coordinate\r\n * @param y1 The start y coordinate\r\n * @param x2 The ending x coordinate\r\n * @param y2 The ending y coordinate\r\n * @param thickness The line thickness\r\n * @param cap The [[LineCapStyle]] (butt, round, or square)\r\n */\r\n/* istanbul ignore next */\r\nexport function line(ctx, color, x1, y1, x2, y2, thickness, cap) {\r\n    if (color === void 0) { color = Color.Red.clone(); }\r\n    if (thickness === void 0) { thickness = 1; }\r\n    if (cap === void 0) { cap = 'butt'; }\r\n    ctx.beginPath();\r\n    ctx.lineWidth = thickness;\r\n    ctx.lineCap = cap;\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a point onto the canvas.\r\n */\r\n/* istanbul ignore next */\r\nexport function point(ctx, color, point) {\r\n    if (color === void 0) { color = Color.Red.clone(); }\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a line onto the canvas starting a origin point.\r\n */\r\n/* istanbul ignore next */\r\nexport function vector(ctx, color, origin, vector, scale) {\r\n    if (scale === void 0) { scale = 1.0; }\r\n    var c = color ? color.toString() : 'blue';\r\n    var v = vector.scale(scale);\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = c;\r\n    ctx.moveTo(origin.x, origin.y);\r\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw a round rectangle on a canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param x The top-left x coordinate\r\n * @param y The top-left y coordinate\r\n * @param width The width of the rectangle\r\n * @param height The height of the rectangle\r\n * @param radius The border radius of the rectangle\r\n * @param fill The [[Color]] to fill rectangle with\r\n * @param stroke The [[Color]] to stroke rectangle with\r\n */\r\nexport function roundRect(ctx, x, y, width, height, radius, stroke, fill) {\r\n    if (radius === void 0) { radius = 5; }\r\n    if (stroke === void 0) { stroke = Color.White; }\r\n    if (fill === void 0) { fill = null; }\r\n    var br;\r\n    if (typeof radius === 'number') {\r\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\r\n    }\r\n    else {\r\n        var defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\r\n        for (var prop in defaultRadius) {\r\n            if (defaultRadius.hasOwnProperty(prop)) {\r\n                var side = prop;\r\n                br[side] = radius[side] || defaultRadius[side];\r\n            }\r\n        }\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + br.tl, y);\r\n    ctx.lineTo(x + width - br.tr, y);\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\r\n    ctx.lineTo(x + width, y + height - br.br);\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\r\n    ctx.lineTo(x + br.bl, y + height);\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\r\n    ctx.lineTo(x, y + br.tl);\r\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\nexport function circle(ctx, x, y, radius, stroke, fill) {\r\n    if (stroke === void 0) { stroke = Color.White; }\r\n    if (fill === void 0) { fill = null; }\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n//# sourceMappingURL=DrawUtil.js.map","/**\r\n * Pseudo-Random Utility\r\n *\r\n * A pseudo-random utility to add seeded random support for help in\r\n * generating things like terrain or reproducible randomness. Uses the\r\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\r\n *\r\n * [[include:Random.md]]\r\n */\r\n/**\r\n * 32-bit mask\r\n */\r\nvar BITMASK32 = 0xffffffff;\r\n/**\r\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\r\n * of numbers each time it is called.\r\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\r\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\r\n *\r\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\r\n */\r\nvar Random = /** @class */ (function () {\r\n    /**\r\n     * If no seed is specified, the Date.now() is used\r\n     */\r\n    function Random(seed) {\r\n        this.seed = seed;\r\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\r\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\r\n        this._upperMask = 0x80000000; // 34 high bits\r\n        // Word size, 64 bits\r\n        this._w = 32;\r\n        // Degree of recurrance\r\n        this._n = 624;\r\n        // Middle word, an offset used in the recurrance defining the series x, 1<=m<n\r\n        this._m = 397;\r\n        // coefficients of teh rational normal form twist matrix\r\n        this._a = 0x9908b0df;\r\n        // tempering bit shifts and masks\r\n        this._u = 11;\r\n        this._s = 7;\r\n        this._b = 0x9d2c5680;\r\n        this._t = 15;\r\n        this._c = 0xefc60000;\r\n        this._l = 18;\r\n        this._f = 1812433253;\r\n        this._mt = new Array(this._n);\r\n        // need to mask to support higher bit machines\r\n        this._mt[0] = (seed || Date.now()) >>> 0;\r\n        for (var i = 1; i < this._n; i++) {\r\n            var s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\r\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\r\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\r\n        }\r\n        this._index = this._n;\r\n    }\r\n    /**\r\n     * Apply the twist\r\n     */\r\n    Random.prototype._twist = function () {\r\n        var mag01 = [0x0, this._a];\r\n        var y = 0;\r\n        for (var i = 0; i < this._n - this._m; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        for (; i < this._n - 1; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\r\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        this._index = 0;\r\n    };\r\n    /**\r\n     * Return next 32 bit integer number in sequence\r\n     */\r\n    Random.prototype.nextInt = function () {\r\n        if (this._index >= this._n) {\r\n            this._twist();\r\n        }\r\n        var y = this._mt[this._index++];\r\n        y ^= y >>> this._u;\r\n        y ^= (y << this._s) & this._b;\r\n        y ^= (y << this._t) & this._c;\r\n        y ^= y >>> this._l;\r\n        return y >>> 0;\r\n    };\r\n    /**\r\n     * Return a random floating point number between [0, 1)\r\n     */\r\n    Random.prototype.next = function () {\r\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\r\n    };\r\n    /**\r\n     * Return a random floating point in range [min, max) min is included, max is not included\r\n     */\r\n    Random.prototype.floating = function (min, max) {\r\n        return (max - min) * this.next() + min;\r\n    };\r\n    /**\r\n     * Return a random integer in range [min, max] min is included, max is included.\r\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\r\n     */\r\n    Random.prototype.integer = function (min, max) {\r\n        return Math.floor((max - min + 1) * this.next() + min);\r\n    };\r\n    /**\r\n     * Returns true or false randomly with 50/50 odds by default.\r\n     * By default the likelihood of returning a true is .5 (50%).\r\n     * @param likelihood takes values between [0, 1]\r\n     */\r\n    Random.prototype.bool = function (likelihood) {\r\n        if (likelihood === void 0) { likelihood = 0.5; }\r\n        return this.next() <= likelihood;\r\n    };\r\n    /**\r\n     * Returns one element from an array at random\r\n     */\r\n    Random.prototype.pickOne = function (array) {\r\n        return array[this.integer(0, array.length - 1)];\r\n    };\r\n    /**\r\n     * Returns a new array random picking elements from the original\r\n     * @param array Original array to pick from\r\n     * @param numPicks can be any positive number\r\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\r\n     * just that it is possible)\r\n     */\r\n    Random.prototype.pickSet = function (array, numPicks, allowDuplicates) {\r\n        if (allowDuplicates === void 0) { allowDuplicates = false; }\r\n        if (allowDuplicates) {\r\n            return this._pickSetWithDuplicates(array, numPicks);\r\n        }\r\n        else {\r\n            return this._pickSetWithoutDuplicates(array, numPicks);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new array randomly picking elements in the original (not reused)\r\n     * @param numPicks must be less than or equal to the number of elements in the array.\r\n     */\r\n    Random.prototype._pickSetWithoutDuplicates = function (array, numPicks) {\r\n        if (numPicks > array.length || numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\r\n        }\r\n        if (numPicks === array.length) {\r\n            return array;\r\n        }\r\n        var result = new Array(numPicks);\r\n        var currentPick = 0;\r\n        var tempArray = array.slice(0);\r\n        while (currentPick < numPicks) {\r\n            var index = this.integer(0, tempArray.length - 1);\r\n            result[currentPick++] = tempArray[index];\r\n            tempArray.splice(index, 1);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns a new array random picking elements from the original allowing duplicates\r\n     * @param numPicks can be any positive number\r\n     */\r\n    Random.prototype._pickSetWithDuplicates = function (array, numPicks) {\r\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\r\n        if (numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\r\n        }\r\n        var result = new Array(numPicks);\r\n        for (var i = 0; i < numPicks; i++) {\r\n            result[i] = this.pickOne(array);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\r\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\r\n     */\r\n    Random.prototype.shuffle = function (array) {\r\n        var tempArray = array.slice(0);\r\n        var swap = null;\r\n        for (var i = 0; i < tempArray.length - 2; i++) {\r\n            var randomIndex = this.integer(i, tempArray.length - 1);\r\n            swap = tempArray[i];\r\n            tempArray[i] = tempArray[randomIndex];\r\n            tempArray[randomIndex] = swap;\r\n        }\r\n        return tempArray;\r\n    };\r\n    /**\r\n     * Generate a list of random integer numbers\r\n     * @param length the length of the final array\r\n     * @param min the minimum integer number to generate inclusive\r\n     * @param max the maximum integer number to generate inclusive\r\n     */\r\n    Random.prototype.range = function (length, min, max) {\r\n        var result = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            result[i] = this.integer(min, max);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns the result of a d4 dice roll\r\n     */\r\n    Random.prototype.d4 = function () {\r\n        return this.integer(1, 4);\r\n    };\r\n    /**\r\n     * Returns the result of a d6 dice roll\r\n     */\r\n    Random.prototype.d6 = function () {\r\n        return this.integer(1, 6);\r\n    };\r\n    /**\r\n     * Returns the result of a d8 dice roll\r\n     */\r\n    Random.prototype.d8 = function () {\r\n        return this.integer(1, 8);\r\n    };\r\n    /**\r\n     * Returns the result of a d10 dice roll\r\n     */\r\n    Random.prototype.d10 = function () {\r\n        return this.integer(1, 10);\r\n    };\r\n    /**\r\n     * Returns the result of a d12 dice roll\r\n     */\r\n    Random.prototype.d12 = function () {\r\n        return this.integer(1, 12);\r\n    };\r\n    /**\r\n     * Returns the result of a d20 dice roll\r\n     */\r\n    Random.prototype.d20 = function () {\r\n        return this.integer(1, 20);\r\n    };\r\n    return Random;\r\n}());\r\nexport { Random };\r\n//# sourceMappingURL=Random.js.map","// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\r\n/**\r\n * Valid states for a promise to be in\r\n */\r\nexport var PromiseState;\r\n(function (PromiseState) {\r\n    PromiseState[PromiseState[\"Resolved\"] = 0] = \"Resolved\";\r\n    PromiseState[PromiseState[\"Rejected\"] = 1] = \"Rejected\";\r\n    PromiseState[PromiseState[\"Pending\"] = 2] = \"Pending\";\r\n})(PromiseState || (PromiseState = {}));\r\n/**\r\n * Promises are used to do asynchronous work and they are useful for\r\n * creating a chain of actions. In Excalibur they are used for loading,\r\n * sounds, animation, actions, and more.\r\n *\r\n * [[include:Promises.md]]\r\n */\r\nvar Promise = /** @class */ (function () {\r\n    function Promise() {\r\n        this._state = PromiseState.Pending;\r\n        this._successCallbacks = [];\r\n        this._rejectCallback = function () {\r\n            return;\r\n        };\r\n    }\r\n    /**\r\n     * Create and resolve a Promise with an optional value\r\n     * @param value  An optional value to wrap in a resolved promise\r\n     */\r\n    Promise.resolve = function (value) {\r\n        var promise = new Promise().resolve(value);\r\n        return promise;\r\n    };\r\n    /**\r\n     * Create and reject a Promise with an optional value\r\n     * @param value  An optional value to wrap in a rejected promise\r\n     */\r\n    Promise.reject = function (value) {\r\n        var promise = new Promise().reject(value);\r\n        return promise;\r\n    };\r\n    Promise.join = function () {\r\n        var promises = [];\r\n        if (arguments.length > 0 && !Array.isArray(arguments[0])) {\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                promises[_i - 0] = arguments[_i];\r\n            }\r\n        }\r\n        else if (arguments.length === 1 && Array.isArray(arguments[0])) {\r\n            promises = arguments[0];\r\n        }\r\n        var joinedPromise = new Promise();\r\n        if (!promises || !promises.length) {\r\n            return joinedPromise.resolve();\r\n        }\r\n        var total = promises.length;\r\n        var successes = 0;\r\n        var rejects = 0;\r\n        var errors = [];\r\n        promises.forEach(function (p) {\r\n            p.then(function () {\r\n                successes += 1;\r\n                if (successes === total) {\r\n                    joinedPromise.resolve();\r\n                }\r\n                else if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }, function () {\r\n                rejects += 1;\r\n                if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }).error(function (e) {\r\n                errors.push(e);\r\n                if (errors.length + successes + rejects === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            });\r\n        });\r\n        return joinedPromise;\r\n    };\r\n    /**\r\n     * Chain success and reject callbacks after the promise is resolved\r\n     * @param successCallback  Call on resolution of promise\r\n     * @param rejectCallback   Call on rejection of promise\r\n     */\r\n    Promise.prototype.then = function (successCallback, rejectCallback) {\r\n        if (successCallback) {\r\n            this._successCallbacks.push(successCallback);\r\n            // If the promise is already resovled call immediately\r\n            if (this.state() === PromiseState.Resolved) {\r\n                try {\r\n                    successCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        if (rejectCallback) {\r\n            this._rejectCallback = rejectCallback;\r\n            // If the promise is already rejected call immediately\r\n            if (this.state() === PromiseState.Rejected) {\r\n                try {\r\n                    rejectCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Add an error callback to the promise\r\n     * @param errorCallback  Call if there was an error in a callback\r\n     */\r\n    Promise.prototype.error = function (errorCallback) {\r\n        if (errorCallback) {\r\n            this._errorCallback = errorCallback;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Resolve the promise and pass an option value to the success callbacks\r\n     * @param value  Value to pass to the success callbacks\r\n     */\r\n    Promise.prototype.resolve = function (value) {\r\n        var _this = this;\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Resolved;\r\n                this._successCallbacks.forEach(function (cb) {\r\n                    cb.call(_this, _this._value);\r\n                });\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot resolve a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Reject the promise and pass an option value to the reject callbacks\r\n     * @param value  Value to pass to the reject callbacks\r\n     */\r\n    Promise.prototype.reject = function (value) {\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Rejected;\r\n                this._rejectCallback.call(this, this._value);\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot reject a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Inspect the current state of a promise\r\n     */\r\n    Promise.prototype.state = function () {\r\n        return this._state;\r\n    };\r\n    Promise.prototype._handleError = function (e) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback.call(this, e);\r\n        }\r\n        else {\r\n            // rethrow error\r\n            throw e;\r\n        }\r\n    };\r\n    return Promise;\r\n}());\r\nexport { Promise };\r\n//# sourceMappingURL=Promises.js.map","import { Vector } from './Algebra';\r\n/**\r\n * Possible collision resolution strategies\r\n *\r\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nexport var CollisionResolutionStrategy;\r\n(function (CollisionResolutionStrategy) {\r\n    CollisionResolutionStrategy[CollisionResolutionStrategy[\"Box\"] = 0] = \"Box\";\r\n    CollisionResolutionStrategy[CollisionResolutionStrategy[\"RigidBody\"] = 1] = \"RigidBody\";\r\n})(CollisionResolutionStrategy || (CollisionResolutionStrategy = {}));\r\n/**\r\n * Possible broadphase collision pair identification strategies\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\r\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n */\r\nexport var BroadphaseStrategy;\r\n(function (BroadphaseStrategy) {\r\n    BroadphaseStrategy[BroadphaseStrategy[\"Naive\"] = 0] = \"Naive\";\r\n    BroadphaseStrategy[BroadphaseStrategy[\"DynamicAABBTree\"] = 1] = \"DynamicAABBTree\";\r\n})(BroadphaseStrategy || (BroadphaseStrategy = {}));\r\n/**\r\n * Possible numerical integrators for position and velocity\r\n */\r\nexport var Integrator;\r\n(function (Integrator) {\r\n    Integrator[Integrator[\"Euler\"] = 0] = \"Euler\";\r\n})(Integrator || (Integrator = {}));\r\n/**\r\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\r\n *\r\n * [[include:Physics.md]]\r\n */\r\n/* istanbul ignore next */\r\nvar Physics = /** @class */ (function () {\r\n    function Physics() {\r\n    }\r\n    /**\r\n     * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\r\n     */\r\n    Physics.useBoxPhysics = function () {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n    };\r\n    /**\r\n     * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    Physics.useRigidBodyPhysics = function () {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\r\n    };\r\n    /**\r\n     * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\r\n     * Global acceleration won't effect [[Label|labels]], [[UIActor|ui actors]], or [[Trigger|triggers]] in Excalibur.\r\n     *\r\n     * This is a great way to globally simulate effects like gravity.\r\n     */\r\n    Physics.acc = new Vector(0, 0);\r\n    /**\r\n     * Globally switches all Excalibur physics behavior on or off.\r\n     */\r\n    Physics.enabled = true;\r\n    /**\r\n     * Gets or sets the number of collision passes for Excalibur to perform on physics bodies.\r\n     *\r\n     * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\r\n     *\r\n     * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\r\n     * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\r\n     *\r\n     * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the\r\n     * cost of performance.\r\n     *\r\n     * The default is set to 5 passes which is a good start.\r\n     */\r\n    Physics.collisionPasses = 5;\r\n    /**\r\n     * Gets or sets the broadphase pair identification strategy.\r\n     *\r\n     * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n     * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\r\n     * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n     */\r\n    Physics.broadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\r\n    /**\r\n     * Globally switches the debug information for the broadphase strategy\r\n     */\r\n    Physics.broadphaseDebug = false;\r\n    /**\r\n     * Show the normals as a result of collision on the screen.\r\n     */\r\n    Physics.showCollisionNormals = false;\r\n    /**\r\n     * Show the position, velocity, and acceleration as graphical vectors.\r\n     */\r\n    Physics.showMotionVectors = false;\r\n    /**\r\n     * Show the axis-aligned bounding boxes of the collision bodies on the screen.\r\n     */\r\n    Physics.showBounds = false;\r\n    /**\r\n     * Show the bounding collision area shapes\r\n     */\r\n    Physics.showArea = false;\r\n    /**\r\n     * Show points of collision interpreted by excalibur as a result of collision.\r\n     */\r\n    Physics.showContacts = false;\r\n    /**\r\n     * Show the surface normals of the collision areas.\r\n     */\r\n    Physics.showNormals = false;\r\n    /**\r\n     * Gets or sets the global collision resolution strategy (narrowphase).\r\n     *\r\n     * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n     *\r\n     * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n    /**\r\n     * The default mass to use if none is specified\r\n     */\r\n    Physics.defaultMass = 10;\r\n    /**\r\n     * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\r\n     */\r\n    Physics.integrator = Integrator.Euler;\r\n    /**\r\n     * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\r\n     * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\r\n     */\r\n    Physics.integrationSteps = 1;\r\n    /**\r\n     * Gets or sets whether rotation is allowed in a RigidBody collision resolution\r\n     */\r\n    Physics.allowRigidBodyRotation = true;\r\n    /**\r\n     * Small value to help collision passes settle themselves after the narrowphase.\r\n     */\r\n    Physics.collisionShift = 0.001;\r\n    /**\r\n     * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplyer);\r\n     */\r\n    Physics.dynamicTreeVelocityMultiplyer = 2;\r\n    /**\r\n     * Pad RigidBody BoundingBox by a constant amount\r\n     */\r\n    Physics.boundsPadding = 5;\r\n    /**\r\n     * Surface epsilon is used to help deal with surface penatration\r\n     */\r\n    Physics.surfaceEpsilon = 0.1;\r\n    /**\r\n     * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\r\n     * bodies from tunneling through one another.\r\n     */\r\n    Physics.checkForFastBodies = true;\r\n    /**\r\n     * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\r\n     * body is moving at least half of its minimum diminension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\r\n     * Excalibur will always perform the fast body raycast regardless of speed.\r\n     */\r\n    Physics.disableMinimumSpeedForFastBody = false;\r\n    return Physics;\r\n}());\r\nexport { Physics };\r\n//# sourceMappingURL=Physics.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\r\n * some events are unique to a type, others are not.\r\n *\r\n */\r\nvar GameEvent = /** @class */ (function () {\r\n    function GameEvent() {\r\n        /**\r\n         * determines, if event bubbles to the target's ancestors\r\n         */\r\n        this.bubbles = true;\r\n        /**\r\n         * Holds the whole path from the Root to the event target\r\n         */\r\n        this._path = [];\r\n        this._name = '';\r\n    }\r\n    Object.defineProperty(GameEvent.prototype, \"eventPath\", {\r\n        /**\r\n         * Returns Event path from root to active actor.\r\n         */\r\n        get: function () {\r\n            return this._path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameEvent.prototype, \"name\", {\r\n        /**\r\n         * Returns name of the event\r\n         */\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    GameEvent.prototype.stopPropagation = function () {\r\n        this.bubbles = false;\r\n    };\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    GameEvent.prototype.action = function () {\r\n        var actor = this.eventPath.pop();\r\n        if (actor) {\r\n            this._onActionStart(actor);\r\n            actor.eventDispatcher.emit(this._name, this);\r\n            this._onActionEnd(actor);\r\n        }\r\n    };\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    GameEvent.prototype.propagate = function () {\r\n        if (!this.eventPath.length) {\r\n            return;\r\n        }\r\n        this.action();\r\n        if (this.bubbles) {\r\n            this.propagate();\r\n        }\r\n    };\r\n    GameEvent.prototype.layPath = function (actor) {\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    GameEvent.prototype._onActionStart = function (_actor) {\r\n        // to be rewritten\r\n    };\r\n    GameEvent.prototype._onActionEnd = function (_actor) {\r\n        // to be rewritten\r\n    };\r\n    return GameEvent;\r\n}());\r\nexport { GameEvent };\r\n/**\r\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\r\n */\r\nvar KillEvent = /** @class */ (function (_super) {\r\n    __extends(KillEvent, _super);\r\n    function KillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return KillEvent;\r\n}(GameEvent));\r\nexport { KillEvent };\r\n/**\r\n * The 'prekill' event is emitted directly before an actor is killed.\r\n */\r\nvar PreKillEvent = /** @class */ (function (_super) {\r\n    __extends(PreKillEvent, _super);\r\n    function PreKillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreKillEvent;\r\n}(GameEvent));\r\nexport { PreKillEvent };\r\n/**\r\n * The 'postkill' event is emitted directly after the actor is killed.\r\n */\r\nvar PostKillEvent = /** @class */ (function (_super) {\r\n    __extends(PostKillEvent, _super);\r\n    function PostKillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostKillEvent;\r\n}(GameEvent));\r\nexport { PostKillEvent };\r\n/**\r\n * The 'start' event is emitted on engine when has started and is ready for interaction.\r\n */\r\nvar GameStartEvent = /** @class */ (function (_super) {\r\n    __extends(GameStartEvent, _super);\r\n    function GameStartEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GameStartEvent;\r\n}(GameEvent));\r\nexport { GameStartEvent };\r\n/**\r\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\r\n */\r\nvar GameStopEvent = /** @class */ (function (_super) {\r\n    __extends(GameStopEvent, _super);\r\n    function GameStopEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GameStopEvent;\r\n}(GameEvent));\r\nexport { GameStopEvent };\r\n/**\r\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nvar PreDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PreDrawEvent, _super);\r\n    function PreDrawEvent(ctx, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreDrawEvent;\r\n}(GameEvent));\r\nexport { PreDrawEvent };\r\n/**\r\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nvar PostDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PostDrawEvent, _super);\r\n    function PostDrawEvent(ctx, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostDrawEvent;\r\n}(GameEvent));\r\nexport { PostDrawEvent };\r\n/**\r\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\r\n */\r\nvar PreDebugDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PreDebugDrawEvent, _super);\r\n    function PreDebugDrawEvent(ctx, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreDebugDrawEvent;\r\n}(GameEvent));\r\nexport { PreDebugDrawEvent };\r\n/**\r\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\r\n */\r\nvar PostDebugDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PostDebugDrawEvent, _super);\r\n    function PostDebugDrawEvent(ctx, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostDebugDrawEvent;\r\n}(GameEvent));\r\nexport { PostDebugDrawEvent };\r\n/**\r\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\r\n */\r\nvar PreUpdateEvent = /** @class */ (function (_super) {\r\n    __extends(PreUpdateEvent, _super);\r\n    function PreUpdateEvent(engine, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreUpdateEvent;\r\n}(GameEvent));\r\nexport { PreUpdateEvent };\r\n/**\r\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\r\n */\r\nvar PostUpdateEvent = /** @class */ (function (_super) {\r\n    __extends(PostUpdateEvent, _super);\r\n    function PostUpdateEvent(engine, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostUpdateEvent;\r\n}(GameEvent));\r\nexport { PostUpdateEvent };\r\n/**\r\n * The 'preframe' event is emitted on the engine, before the frame begins.\r\n */\r\nvar PreFrameEvent = /** @class */ (function (_super) {\r\n    __extends(PreFrameEvent, _super);\r\n    function PreFrameEvent(engine, prevStats) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.prevStats = prevStats;\r\n        _this.target = engine;\r\n        return _this;\r\n    }\r\n    return PreFrameEvent;\r\n}(GameEvent));\r\nexport { PreFrameEvent };\r\n/**\r\n * The 'postframe' event is emitted on the engine, after a frame ends.\r\n */\r\nvar PostFrameEvent = /** @class */ (function (_super) {\r\n    __extends(PostFrameEvent, _super);\r\n    function PostFrameEvent(engine, stats) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.stats = stats;\r\n        _this.target = engine;\r\n        return _this;\r\n    }\r\n    return PostFrameEvent;\r\n}(GameEvent));\r\nexport { PostFrameEvent };\r\n/**\r\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\r\n */\r\nvar GamepadConnectEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadConnectEvent, _super);\r\n    function GamepadConnectEvent(index, gamepad) {\r\n        var _this = _super.call(this) || this;\r\n        _this.index = index;\r\n        _this.gamepad = gamepad;\r\n        _this.target = gamepad;\r\n        return _this;\r\n    }\r\n    return GamepadConnectEvent;\r\n}(GameEvent));\r\nexport { GamepadConnectEvent };\r\n/**\r\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\r\n */\r\nvar GamepadDisconnectEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadDisconnectEvent, _super);\r\n    function GamepadDisconnectEvent(index, gamepad) {\r\n        var _this = _super.call(this) || this;\r\n        _this.index = index;\r\n        _this.gamepad = gamepad;\r\n        _this.target = gamepad;\r\n        return _this;\r\n    }\r\n    return GamepadDisconnectEvent;\r\n}(GameEvent));\r\nexport { GamepadDisconnectEvent };\r\n/**\r\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nvar GamepadButtonEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadButtonEvent, _super);\r\n    /**\r\n     * @param button  The Gamepad button\r\n     * @param value   A numeric value between 0 and 1\r\n     */\r\n    function GamepadButtonEvent(button, value, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.button = button;\r\n        _this.value = value;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GamepadButtonEvent;\r\n}(GameEvent));\r\nexport { GamepadButtonEvent };\r\n/**\r\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nvar GamepadAxisEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadAxisEvent, _super);\r\n    /**\r\n     * @param axis  The Gamepad axis\r\n     * @param value A numeric value between -1 and 1\r\n     */\r\n    function GamepadAxisEvent(axis, value, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.axis = axis;\r\n        _this.value = value;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GamepadAxisEvent;\r\n}(GameEvent));\r\nexport { GamepadAxisEvent };\r\n/**\r\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nvar SubscribeEvent = /** @class */ (function (_super) {\r\n    __extends(SubscribeEvent, _super);\r\n    function SubscribeEvent(topic, handler) {\r\n        var _this = _super.call(this) || this;\r\n        _this.topic = topic;\r\n        _this.handler = handler;\r\n        return _this;\r\n    }\r\n    return SubscribeEvent;\r\n}(GameEvent));\r\nexport { SubscribeEvent };\r\n/**\r\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nvar UnsubscribeEvent = /** @class */ (function (_super) {\r\n    __extends(UnsubscribeEvent, _super);\r\n    function UnsubscribeEvent(topic, handler) {\r\n        var _this = _super.call(this) || this;\r\n        _this.topic = topic;\r\n        _this.handler = handler;\r\n        return _this;\r\n    }\r\n    return UnsubscribeEvent;\r\n}(GameEvent));\r\nexport { UnsubscribeEvent };\r\n/**\r\n * Event received by the [[Engine]] when the browser window is visible on a screen.\r\n */\r\nvar VisibleEvent = /** @class */ (function (_super) {\r\n    __extends(VisibleEvent, _super);\r\n    function VisibleEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return VisibleEvent;\r\n}(GameEvent));\r\nexport { VisibleEvent };\r\n/**\r\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\r\n */\r\nvar HiddenEvent = /** @class */ (function (_super) {\r\n    __extends(HiddenEvent, _super);\r\n    function HiddenEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return HiddenEvent;\r\n}(GameEvent));\r\nexport { HiddenEvent };\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\r\n */\r\nvar PreCollisionEvent = /** @class */ (function (_super) {\r\n    __extends(PreCollisionEvent, _super);\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that will collided with the current actor\r\n     * @param side          The side that will be collided with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    function PreCollisionEvent(actor, other, side, intersection) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.side = side;\r\n        _this.intersection = intersection;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return PreCollisionEvent;\r\n}(GameEvent));\r\nexport { PreCollisionEvent };\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\r\n */\r\nvar PostCollisionEvent = /** @class */ (function (_super) {\r\n    __extends(PostCollisionEvent, _super);\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that did collide with the current actor\r\n     * @param side          The side that did collide with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    function PostCollisionEvent(actor, other, side, intersection) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.side = side;\r\n        _this.intersection = intersection;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return PostCollisionEvent;\r\n}(GameEvent));\r\nexport { PostCollisionEvent };\r\n/**\r\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\r\n */\r\nvar CollisionStartEvent = /** @class */ (function (_super) {\r\n    __extends(CollisionStartEvent, _super);\r\n    /**\r\n     *\r\n     */\r\n    function CollisionStartEvent(actor, other, pair) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.pair = pair;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return CollisionStartEvent;\r\n}(GameEvent));\r\nexport { CollisionStartEvent };\r\n/**\r\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\r\n */\r\nvar CollisionEndEvent = /** @class */ (function (_super) {\r\n    __extends(CollisionEndEvent, _super);\r\n    /**\r\n     *\r\n     */\r\n    function CollisionEndEvent(actor, other) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return CollisionEndEvent;\r\n}(GameEvent));\r\nexport { CollisionEndEvent };\r\n/**\r\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\r\n */\r\nvar InitializeEvent = /** @class */ (function (_super) {\r\n    __extends(InitializeEvent, _super);\r\n    /**\r\n     * @param engine  The reference to the current engine\r\n     */\r\n    function InitializeEvent(engine, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return InitializeEvent;\r\n}(GameEvent));\r\nexport { InitializeEvent };\r\n/**\r\n * Event thrown on a [[Scene]] on activation\r\n */\r\nvar ActivateEvent = /** @class */ (function (_super) {\r\n    __extends(ActivateEvent, _super);\r\n    /**\r\n     * @param oldScene  The reference to the old scene\r\n     */\r\n    function ActivateEvent(oldScene, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.oldScene = oldScene;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return ActivateEvent;\r\n}(GameEvent));\r\nexport { ActivateEvent };\r\n/**\r\n * Event thrown on a [[Scene]] on deactivation\r\n */\r\nvar DeactivateEvent = /** @class */ (function (_super) {\r\n    __extends(DeactivateEvent, _super);\r\n    /**\r\n     * @param newScene  The reference to the new scene\r\n     */\r\n    function DeactivateEvent(newScene, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.newScene = newScene;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return DeactivateEvent;\r\n}(GameEvent));\r\nexport { DeactivateEvent };\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nvar ExitViewPortEvent = /** @class */ (function (_super) {\r\n    __extends(ExitViewPortEvent, _super);\r\n    function ExitViewPortEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return ExitViewPortEvent;\r\n}(GameEvent));\r\nexport { ExitViewPortEvent };\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nvar EnterViewPortEvent = /** @class */ (function (_super) {\r\n    __extends(EnterViewPortEvent, _super);\r\n    function EnterViewPortEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return EnterViewPortEvent;\r\n}(GameEvent));\r\nexport { EnterViewPortEvent };\r\nvar EnterTriggerEvent = /** @class */ (function (_super) {\r\n    __extends(EnterTriggerEvent, _super);\r\n    function EnterTriggerEvent(target, actor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this.actor = actor;\r\n        return _this;\r\n    }\r\n    return EnterTriggerEvent;\r\n}(GameEvent));\r\nexport { EnterTriggerEvent };\r\nvar ExitTriggerEvent = /** @class */ (function (_super) {\r\n    __extends(ExitTriggerEvent, _super);\r\n    function ExitTriggerEvent(target, actor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this.actor = actor;\r\n        return _this;\r\n    }\r\n    return ExitTriggerEvent;\r\n}(GameEvent));\r\nexport { ExitTriggerEvent };\r\n//# sourceMappingURL=Events.js.map","/**\r\n * Logging level that Excalibur will tag\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\r\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\r\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * Static singleton that represents the logging facility for Excalibur.\r\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\r\n * Derive from [[IAppender]] to create your own logging appenders.\r\n *\r\n * [[include:Logger.md]]\r\n */\r\nvar Logger = /** @class */ (function () {\r\n    function Logger() {\r\n        this._appenders = [];\r\n        /**\r\n         * Gets or sets the default logging level. Excalibur will only log\r\n         * messages if equal to or above this level. Default: [[LogLevel.Info]]\r\n         */\r\n        this.defaultLevel = LogLevel.Info;\r\n        if (Logger._instance) {\r\n            throw new Error('Logger is a singleton');\r\n        }\r\n        Logger._instance = this;\r\n        // Default console appender\r\n        Logger._instance.addAppender(new ConsoleAppender());\r\n        return Logger._instance;\r\n    }\r\n    /**\r\n     * Gets the current static instance of Logger\r\n     */\r\n    Logger.getInstance = function () {\r\n        if (Logger._instance == null) {\r\n            Logger._instance = new Logger();\r\n        }\r\n        return Logger._instance;\r\n    };\r\n    /**\r\n     * Adds a new [[IAppender]] to the list of appenders to write to\r\n     */\r\n    Logger.prototype.addAppender = function (appender) {\r\n        this._appenders.push(appender);\r\n    };\r\n    /**\r\n     * Clears all appenders from the logger\r\n     */\r\n    Logger.prototype.clearAppenders = function () {\r\n        this._appenders.length = 0;\r\n    };\r\n    /**\r\n     * Logs a message at a given LogLevel\r\n     * @param level  The LogLevel`to log the message at\r\n     * @param args   An array of arguments to write to an appender\r\n     */\r\n    Logger.prototype._log = function (level, args) {\r\n        if (level == null) {\r\n            level = this.defaultLevel;\r\n        }\r\n        var i = 0, len = this._appenders.length;\r\n        for (i; i < len; i++) {\r\n            if (level >= this.defaultLevel) {\r\n                this._appenders[i].log(level, args);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Debug]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Debug, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Info]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.info = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Info, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Warn]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.warn = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Warn, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Error]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.error = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Error, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Fatal]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.fatal = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Fatal, args);\r\n    };\r\n    Logger._instance = null;\r\n    return Logger;\r\n}());\r\nexport { Logger };\r\n/**\r\n * Console appender for browsers (i.e. `console.log`)\r\n */\r\nvar ConsoleAppender = /** @class */ (function () {\r\n    function ConsoleAppender() {\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    ConsoleAppender.prototype.log = function (level, args) {\r\n        // Check for console support\r\n        if (!console && !console.log && console.warn && console.error) {\r\n            // todo maybe do something better than nothing\r\n            return;\r\n        }\r\n        // Create a new console args array\r\n        var consoleArgs = [];\r\n        consoleArgs.unshift.apply(consoleArgs, args);\r\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\r\n        if (level < LogLevel.Warn) {\r\n            // Call .log for Debug/Info\r\n            if (console.log.apply) {\r\n                // this is required on some older browsers that don't support apply on console.log :(\r\n                console.log.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.log(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else if (level < LogLevel.Error) {\r\n            // Call .warn for Warn\r\n            if (console.warn.apply) {\r\n                console.warn.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.warn(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else {\r\n            // Call .error for Error/Fatal\r\n            if (console.error.apply) {\r\n                console.error.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.error(consoleArgs.join(' '));\r\n            }\r\n        }\r\n    };\r\n    return ConsoleAppender;\r\n}());\r\nexport { ConsoleAppender };\r\n/**\r\n * On-screen (canvas) appender\r\n */\r\nvar ScreenAppender = /** @class */ (function () {\r\n    /**\r\n     * @param width   Width of the screen appender in pixels\r\n     * @param height  Height of the screen appender in pixels\r\n     */\r\n    function ScreenAppender(width, height) {\r\n        // @todo Clean this up\r\n        this._messages = [];\r\n        this._canvas = document.createElement('canvas');\r\n        this._canvas.width = width || window.innerWidth;\r\n        this._canvas.height = height || window.innerHeight;\r\n        this._canvas.style.position = 'absolute';\r\n        this._ctx = this._canvas.getContext('2d');\r\n        document.body.appendChild(this._canvas);\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    ScreenAppender.prototype.log = function (level, args) {\r\n        var message = args.join(',');\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\r\n        var pos = 10;\r\n        var opacity = 1.0;\r\n        for (var i = 0; i < this._messages.length; i++) {\r\n            this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\r\n            this._ctx.fillText(this._messages[i], 200, pos);\r\n            pos += 10;\r\n            opacity = opacity > 0 ? opacity - 0.05 : 0;\r\n        }\r\n    };\r\n    return ScreenAppender;\r\n}());\r\nexport { ScreenAppender };\r\n//# sourceMappingURL=Log.js.map","import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\r\n/**\r\n * Excalibur's internal event dispatcher implementation.\r\n * Callbacks are fired immediately after an event is published.\r\n * Typically you will use [[Class.eventDispatcher]] since most classes in\r\n * Excalibur inherit from [[Class]]. You will rarely create an `EventDispatcher`\r\n * yourself.\r\n *\r\n * [[include:Events.md]]\r\n */\r\nvar EventDispatcher = /** @class */ (function () {\r\n    /**\r\n     * @param target  The object that will be the recipient of events from this event dispatcher\r\n     */\r\n    function EventDispatcher(target) {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n        this._target = target;\r\n    }\r\n    /**\r\n     * Emits an event for target\r\n     * @param eventName  The name of the event to publish\r\n     * @param event      Optionally pass an event data object to the handler\r\n     */\r\n    EventDispatcher.prototype.emit = function (eventName, event) {\r\n        if (!eventName) {\r\n            // key not mapped\r\n            return;\r\n        }\r\n        eventName = eventName.toLowerCase();\r\n        var target = this._target;\r\n        if (!event) {\r\n            event = new GameEvent();\r\n        }\r\n        event.target = target;\r\n        var i, len;\r\n        if (this._handlers[eventName]) {\r\n            i = 0;\r\n            len = this._handlers[eventName].length;\r\n            for (i; i < len; i++) {\r\n                this._handlers[eventName][i].call(target, event);\r\n            }\r\n        }\r\n        i = 0;\r\n        len = this._wiredEventDispatchers.length;\r\n        for (i; i < len; i++) {\r\n            this._wiredEventDispatchers[i].emit(eventName, event);\r\n        }\r\n    };\r\n    /**\r\n     * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\r\n     * @param eventName  The name of the event to subscribe to\r\n     * @param handler    The handler callback to fire on this event\r\n     */\r\n    EventDispatcher.prototype.on = function (eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        if (!this._handlers[eventName]) {\r\n            this._handlers[eventName] = [];\r\n        }\r\n        this._handlers[eventName].push(handler);\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('subscribe', new SubscribeEvent(eventName, handler));\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribe an event handler(s) from an event. If a specific handler\r\n     * is specified for an event, only that handler will be unsubscribed.\r\n     * Otherwise all handlers will be unsubscribed for that event.\r\n     *\r\n     * @param eventName  The name of the event to unsubscribe\r\n     * @param handler    Optionally the specific handler to unsubscribe\r\n     *\r\n     */\r\n    EventDispatcher.prototype.off = function (eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        var eventHandlers = this._handlers[eventName];\r\n        if (eventHandlers) {\r\n            // if no explicit handler is give with the event name clear all handlers\r\n            if (!handler) {\r\n                this._handlers[eventName].length = 0;\r\n            }\r\n            else {\r\n                var index = eventHandlers.indexOf(handler);\r\n                this._handlers[eventName].splice(index, 1);\r\n            }\r\n        }\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\r\n        }\r\n    };\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    EventDispatcher.prototype.once = function (eventName, handler) {\r\n        var _this = this;\r\n        var metaHandler = function (event) {\r\n            var ev = event || new GameEvent();\r\n            ev.target = ev.target || _this._target;\r\n            _this.off(eventName, handler);\r\n            handler.call(ev.target, ev);\r\n        };\r\n        this.on(eventName, metaHandler);\r\n    };\r\n    /**\r\n     * Wires this event dispatcher to also recieve events from another\r\n     */\r\n    EventDispatcher.prototype.wire = function (eventDispatcher) {\r\n        eventDispatcher._wiredEventDispatchers.push(this);\r\n    };\r\n    /**\r\n     * Unwires this event dispatcher from another\r\n     */\r\n    EventDispatcher.prototype.unwire = function (eventDispatcher) {\r\n        var index = eventDispatcher._wiredEventDispatchers.indexOf(this);\r\n        if (index > -1) {\r\n            eventDispatcher._wiredEventDispatchers.splice(index, 1);\r\n        }\r\n    };\r\n    return EventDispatcher;\r\n}());\r\nexport { EventDispatcher };\r\n//# sourceMappingURL=EventDispatcher.js.map","import { EventDispatcher } from './EventDispatcher';\r\n/**\r\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\r\n * and extending abilities for vanilla Javascript projects\r\n */\r\nvar Class = /** @class */ (function () {\r\n    function Class() {\r\n        this.eventDispatcher = new EventDispatcher(this);\r\n    }\r\n    /**\r\n     * Alias for `addEventListener`. You can listen for a variety of\r\n     * events off of the engine; see the events section below for a complete list.\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    Class.prototype.on = function (eventName, handler) {\r\n        this.eventDispatcher.on(eventName, handler);\r\n    };\r\n    /**\r\n     * Alias for `removeEventListener`. If only the eventName is specified\r\n     * it will remove all handlers registered for that specific event. If the eventName\r\n     * and the handler instance are specified only that handler will be removed.\r\n     *\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    Class.prototype.off = function (eventName, handler) {\r\n        this.eventDispatcher.off(eventName, handler);\r\n    };\r\n    /**\r\n     * Emits a new event\r\n     * @param eventName   Name of the event to emit\r\n     * @param eventObject Data associated with this event\r\n     */\r\n    Class.prototype.emit = function (eventName, eventObject) {\r\n        this.eventDispatcher.emit(eventName, eventObject);\r\n    };\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    Class.prototype.once = function (eventName, handler) {\r\n        this.eventDispatcher.once(eventName, handler);\r\n    };\r\n    /**\r\n     * You may wish to extend native Excalibur functionality in vanilla Javascript.\r\n     * Any method on a class inheriting [[Class]] may be extended to support\r\n     * additional functionality. In the example below we create a new type called `MyActor`.\r\n     *\r\n     *\r\n     * ```js\r\n     * var MyActor = Actor.extend({\r\n     *\r\n     *    constructor: function() {\r\n     *       this.newprop = 'something';\r\n     *       Actor.apply(this, arguments);\r\n     *    },\r\n     *\r\n     *    update: function(engine, delta) {\r\n     *       // Implement custom update\r\n     *       // Call super constructor update\r\n     *       Actor.prototype.update.call(this, engine, delta);\r\n     *\r\n     *       console.log(\"Something cool!\");\r\n     *    }\r\n     * });\r\n     *\r\n     * var myActor = new MyActor(100, 100, 100, 100, Color.Azure);\r\n     * ```\r\n     *\r\n     * In TypeScript, you only need to use the `extends` syntax, you do not need\r\n     * to use this method of extension.\r\n     *\r\n     * @param methods A JSON object contain any methods/properties you want to extend\r\n     */\r\n    Class.extend = function (methods) {\r\n        var parent = this;\r\n        var child;\r\n        if (methods && methods.hasOwnProperty('constructor')) {\r\n            child = methods.constructor;\r\n        }\r\n        else {\r\n            child = function () {\r\n                return parent.apply(this, arguments);\r\n            };\r\n        }\r\n        // Using constructor allows JS to lazily instantiate super classes\r\n        var Super = function () {\r\n            this.constructor = child;\r\n        };\r\n        Super.prototype = parent.prototype;\r\n        child.prototype = new Super();\r\n        if (methods) {\r\n            for (var prop in methods) {\r\n                if (methods.hasOwnProperty(prop)) {\r\n                    child.prototype[prop] = methods[prop];\r\n                }\r\n            }\r\n        }\r\n        // Make subclasses extendable\r\n        child.extend = Class.extend;\r\n        return child;\r\n    };\r\n    return Class;\r\n}());\r\nexport { Class };\r\n//# sourceMappingURL=Class.js.map","import { CollisionType } from '../Actor';\r\nimport { Vector } from '../Algebra';\r\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\r\nimport { PostCollisionEvent, PreCollisionEvent } from '../Events';\r\nimport * as Util from '../Util/Util';\r\n/**\r\n * Collision contacts are used internally by Excalibur to resolve collision between actors. This\r\n * Pair prevents collisions from being evaluated more than one time\r\n */\r\nvar CollisionContact = /** @class */ (function () {\r\n    function CollisionContact(bodyA, bodyB, mtv, point, normal) {\r\n        this.bodyA = bodyA;\r\n        this.bodyB = bodyB;\r\n        this.mtv = mtv;\r\n        this.point = point;\r\n        this.normal = normal;\r\n    }\r\n    CollisionContact.prototype.resolve = function (strategy) {\r\n        if (strategy === CollisionResolutionStrategy.RigidBody) {\r\n            this._resolveRigidBodyCollision();\r\n        }\r\n        else if (strategy === CollisionResolutionStrategy.Box) {\r\n            this._resolveBoxCollision();\r\n        }\r\n        else {\r\n            throw new Error('Unknown collision resolution strategy');\r\n        }\r\n    };\r\n    CollisionContact.prototype._applyBoxImpulse = function (bodyA, bodyB, mtv) {\r\n        if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType !== CollisionType.Passive) {\r\n            // Resolve overlaps\r\n            if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\r\n                // split overlaps if both are Active\r\n                mtv = mtv.scale(0.5);\r\n            }\r\n            // Apply mtv\r\n            bodyA.pos.y += mtv.y;\r\n            bodyA.pos.x += mtv.x;\r\n            // non-zero intersection on the y axis\r\n            if (this.mtv.x !== 0) {\r\n                var velX = 0;\r\n                // both bodies are traveling in the same direction (negative or positive)\r\n                if (bodyA.vel.x < 0 && bodyB.vel.x < 0) {\r\n                    velX = Math.min(bodyA.vel.x, bodyB.vel.x);\r\n                }\r\n                else if (bodyA.vel.x > 0 && bodyB.vel.x > 0) {\r\n                    velX = Math.max(bodyA.vel.x, bodyB.vel.x);\r\n                }\r\n                else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                    // bodies are traveling in opposite directions\r\n                    if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                        velX = bodyA.vel.x;\r\n                    }\r\n                    else {\r\n                        // bodyA is heading towards b\r\n                        velX = bodyB.vel.x;\r\n                    }\r\n                }\r\n                bodyA.vel.x = velX;\r\n            }\r\n            if (this.mtv.y !== 0) {\r\n                var velY = 0;\r\n                // both bodies are traveling in the same direction (negative or positive)\r\n                if (bodyA.vel.y < 0 && bodyB.vel.y < 0) {\r\n                    velY = Math.min(bodyA.vel.y, bodyB.vel.y);\r\n                }\r\n                else if (bodyA.vel.y > 0 && bodyB.vel.y > 0) {\r\n                    velY = Math.max(bodyA.vel.y, bodyB.vel.y);\r\n                }\r\n                else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                    // bodies are traveling in opposite directions\r\n                    if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                        velY = bodyA.vel.y;\r\n                    }\r\n                    else {\r\n                        // bodyA is heading towards b\r\n                        velY = bodyB.vel.y;\r\n                    }\r\n                }\r\n                bodyA.vel.y = velY;\r\n            }\r\n            bodyA.emit('postcollision', new PostCollisionEvent(bodyA, bodyB, Util.getSideFromVector(mtv), mtv));\r\n        }\r\n    };\r\n    CollisionContact.prototype._resolveBoxCollision = function () {\r\n        var bodyA = this.bodyA.body.actor;\r\n        var bodyB = this.bodyB.body.actor;\r\n        var side = Util.getSideFromVector(this.mtv);\r\n        var mtv = this.mtv.negate();\r\n        // Publish collision events on both participants\r\n        bodyA.emit('precollision', new PreCollisionEvent(bodyA, bodyB, side, mtv));\r\n        bodyB.emit('precollision', new PreCollisionEvent(bodyB, bodyA, Util.getOppositeSide(side), mtv.negate()));\r\n        this._applyBoxImpulse(bodyA, bodyB, mtv);\r\n        this._applyBoxImpulse(bodyB, bodyA, mtv.negate());\r\n    };\r\n    CollisionContact.prototype._resolveRigidBodyCollision = function () {\r\n        // perform collison on bounding areas\r\n        var bodyA = this.bodyA.body;\r\n        var bodyB = this.bodyB.body;\r\n        var mtv = this.mtv; // normal pointing away from bodyA\r\n        var normal = this.normal; // normal pointing away from bodyA\r\n        if (bodyA.actor === bodyB.actor) {\r\n            // sanity check for existing pairs\r\n            return;\r\n        }\r\n        // Publish collision events on both participants\r\n        var side = Util.getSideFromVector(this.mtv);\r\n        bodyA.actor.emit('precollision', new PreCollisionEvent(this.bodyA.body.actor, this.bodyB.body.actor, side, this.mtv));\r\n        bodyB.actor.emit('precollision', new PreCollisionEvent(this.bodyB.body.actor, this.bodyA.body.actor, Util.getOppositeSide(side), this.mtv.negate()));\r\n        // If any of the participants are passive then short circuit\r\n        if (bodyA.actor.collisionType === CollisionType.Passive || bodyB.actor.collisionType === CollisionType.Passive) {\r\n            return;\r\n        }\r\n        var invMassA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.mass;\r\n        var invMassB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.mass;\r\n        var invMoiA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.moi;\r\n        var invMoiB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.moi;\r\n        // average restitution more relistic\r\n        var coefRestitution = Math.min(bodyA.restitution, bodyB.restitution);\r\n        var coefFriction = Math.min(bodyA.friction, bodyB.friction);\r\n        normal = normal.normalize();\r\n        var tangent = normal.normal().normalize();\r\n        var ra = this.point.sub(this.bodyA.getCenter()); // point relative to bodyA position\r\n        var rb = this.point.sub(this.bodyB.getCenter()); /// point relative to bodyB\r\n        // Relative velocity in linear terms\r\n        // Angular to linear velocity formula -> omega = v/r\r\n        var rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\r\n        var rvNormal = rv.dot(normal);\r\n        var rvTangent = rv.dot(tangent);\r\n        var raTangent = ra.dot(tangent);\r\n        var raNormal = ra.dot(normal);\r\n        var rbTangent = rb.dot(tangent);\r\n        var rbNormal = rb.dot(normal);\r\n        // If objects are moving away ignore\r\n        if (rvNormal > 0) {\r\n            return;\r\n        }\r\n        // Collision impulse formula from Chris Hecker\r\n        // https://en.wikipedia.org/wiki/Collision_response\r\n        var impulse = -((1 + coefRestitution) * rvNormal) / (invMassA + invMassB + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\r\n        if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n            bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n            }\r\n            bodyB.addMtv(mtv);\r\n        }\r\n        else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n            bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n            }\r\n            bodyA.addMtv(mtv.negate());\r\n        }\r\n        else {\r\n            bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n            bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n                bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n            }\r\n            // Split the mtv in half for the two bodies, potentially we could do something smarter here\r\n            bodyB.addMtv(mtv.scale(0.5));\r\n            bodyA.addMtv(mtv.scale(-0.5));\r\n        }\r\n        // Friction portion of impulse\r\n        if (coefFriction && rvTangent) {\r\n            // Columb model of friction, formula for impulse due to friction from\r\n            // https://en.wikipedia.org/wiki/Collision_response\r\n            // tangent force exerted by body on another in contact\r\n            var t = rv.sub(normal.scale(rv.dot(normal))).normalize();\r\n            // impulse in the direction of tangent force\r\n            var jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\r\n            var frictionImpulse = new Vector(0, 0);\r\n            if (Math.abs(jt) <= impulse * coefFriction) {\r\n                frictionImpulse = t.scale(jt).negate();\r\n            }\r\n            else {\r\n                frictionImpulse = t.scale(-impulse * coefFriction);\r\n            }\r\n            if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n                // apply frictional impulse\r\n                bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n                }\r\n            }\r\n            else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n                // apply frictional impulse\r\n                bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n                }\r\n            }\r\n            else {\r\n                // apply frictional impulse\r\n                bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n                bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n                // apply frictional impulse\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n                    bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n                }\r\n            }\r\n        }\r\n        bodyA.actor.emit('postcollision', new PostCollisionEvent(this.bodyA.body.actor, this.bodyB.body.actor, side, this.mtv));\r\n        bodyB.actor.emit('postcollision', new PostCollisionEvent(this.bodyB.body.actor, this.bodyA.body.actor, Util.getOppositeSide(side), this.mtv.negate()));\r\n    };\r\n    return CollisionContact;\r\n}());\r\nexport { CollisionContact };\r\n//# sourceMappingURL=CollisionContact.js.map","import { CollisionContact } from './CollisionContact';\r\nimport { PolygonArea } from './PolygonArea';\r\nexport var CollisionJumpTable = {\r\n    CollideCircleCircle: function (circleA, circleB) {\r\n        var radius = circleA.radius + circleB.radius;\r\n        var circleAPos = circleA.body.pos.add(circleA.pos);\r\n        var circleBPos = circleB.body.pos.add(circleB.pos);\r\n        if (circleAPos.distance(circleBPos) > radius) {\r\n            return null;\r\n        }\r\n        var axisOfCollision = circleBPos.sub(circleAPos).normalize();\r\n        var mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\r\n        var pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\r\n        return new CollisionContact(circleA, circleB, mvt, pointOfCollision, axisOfCollision);\r\n    },\r\n    CollideCirclePolygon: function (circle, polygon) {\r\n        var minAxis = circle.testSeparatingAxisTheorem(polygon);\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // make sure that the minAxis is pointing away from circle\r\n        var samedir = minAxis.dot(polygon.getCenter().sub(circle.getCenter()));\r\n        minAxis = samedir < 0 ? minAxis.negate() : minAxis;\r\n        var verts = [];\r\n        var point1 = polygon.getFurthestPoint(minAxis.negate());\r\n        var point2 = circle.getFurthestPoint(minAxis); //.add(cc);\r\n        if (circle.contains(point1)) {\r\n            verts.push(point1);\r\n        }\r\n        if (polygon.contains(point2)) {\r\n            verts.push(point2);\r\n        }\r\n        if (verts.length === 0) {\r\n            return null;\r\n        }\r\n        return new CollisionContact(circle, polygon, minAxis, verts.length === 2 ? verts[0].average(verts[1]) : verts[0], minAxis.normalize());\r\n    },\r\n    CollideCircleEdge: function (circle, edge) {\r\n        // center of the circle\r\n        var cc = circle.getCenter();\r\n        // vector in the direction of the edge\r\n        var e = edge.end.sub(edge.begin);\r\n        // amount of overlap with the circle's center along the edge direction\r\n        var u = e.dot(edge.end.sub(cc));\r\n        var v = e.dot(cc.sub(edge.begin));\r\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\r\n        if (v <= 0) {\r\n            var da = edge.begin.sub(cc);\r\n            var dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\r\n            // save some sqrts\r\n            if (dda > circle.radius * circle.radius) {\r\n                return null; // no collision\r\n            }\r\n            return new CollisionContact(circle, edge, da.normalize().scale(circle.radius - Math.sqrt(dda)), edge.begin, da.normalize());\r\n        }\r\n        // Potential region B collision (circle is on the right side of the edge, after the end)\r\n        if (u <= 0) {\r\n            var db = edge.end.sub(cc);\r\n            var ddb = db.dot(db);\r\n            if (ddb > circle.radius * circle.radius) {\r\n                return null;\r\n            }\r\n            return new CollisionContact(circle, edge, db.normalize().scale(circle.radius - Math.sqrt(ddb)), edge.end, db.normalize());\r\n        }\r\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\r\n        var den = e.dot(e);\r\n        var pointOnEdge = edge.begin\r\n            .scale(u)\r\n            .add(edge.end.scale(v))\r\n            .scale(1 / den);\r\n        var d = cc.sub(pointOnEdge);\r\n        var dd = d.dot(d);\r\n        if (dd > circle.radius * circle.radius) {\r\n            return null; // no collision\r\n        }\r\n        var n = e.perpendicular();\r\n        // flip correct direction\r\n        if (n.dot(cc.sub(edge.begin)) < 0) {\r\n            n.x = -n.x;\r\n            n.y = -n.y;\r\n        }\r\n        n = n.normalize();\r\n        var mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\r\n        return new CollisionContact(circle, edge, mvt.negate(), pointOnEdge, n.negate());\r\n    },\r\n    CollideEdgeEdge: function () {\r\n        // Edge-edge collision doesn't make sense\r\n        return null;\r\n    },\r\n    CollidePolygonEdge: function (polygon, edge) {\r\n        // 3 cases:\r\n        // (1) Polygon lands on the full face\r\n        // (2) Polygon lands on the right point\r\n        // (3) Polygon lands on the left point\r\n        var e = edge.end.sub(edge.begin);\r\n        var edgeNormal = e.normal();\r\n        if (polygon.contains(edge.begin)) {\r\n            var _a = polygon.getClosestFace(edge.begin), mtv = _a.distance, face = _a.face;\r\n            if (mtv) {\r\n                return new CollisionContact(polygon, edge, mtv.negate(), edge.begin.add(mtv.negate()), face.normal().negate());\r\n            }\r\n        }\r\n        if (polygon.contains(edge.end)) {\r\n            var _b = polygon.getClosestFace(edge.end), mtv = _b.distance, face = _b.face;\r\n            if (mtv) {\r\n                return new CollisionContact(polygon, edge, mtv.negate(), edge.end.add(mtv.negate()), face.normal().negate());\r\n            }\r\n        }\r\n        var pc = polygon.getCenter();\r\n        var ec = edge.getCenter();\r\n        var dir = ec.sub(pc).normalize();\r\n        // build a temporary polygon from the edge to use SAT\r\n        var linePoly = new PolygonArea({\r\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(30)), edge.begin.add(dir.scale(30))]\r\n        });\r\n        var minAxis = polygon.testSeparatingAxisTheorem(linePoly);\r\n        // no minAxis, no overlap, no collision\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // flip the normal and axis to always have positive collisions\r\n        edgeNormal = edgeNormal.dot(dir) < 0 ? edgeNormal.negate() : edgeNormal;\r\n        minAxis = minAxis.dot(dir) < 0 ? minAxis.negate() : minAxis;\r\n        return new CollisionContact(polygon, edge, minAxis, polygon.getFurthestPoint(edgeNormal), edgeNormal);\r\n    },\r\n    CollidePolygonPolygon: function (polyA, polyB) {\r\n        // do a SAT test to find a min axis if it exists\r\n        var minAxis = polyA.testSeparatingAxisTheorem(polyB);\r\n        // no overlap, no collision return null\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // make sure that minAxis is pointing from A -> B\r\n        var sameDir = minAxis.dot(polyB.getCenter().sub(polyA.getCenter()));\r\n        minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\r\n        // find rough point of collision\r\n        // todo this could be better\r\n        var verts = [];\r\n        var pointA = polyA.getFurthestPoint(minAxis);\r\n        var pointB = polyB.getFurthestPoint(minAxis.negate());\r\n        if (polyB.contains(pointA)) {\r\n            verts.push(pointA);\r\n        }\r\n        if (polyA.contains(pointB)) {\r\n            verts.push(pointB);\r\n        }\r\n        // no candidates, pick something\r\n        if (verts.length === 0) {\r\n            verts.push(pointB);\r\n        }\r\n        var contact = verts.length === 2 ? verts[0].add(verts[1]).scale(0.5) : verts[0];\r\n        return new CollisionContact(polyA, polyB, minAxis, contact, minAxis.normalize());\r\n    }\r\n};\r\n//# sourceMappingURL=CollisionJumpTable.js.map","import { BoundingBox } from './BoundingBox';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { Vector, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\n/**\r\n * This is a circle collision area for the excalibur rigid body physics simulation\r\n */\r\nvar CircleArea = /** @class */ (function () {\r\n    function CircleArea(options) {\r\n        /**\r\n         * This is the center position of the circle, relative to the body position\r\n         */\r\n        this.pos = Vector.Zero.clone();\r\n        this.pos = options.pos || Vector.Zero.clone();\r\n        this.radius = options.radius || 0;\r\n        this.body = options.body || null;\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    CircleArea.prototype.getCenter = function () {\r\n        if (this.body) {\r\n            return this.pos.add(this.body.pos);\r\n        }\r\n        return this.pos;\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    CircleArea.prototype.contains = function (point) {\r\n        var distance = this.body.pos.distance(point);\r\n        if (distance <= this.radius) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Casts a ray at the CircleArea and returns the nearest point of collision\r\n     * @param ray\r\n     */\r\n    CircleArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\r\n        var c = this.getCenter();\r\n        var dir = ray.dir;\r\n        var orig = ray.pos;\r\n        var discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\r\n        if (discriminant < 0) {\r\n            // no intersection\r\n            return null;\r\n        }\r\n        else {\r\n            var toi = 0;\r\n            if (discriminant === 0) {\r\n                toi = -dir.dot(orig.sub(c));\r\n                if (toi > 0 && toi < max) {\r\n                    return ray.getPoint(toi);\r\n                }\r\n                return null;\r\n            }\r\n            else {\r\n                var toi1 = -dir.dot(orig.sub(c)) + discriminant;\r\n                var toi2 = -dir.dot(orig.sub(c)) - discriminant;\r\n                var mintoi = Math.min(toi1, toi2);\r\n                if (mintoi <= max) {\r\n                    return ray.getPoint(mintoi);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    CircleArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCircleCircle(this, area);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollideCirclePolygon(this, area);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollideCircleEdge(this, area);\r\n        }\r\n        else {\r\n            throw new Error(\"Circle could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    CircleArea.prototype.getFurthestPoint = function (direction) {\r\n        return this.getCenter().add(direction.normalize().scale(this.radius));\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the circle area\r\n     */\r\n    CircleArea.prototype.getBounds = function () {\r\n        return new BoundingBox(this.pos.x + this.body.pos.x - this.radius, this.pos.y + this.body.pos.y - this.radius, this.pos.x + this.body.pos.x + this.radius, this.pos.y + this.body.pos.y + this.radius);\r\n    };\r\n    /**\r\n     * Get axis not implemented on circles, since there are infinite axis in a circle\r\n     */\r\n    CircleArea.prototype.getAxes = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * Returns the moment of inertia of a circle given it's mass\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    CircleArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        return (mass * this.radius * this.radius) / 2;\r\n    };\r\n    /**\r\n     * Tests the separating axis theorem for circles against polygons\r\n     */\r\n    CircleArea.prototype.testSeparatingAxisTheorem = function (polygon) {\r\n        var axes = polygon.getAxes();\r\n        var pc = polygon.getCenter();\r\n        // Special SAT with circles\r\n        var closestPointOnPoly = polygon.getFurthestPoint(this.pos.sub(pc));\r\n        axes.push(this.pos.sub(closestPointOnPoly).normalize());\r\n        var minOverlap = Number.MAX_VALUE;\r\n        var minAxis = null;\r\n        var minIndex = -1;\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var proj1 = polygon.project(axes[i]);\r\n            var proj2 = this.project(axes[i]);\r\n            var overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        if (minIndex < 0) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    };\r\n    /* istanbul ignore next */\r\n    CircleArea.prototype.recalc = function () {\r\n        // circles don't cache\r\n    };\r\n    /**\r\n     * Project the circle along a specified axis\r\n     */\r\n    CircleArea.prototype.project = function (axis) {\r\n        var scalars = [];\r\n        var point = this.getCenter();\r\n        var dotProduct = point.dot(axis);\r\n        scalars.push(dotProduct);\r\n        scalars.push(dotProduct + this.radius);\r\n        scalars.push(dotProduct - this.radius);\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    };\r\n    /* istanbul ignore next */\r\n    CircleArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Green.clone(); }\r\n        var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n        var rotation = this.body ? this.body.rotation : 0;\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.moveTo(pos.x, pos.y);\r\n        ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return CircleArea;\r\n}());\r\nexport { CircleArea };\r\n//# sourceMappingURL=CircleArea.js.map","import { BoundingBox } from './BoundingBox';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CircleArea } from './CircleArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { Vector, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\nvar EdgeArea = /** @class */ (function () {\r\n    function EdgeArea(options) {\r\n        this.begin = options.begin || Vector.Zero.clone();\r\n        this.end = options.end || Vector.Zero.clone();\r\n        this.body = options.body || null;\r\n        this.pos = this.getCenter();\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    EdgeArea.prototype.getCenter = function () {\r\n        var pos = this.begin.average(this.end).add(this._getBodyPos());\r\n        return pos;\r\n    };\r\n    EdgeArea.prototype._getBodyPos = function () {\r\n        var bodyPos = Vector.Zero.clone();\r\n        if (this.body.pos) {\r\n            bodyPos = this.body.pos;\r\n        }\r\n        return bodyPos;\r\n    };\r\n    EdgeArea.prototype._getTransformedBegin = function () {\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        return this.begin.rotate(angle).add(this._getBodyPos());\r\n    };\r\n    EdgeArea.prototype._getTransformedEnd = function () {\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        return this.end.rotate(angle).add(this._getBodyPos());\r\n    };\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    EdgeArea.prototype.getSlope = function () {\r\n        var begin = this._getTransformedBegin();\r\n        var end = this._getTransformedEnd();\r\n        var distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    };\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    EdgeArea.prototype.getLength = function () {\r\n        var begin = this._getTransformedBegin();\r\n        var end = this._getTransformedEnd();\r\n        var distance = begin.distance(end);\r\n        return distance;\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    EdgeArea.prototype.contains = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        var numerator = this._getTransformedBegin().sub(ray.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\r\n            return null;\r\n        }\r\n        // Lines are parallel\r\n        var divisor = ray.dir.cross(this.getSlope());\r\n        if (divisor === 0) {\r\n            return null;\r\n        }\r\n        var t = numerator.cross(this.getSlope()) / divisor;\r\n        if (t >= 0 && t <= max) {\r\n            var u = numerator.cross(ray.dir) / divisor / this.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return ray.getPoint(t);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCircleEdge(area, this);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollidePolygonEdge(area, this);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollideEdgeEdge();\r\n        }\r\n        else {\r\n            throw new Error(\"Edge could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    EdgeArea.prototype.getFurthestPoint = function (direction) {\r\n        var transformedBegin = this._getTransformedBegin();\r\n        var transformedEnd = this._getTransformedEnd();\r\n        if (direction.dot(transformedBegin) > 0) {\r\n            return transformedBegin;\r\n        }\r\n        else {\r\n            return transformedEnd;\r\n        }\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the circle area\r\n     */\r\n    EdgeArea.prototype.getBounds = function () {\r\n        var transformedBegin = this._getTransformedBegin();\r\n        var transformedEnd = this._getTransformedEnd();\r\n        return new BoundingBox(Math.min(transformedBegin.x, transformedEnd.x), Math.min(transformedBegin.y, transformedEnd.y), Math.max(transformedBegin.x, transformedEnd.x), Math.max(transformedBegin.y, transformedEnd.y));\r\n    };\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    EdgeArea.prototype.getAxes = function () {\r\n        var e = this._getTransformedEnd().sub(this._getTransformedBegin());\r\n        var edgeNormal = e.normal();\r\n        var axes = [];\r\n        axes.push(edgeNormal);\r\n        axes.push(edgeNormal.negate());\r\n        axes.push(edgeNormal.normal());\r\n        axes.push(edgeNormal.normal().negate());\r\n        return axes;\r\n    };\r\n    /**\r\n     * Get the moment of inertia for an edge\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    EdgeArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        var length = this.end.sub(this.begin).distance() / 2;\r\n        return mass * length * length;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.recalc = function () {\r\n        // edges don't have any cached data\r\n    };\r\n    /**\r\n     * Project the edge along a specified axis\r\n     */\r\n    EdgeArea.prototype.project = function (axis) {\r\n        var scalars = [];\r\n        var points = [this._getTransformedBegin(), this._getTransformedEnd()];\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            scalars.push(points[i].dot(axis));\r\n        }\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    };\r\n    /* istanbul ignore next */\r\n    EdgeArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Red.clone(); }\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.begin.x, this.begin.y);\r\n        ctx.lineTo(this.end.x, this.end.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return EdgeArea;\r\n}());\r\nexport { EdgeArea };\r\n//# sourceMappingURL=EdgeArea.js.map","import { Color } from './../Drawing/Color';\r\nimport { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CircleArea } from './CircleArea';\r\nimport { Vector, Line, Ray, Projection } from './../Algebra';\r\n/**\r\n * Polygon collision area for detecting collisions for actors, or independently\r\n */\r\nvar PolygonArea = /** @class */ (function () {\r\n    function PolygonArea(options) {\r\n        this._transformedPoints = [];\r\n        this._axes = [];\r\n        this._sides = [];\r\n        this.pos = options.pos || Vector.Zero.clone();\r\n        var winding = !!options.clockwiseWinding;\r\n        this.points = (winding ? options.points.reverse() : options.points) || [];\r\n        this.body = options.body || null;\r\n        // calculate initial transformation\r\n        this._calculateTransformation();\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    PolygonArea.prototype.getCenter = function () {\r\n        if (this.body) {\r\n            return this.body.pos.add(this.pos);\r\n        }\r\n        return this.pos;\r\n    };\r\n    /**\r\n     * Calculates the underlying transformation from the body relative space to world space\r\n     */\r\n    PolygonArea.prototype._calculateTransformation = function () {\r\n        var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        var len = this.points.length;\r\n        this._transformedPoints.length = 0; // clear out old transform\r\n        for (var i = 0; i < len; i++) {\r\n            this._transformedPoints[i] = this.points[i].rotate(angle).add(pos);\r\n        }\r\n    };\r\n    /**\r\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\r\n     */\r\n    PolygonArea.prototype.getTransformedPoints = function () {\r\n        if (!this._transformedPoints.length) {\r\n            this._calculateTransformation();\r\n        }\r\n        return this._transformedPoints;\r\n    };\r\n    /**\r\n     * Gets the sides of the polygon in world space\r\n     */\r\n    PolygonArea.prototype.getSides = function () {\r\n        if (this._sides.length) {\r\n            return this._sides;\r\n        }\r\n        var lines = [];\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            lines.push(new Line(points[i], points[(i - 1 + len) % len]));\r\n        }\r\n        this._sides = lines;\r\n        return this._sides;\r\n    };\r\n    PolygonArea.prototype.recalc = function () {\r\n        this._sides.length = 0;\r\n        this._axes.length = 0;\r\n        this._transformedPoints.length = 0;\r\n        this.getTransformedPoints();\r\n        this.getAxes();\r\n        this.getSides();\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area in world space\r\n     */\r\n    PolygonArea.prototype.contains = function (point) {\r\n        // Always cast to the right, as long as we cast in a consitent fixed direction we\r\n        // will be fine\r\n        var testRay = new Ray(point, new Vector(1, 0));\r\n        var intersectCount = this.getSides().reduce(function (accum, side) {\r\n            if (testRay.intersect(side) >= 0) {\r\n                return accum + 1;\r\n            }\r\n            return accum;\r\n        }, 0);\r\n        if (intersectCount % 2 === 0) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Returns a collision contact if the 2 collision areas collide, otherwise collide will\r\n     * return null.\r\n     * @param area\r\n     */\r\n    PolygonArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCirclePolygon(area, this);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollidePolygonPolygon(this, area);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollidePolygonEdge(this, area);\r\n        }\r\n        else {\r\n            throw new Error(\"Polygon could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    PolygonArea.prototype.getFurthestPoint = function (direction) {\r\n        var pts = this.getTransformedPoints();\r\n        var furthestPoint = null;\r\n        var maxDistance = -Number.MAX_VALUE;\r\n        for (var i = 0; i < pts.length; i++) {\r\n            var distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    };\r\n    /**\r\n     * Finds the closes face to the point using perpendicular distance\r\n     * @param point point to test against polygon\r\n     */\r\n    PolygonArea.prototype.getClosestFace = function (point) {\r\n        var sides = this.getSides();\r\n        var min = Number.POSITIVE_INFINITY;\r\n        var faceIndex = -1;\r\n        var distance = -1;\r\n        for (var i = 0; i < sides.length; i++) {\r\n            var dist = sides[i].distanceToPoint(point);\r\n            if (dist < min) {\r\n                min = dist;\r\n                faceIndex = i;\r\n                distance = dist;\r\n            }\r\n        }\r\n        if (faceIndex !== -1) {\r\n            return {\r\n                distance: sides[faceIndex].normal().scale(distance),\r\n                face: sides[faceIndex]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon area\r\n     */\r\n    PolygonArea.prototype.getBounds = function () {\r\n        // todo there is a faster way to do this\r\n        var points = this.getTransformedPoints();\r\n        var minX = points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.x);\r\n        }, 999999999);\r\n        var maxX = points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.x);\r\n        }, -99999999);\r\n        var minY = points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.y);\r\n        }, 9999999999);\r\n        var maxY = points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.y);\r\n        }, -9999999999);\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    };\r\n    /**\r\n     * Get the moment of inertia for an arbitrary polygon\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    PolygonArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        var numerator = 0;\r\n        var denominator = 0;\r\n        for (var i = 0; i < this.points.length; i++) {\r\n            var iplusone = (i + 1) % this.points.length;\r\n            var crossTerm = this.points[iplusone].cross(this.points[i]);\r\n            numerator +=\r\n                crossTerm *\r\n                    (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\r\n            denominator += crossTerm;\r\n        }\r\n        return (mass / 6) * (numerator / denominator);\r\n    };\r\n    /**\r\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\r\n     */\r\n    PolygonArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        // find the minimum contact time greater than 0\r\n        // contact times less than 0 are behind the ray and we don't want those\r\n        var sides = this.getSides();\r\n        var len = sides.length;\r\n        var minContactTime = Number.MAX_VALUE;\r\n        var contactIndex = -1;\r\n        for (var i = 0; i < len; i++) {\r\n            var contactTime = ray.intersect(sides[i]);\r\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\r\n                minContactTime = contactTime;\r\n                contactIndex = i;\r\n            }\r\n        }\r\n        // contact was found\r\n        if (contactIndex >= 0) {\r\n            return ray.getPoint(minContactTime);\r\n        }\r\n        // no contact found\r\n        return null;\r\n    };\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    PolygonArea.prototype.getAxes = function () {\r\n        if (this._axes.length) {\r\n            return this._axes;\r\n        }\r\n        var axes = [];\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            axes.push(points[i].sub(points[(i + 1) % len]).normal());\r\n        }\r\n        this._axes = axes;\r\n        return this._axes;\r\n    };\r\n    /**\r\n     * Perform Separating Axis test against another polygon, returns null if no overlap in polys\r\n     * Reference http://www.dyn4j.org/2010/01/sat/\r\n     */\r\n    PolygonArea.prototype.testSeparatingAxisTheorem = function (other) {\r\n        var poly1 = this;\r\n        var poly2 = other;\r\n        var axes = poly1.getAxes().concat(poly2.getAxes());\r\n        var minOverlap = Number.MAX_VALUE;\r\n        var minAxis = null;\r\n        var minIndex = -1;\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var proj1 = poly1.project(axes[i]);\r\n            var proj2 = poly2.project(axes[i]);\r\n            var overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        // Sanity check\r\n        if (minIndex === -1) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    };\r\n    /**\r\n     * Project the edges of the polygon along a specified axis\r\n     */\r\n    PolygonArea.prototype.project = function (axis) {\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        var min = Number.MAX_VALUE;\r\n        var max = -Number.MAX_VALUE;\r\n        for (var i = 0; i < len; i++) {\r\n            var scalar = points[i].dot(axis);\r\n            min = Math.min(min, scalar);\r\n            max = Math.max(max, scalar);\r\n        }\r\n        return new Projection(min, max);\r\n    };\r\n    /* istanbul ignore next */\r\n    PolygonArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Red.clone(); }\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        var firstPoint = this.getTransformedPoints()[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        this.getTransformedPoints().forEach(function (point) {\r\n            ctx.lineTo(point.x, point.y);\r\n        });\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return PolygonArea;\r\n}());\r\nexport { PolygonArea };\r\n//# sourceMappingURL=PolygonArea.js.map","import { PolygonArea } from './PolygonArea';\r\nimport { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\n/**\r\n * Axis Aligned collision primitive for Excalibur.\r\n */\r\nvar BoundingBox = /** @class */ (function () {\r\n    /**\r\n     * @param left    x coordinate of the left edge\r\n     * @param top     y coordinate of the top edge\r\n     * @param right   x coordinate of the right edge\r\n     * @param bottom  y coordinate of the bottom edge\r\n     */\r\n    function BoundingBox(left, top, right, bottom) {\r\n        if (left === void 0) { left = 0; }\r\n        if (top === void 0) { top = 0; }\r\n        if (right === void 0) { right = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        this.left = left;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n    }\r\n    BoundingBox.fromPoints = function (points) {\r\n        var minX = Infinity;\r\n        var minY = Infinity;\r\n        var maxX = -Infinity;\r\n        var maxY = -Infinity;\r\n        for (var i = 0; i < points.length; i++) {\r\n            if (points[i].x < minX) {\r\n                minX = points[i].x;\r\n            }\r\n            if (points[i].x > maxX) {\r\n                maxX = points[i].x;\r\n            }\r\n            if (points[i].y < minY) {\r\n                minY = points[i].y;\r\n            }\r\n            if (points[i].y > maxY) {\r\n                maxY = points[i].y;\r\n            }\r\n        }\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    };\r\n    /**\r\n     * Returns the calculated width of the bounding box\r\n     */\r\n    BoundingBox.prototype.getWidth = function () {\r\n        return this.right - this.left;\r\n    };\r\n    /**\r\n     * Returns the calculated height of the bounding box\r\n     */\r\n    BoundingBox.prototype.getHeight = function () {\r\n        return this.bottom - this.top;\r\n    };\r\n    /**\r\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\r\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\r\n     */\r\n    BoundingBox.prototype.rotate = function (angle, point) {\r\n        if (point === void 0) { point = Vector.Zero.clone(); }\r\n        var points = this.getPoints().map(function (p) { return p.rotate(angle, point); });\r\n        return BoundingBox.fromPoints(points);\r\n    };\r\n    /**\r\n     * Returns the perimeter of the bounding box\r\n     */\r\n    BoundingBox.prototype.getPerimeter = function () {\r\n        var wx = this.getWidth();\r\n        var wy = this.getHeight();\r\n        return 2 * (wx + wy);\r\n    };\r\n    BoundingBox.prototype.getPoints = function () {\r\n        var results = [];\r\n        results.push(new Vector(this.left, this.top));\r\n        results.push(new Vector(this.right, this.top));\r\n        results.push(new Vector(this.right, this.bottom));\r\n        results.push(new Vector(this.left, this.bottom));\r\n        return results;\r\n    };\r\n    /**\r\n     * Creates a Polygon collision area from the points of the bounding box\r\n     */\r\n    BoundingBox.prototype.toPolygon = function (actor) {\r\n        return new PolygonArea({\r\n            body: actor ? actor.body : null,\r\n            points: this.getPoints(),\r\n            pos: Vector.Zero.clone()\r\n        });\r\n    };\r\n    /**\r\n     * Determines whether a ray intersects with a bounding box\r\n     */\r\n    BoundingBox.prototype.rayCast = function (ray, farClipDistance) {\r\n        if (farClipDistance === void 0) { farClipDistance = Infinity; }\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        var tmin = -Infinity;\r\n        var tmax = +Infinity;\r\n        var xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        var yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        var tx1 = (this.left - ray.pos.x) * xinv;\r\n        var tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        var ty1 = (this.top - ray.pos.y) * yinv;\r\n        var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\r\n    };\r\n    BoundingBox.prototype.rayCastTime = function (ray, farClipDistance) {\r\n        if (farClipDistance === void 0) { farClipDistance = Infinity; }\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        var tmin = -Infinity;\r\n        var tmax = +Infinity;\r\n        var xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        var yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        var tx1 = (this.left - ray.pos.x) * xinv;\r\n        var tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        var ty1 = (this.top - ray.pos.y) * yinv;\r\n        var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\r\n            return tmin;\r\n        }\r\n        return -1;\r\n    };\r\n    BoundingBox.prototype.contains = function (val) {\r\n        if (val instanceof Vector) {\r\n            return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\r\n        }\r\n        else if (val instanceof BoundingBox) {\r\n            if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Combines this bounding box and another together returning a new bounding box\r\n     * @param other  The bounding box to combine\r\n     */\r\n    BoundingBox.prototype.combine = function (other) {\r\n        var compositeBB = new BoundingBox(Math.min(this.left, other.left), Math.min(this.top, other.top), Math.max(this.right, other.right), Math.max(this.bottom, other.bottom));\r\n        return compositeBB;\r\n    };\r\n    /**\r\n     * Test wether this bounding box collides with another returning,\r\n     * the intersection vector that can be used to resolve the collision. If there\r\n     * is no collision null is returned.\r\n     * @param collidable  Other collidable to test\r\n     */\r\n    BoundingBox.prototype.collides = function (collidable) {\r\n        if (collidable instanceof BoundingBox) {\r\n            var other = collidable;\r\n            var totalBoundingBox = this.combine(other);\r\n            // If the total bounding box is less than the sum of the 2 bounds then there is collision\r\n            if (totalBoundingBox.getWidth() < other.getWidth() + this.getWidth() &&\r\n                totalBoundingBox.getHeight() < other.getHeight() + this.getHeight()) {\r\n                // collision\r\n                var overlapX = 0;\r\n                if (this.right >= other.left && this.right <= other.right) {\r\n                    overlapX = other.left - this.right;\r\n                }\r\n                else {\r\n                    overlapX = other.right - this.left;\r\n                }\r\n                var overlapY = 0;\r\n                if (this.top <= other.bottom && this.top >= other.top) {\r\n                    overlapY = other.bottom - this.top;\r\n                }\r\n                else {\r\n                    overlapY = other.top - this.bottom;\r\n                }\r\n                if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                    return new Vector(overlapX, 0);\r\n                }\r\n                else {\r\n                    return new Vector(0, overlapY);\r\n                }\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /* istanbul ignore next */\r\n    BoundingBox.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Yellow; }\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.strokeRect(this.left, this.top, this.getWidth(), this.getHeight());\r\n    };\r\n    return BoundingBox;\r\n}());\r\nexport { BoundingBox };\r\n//# sourceMappingURL=BoundingBox.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from '../Class';\r\nimport { Promise } from '../Promises';\r\nimport { Logger } from '../Util/Log';\r\n/**\r\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\r\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\r\n *\r\n * [[include:Resources.md]]\r\n */\r\nvar Resource = /** @class */ (function (_super) {\r\n    __extends(Resource, _super);\r\n    /**\r\n     * @param path          Path to the remote resource\r\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\r\n     * @param bustCache     Whether or not to cache-bust requests\r\n     */\r\n    function Resource(path, responseType, bustCache) {\r\n        if (bustCache === void 0) { bustCache = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this.path = path;\r\n        _this.responseType = responseType;\r\n        _this.bustCache = bustCache;\r\n        _this.data = null;\r\n        _this.logger = Logger.getInstance();\r\n        _this.onprogress = function () {\r\n            return;\r\n        };\r\n        _this.oncomplete = function () {\r\n            return;\r\n        };\r\n        _this.onerror = function () {\r\n            return;\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns true if the Resource is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    Resource.prototype.isLoaded = function () {\r\n        return this.data !== null;\r\n    };\r\n    Resource.prototype.wireEngine = function (_engine) {\r\n        // override me\r\n    };\r\n    Resource.prototype._cacheBust = function (uri) {\r\n        var query = /\\?\\w*=\\w*/;\r\n        if (query.test(uri)) {\r\n            uri += '&__=' + Date.now();\r\n        }\r\n        else {\r\n            uri += '?__=' + Date.now();\r\n        }\r\n        return uri;\r\n    };\r\n    Resource.prototype._start = function () {\r\n        this.logger.debug('Started loading resource ' + this.path);\r\n    };\r\n    /**\r\n     * Begin loading the resource and returns a promise to be resolved on completion\r\n     */\r\n    Resource.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        // Exit early if we already have data\r\n        if (this.data !== null) {\r\n            this.logger.debug('Already have data for resource', this.path);\r\n            complete.resolve(this.data);\r\n            this.oncomplete();\r\n            return complete;\r\n        }\r\n        var request = new XMLHttpRequest();\r\n        request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\r\n        request.responseType = this.responseType;\r\n        request.onloadstart = function () {\r\n            _this._start();\r\n        };\r\n        request.onprogress = this.onprogress;\r\n        request.onerror = this.onerror;\r\n        request.onload = function () {\r\n            // XHR on file:// success status is 0, such as with PhantomJS\r\n            if (request.status !== 0 && request.status !== 200) {\r\n                _this.logger.error('Failed to load resource ', _this.path, ' server responded with error code', request.status);\r\n                _this.onerror(request.response);\r\n                complete.resolve(request.response);\r\n                return;\r\n            }\r\n            _this.data = _this.processData(request.response);\r\n            _this.oncomplete();\r\n            _this.logger.debug('Completed loading resource', _this.path);\r\n            complete.resolve(_this.data);\r\n        };\r\n        request.send();\r\n        return complete;\r\n    };\r\n    /**\r\n     * Returns the loaded data once the resource is loaded\r\n     */\r\n    Resource.prototype.getData = function () {\r\n        return this.data;\r\n    };\r\n    /**\r\n     * Sets the data for this resource directly\r\n     */\r\n    Resource.prototype.setData = function (data) {\r\n        this.data = this.processData(data);\r\n    };\r\n    /**\r\n     * This method is meant to be overriden to handle any additional\r\n     * processing. Such as decoding downloaded audio bits.\r\n     */\r\n    Resource.prototype.processData = function (data) {\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\r\n        // Blob requires an object url\r\n        if (this.responseType === 'blob') {\r\n            return URL.createObjectURL(data);\r\n        }\r\n        return data;\r\n    };\r\n    return Resource;\r\n}(Class));\r\nexport { Resource };\r\n//# sourceMappingURL=Resource.js.map","/**\r\n * These effects can be applied to any bitmap image but are mainly used\r\n * for [[Sprite]] effects or [[Animation]] effects.\r\n *\r\n * [[include:SpriteEffects.md]]\r\n */\r\n/**\r\n * @typedoc\r\n */\r\nimport { Color } from './Color';\r\n/**\r\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\r\n */\r\nvar Grayscale = /** @class */ (function () {\r\n    function Grayscale() {\r\n    }\r\n    Grayscale.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\r\n        pixel[firstPixel + 0] = avg;\r\n        pixel[firstPixel + 1] = avg;\r\n        pixel[firstPixel + 2] = avg;\r\n    };\r\n    return Grayscale;\r\n}());\r\nexport { Grayscale };\r\n/**\r\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\r\n */\r\nvar Invert = /** @class */ (function () {\r\n    function Invert() {\r\n    }\r\n    Invert.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\r\n        pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\r\n        pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\r\n    };\r\n    return Invert;\r\n}());\r\nexport { Invert };\r\n/**\r\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\r\n */\r\nvar Opacity = /** @class */ (function () {\r\n    /**\r\n     * @param opacity  The new opacity of the sprite from 0-1.0\r\n     */\r\n    function Opacity(opacity) {\r\n        this.opacity = opacity;\r\n    }\r\n    Opacity.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\r\n        }\r\n    };\r\n    return Opacity;\r\n}());\r\nexport { Opacity };\r\n/**\r\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\r\n * average of the original color and the provided color\r\n */\r\nvar Colorize = /** @class */ (function () {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    function Colorize(color) {\r\n        this.color = color;\r\n    }\r\n    Colorize.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\r\n            pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\r\n            pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\r\n        }\r\n    };\r\n    return Colorize;\r\n}());\r\nexport { Colorize };\r\n/**\r\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\r\n */\r\nvar Lighten = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Lighten(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Lighten.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Lighten;\r\n}());\r\nexport { Lighten };\r\n/**\r\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\r\n */\r\nvar Darken = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Darken(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Darken.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Darken;\r\n}());\r\nexport { Darken };\r\n/**\r\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\r\n */\r\nvar Saturate = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Saturate(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Saturate.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Saturate;\r\n}());\r\nexport { Saturate };\r\n/**\r\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\r\n */\r\nvar Desaturate = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Desaturate(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Desaturate.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Desaturate;\r\n}());\r\nexport { Desaturate };\r\n/**\r\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\r\n * a given color\r\n */\r\nvar Fill = /** @class */ (function () {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    function Fill(color) {\r\n        this.color = color;\r\n    }\r\n    Fill.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = this.color.r;\r\n            pixel[firstPixel + 1] = this.color.g;\r\n            pixel[firstPixel + 2] = this.color.b;\r\n        }\r\n    };\r\n    return Fill;\r\n}());\r\nexport { Fill };\r\n//# sourceMappingURL=SpriteEffects.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexport function Configurable(base) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var _this = _super.apply(this, args) || this;\r\n            //get the number of arguments that aren't undefined. TS passes a value to all parameters\r\n            //of whatever ctor is the implementation, so args.length doesn't work here.\r\n            var size = args.filter(function (value) {\r\n                return value !== undefined;\r\n            }).length;\r\n            if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\r\n                _this.assign(args[0]);\r\n            }\r\n            return _this;\r\n        }\r\n        class_1.prototype.assign = function (props) {\r\n            //set the value of every property that was passed in,\r\n            //if the constructor previously set this value, it will be overridden here\r\n            for (var k in props) {\r\n                if (typeof this[k] !== 'function') {\r\n                    this[k] = props[k];\r\n                }\r\n            }\r\n        };\r\n        return class_1;\r\n    }(base));\r\n}\r\n//# sourceMappingURL=Configurable.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Effects from './SpriteEffects';\r\nimport { Color } from './Color';\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport { clamp } from '../Util/Util';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar SpriteImpl = /** @class */ (function () {\r\n    /**\r\n     * @param image   The backing image texture to build the Sprite\r\n     * @param x      The x position of the sprite\r\n     * @param y      The y position of the sprite\r\n     * @param width  The width of the sprite in pixels\r\n     * @param height The height of the sprite in pixels\r\n     */\r\n    function SpriteImpl(imageOrConfig, x, y, width, height) {\r\n        var _this = this;\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.rotation = 0.0;\r\n        this.anchor = new Vector(0.0, 0.0);\r\n        this.scale = new Vector(1, 1);\r\n        this.logger = Logger.getInstance();\r\n        /**\r\n         * Draws the sprite flipped vertically\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Draws the sprite flipped horizontally\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.effects = [];\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._spriteCanvas = null;\r\n        this._spriteCtx = null;\r\n        this._pixelData = null;\r\n        this._pixelsLoaded = false;\r\n        this._dirtyEffect = false;\r\n        var image = imageOrConfig;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            x = imageOrConfig.x || imageOrConfig.x;\r\n            y = imageOrConfig.y || imageOrConfig.y;\r\n            width = imageOrConfig.drawWidth || imageOrConfig.width;\r\n            height = imageOrConfig.drawHeight || imageOrConfig.height;\r\n            image = imageOrConfig.image;\r\n            if (!image) {\r\n                var message = 'An image texture is required to contsruct a sprite';\r\n                throw new Error(message);\r\n            }\r\n        }\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this._texture = image;\r\n        this._spriteCanvas = document.createElement('canvas');\r\n        this._spriteCanvas.width = width;\r\n        this._spriteCanvas.height = height;\r\n        this._spriteCtx = this._spriteCanvas.getContext('2d');\r\n        this._texture.loaded\r\n            .then(function () {\r\n            _this._spriteCanvas.width = _this._spriteCanvas.width || _this._texture.image.naturalWidth;\r\n            _this._spriteCanvas.height = _this._spriteCanvas.height || _this._texture.image.naturalHeight;\r\n            _this._loadPixels();\r\n            _this._dirtyEffect = true;\r\n        })\r\n            .error(function (e) {\r\n            _this.logger.error('Error loading texture ', _this._texture.path, e);\r\n        });\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    Object.defineProperty(SpriteImpl.prototype, \"drawWidth\", {\r\n        get: function () {\r\n            return this.width * this.scale.x;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpriteImpl.prototype, \"drawHeight\", {\r\n        get: function () {\r\n            return this.height * this.scale.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SpriteImpl.prototype._loadPixels = function () {\r\n        if (this._texture.isLoaded() && !this._pixelsLoaded) {\r\n            var naturalWidth = this._texture.image.naturalWidth || 0;\r\n            var naturalHeight = this._texture.image.naturalHeight || 0;\r\n            if (this.width > naturalWidth) {\r\n                this.logger.warn(\"The sprite width \" + this.width + \" exceeds the width \\n                              \" + naturalWidth + \" of the backing texture \" + this._texture.path);\r\n            }\r\n            if (this.height > naturalHeight) {\r\n                this.logger.warn(\"The sprite height \" + this.height + \" exceeds the height \\n                              \" + naturalHeight + \" of the backing texture \" + this._texture.path);\r\n            }\r\n            this._spriteCtx.drawImage(this._texture.image, clamp(this.x, 0, naturalWidth), clamp(this.y, 0, naturalHeight), clamp(this.width, 0, naturalWidth), clamp(this.height, 0, naturalHeight), 0, 0, this.width, this.height);\r\n            this._pixelsLoaded = true;\r\n        }\r\n    };\r\n    /**\r\n     * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    SpriteImpl.prototype.opacity = function (value) {\r\n        this.addEffect(new Effects.Opacity(value));\r\n    };\r\n    /**\r\n     * Applies the [[Grayscale]] effect to a sprite, removing color information.\r\n     */\r\n    SpriteImpl.prototype.grayscale = function () {\r\n        this.addEffect(new Effects.Grayscale());\r\n    };\r\n    /**\r\n     * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\r\n     */\r\n    SpriteImpl.prototype.invert = function () {\r\n        this.addEffect(new Effects.Invert());\r\n    };\r\n    /**\r\n     * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    SpriteImpl.prototype.fill = function (color) {\r\n        this.addEffect(new Effects.Fill(color));\r\n    };\r\n    /**\r\n     * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\r\n     * and the provided color.\r\n     */\r\n    SpriteImpl.prototype.colorize = function (color) {\r\n        this.addEffect(new Effects.Colorize(color));\r\n    };\r\n    /**\r\n     * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Lighten(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Darken(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Saturate(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Desaturate(factor));\r\n    };\r\n    /**\r\n     * Adds a new [[ISpriteEffect]] to this drawing.\r\n     * @param effect  Effect to add to the this drawing\r\n     */\r\n    SpriteImpl.prototype.addEffect = function (effect) {\r\n        this.effects.push(effect);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    };\r\n    SpriteImpl.prototype.removeEffect = function (param) {\r\n        var indexToRemove = -1;\r\n        if (typeof param === 'number') {\r\n            indexToRemove = param;\r\n        }\r\n        else {\r\n            indexToRemove = this.effects.indexOf(param);\r\n        }\r\n        // bounds check\r\n        if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\r\n            return;\r\n        }\r\n        this.effects.splice(indexToRemove, 1);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    };\r\n    SpriteImpl.prototype._applyEffects = function () {\r\n        var naturalWidth = this._texture.image.naturalWidth || 0;\r\n        var naturalHeight = this._texture.image.naturalHeight || 0;\r\n        this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n        this._spriteCtx.drawImage(this._texture.image, clamp(this.x, 0, naturalWidth), clamp(this.y, 0, naturalHeight), clamp(this.width, 0, naturalWidth), clamp(this.height, 0, naturalHeight), 0, 0, this.width, this.height);\r\n        this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\r\n        var i = 0, x = 0, y = 0, len = this.effects.length;\r\n        for (i; i < len; i++) {\r\n            y = 0;\r\n            for (y; y < this.height; y++) {\r\n                x = 0;\r\n                for (x; x < this.width; x++) {\r\n                    this.effects[i].updatePixel(x, y, this._pixelData);\r\n                }\r\n            }\r\n        }\r\n        this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n        this._spriteCtx.putImageData(this._pixelData, 0, 0);\r\n        this._dirtyEffect = false;\r\n    };\r\n    /**\r\n     * Clears all effects from the drawing and return it to its original state.\r\n     */\r\n    SpriteImpl.prototype.clearEffects = function () {\r\n        this.effects.length = 0;\r\n        this._applyEffects();\r\n    };\r\n    /**\r\n     * Resets the internal state of the drawing (if any)\r\n     */\r\n    SpriteImpl.prototype.reset = function () {\r\n        // do nothing\r\n    };\r\n    SpriteImpl.prototype.debugDraw = function (ctx, x, y) {\r\n        ctx.save();\r\n        ctx.translate(x, y);\r\n        ctx.rotate(this.rotation);\r\n        var xpoint = this.drawWidth * this.anchor.x;\r\n        var ypoint = this.drawHeight * this.anchor.y;\r\n        ctx.strokeStyle = Color.Black.toString();\r\n        ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\r\n     * @param ctx  The 2D rendering context\r\n     * @param x    The x coordinate of where to draw\r\n     * @param y    The y coordinate of where to draw\r\n     */\r\n    SpriteImpl.prototype.draw = function (ctx, x, y) {\r\n        if (this._dirtyEffect) {\r\n            this._applyEffects();\r\n        }\r\n        // calculating current dimensions\r\n        ctx.save();\r\n        var xpoint = this.drawWidth * this.anchor.x;\r\n        var ypoint = this.drawHeight * this.anchor.y;\r\n        ctx.translate(x, y);\r\n        ctx.rotate(this.rotation);\r\n        // todo cache flipped sprites\r\n        if (this.flipHorizontal) {\r\n            ctx.translate(this.drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ctx.translate(0, this.drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        ctx.drawImage(this._spriteCanvas, 0, 0, this.width, this.height, -xpoint, -ypoint, this.drawWidth, this.drawHeight);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Produces a copy of the current sprite\r\n     */\r\n    SpriteImpl.prototype.clone = function () {\r\n        var result = new Sprite(this._texture, this.x, this.y, this.width, this.height);\r\n        result.scale = this.scale.clone();\r\n        result.rotation = this.rotation;\r\n        result.flipHorizontal = this.flipHorizontal;\r\n        result.flipVertical = this.flipVertical;\r\n        var i = 0, len = this.effects.length;\r\n        for (i; i < len; i++) {\r\n            result.addEffect(this.effects[i]);\r\n        }\r\n        return result;\r\n    };\r\n    return SpriteImpl;\r\n}());\r\nexport { SpriteImpl };\r\n/**\r\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\r\n * images or parts of images from a [[Texture]] resource to the screen.\r\n *\r\n * [[include:Sprites.md]]\r\n */\r\nvar Sprite = /** @class */ (function (_super) {\r\n    __extends(Sprite, _super);\r\n    function Sprite(imageOrConfig, x, y, width, height) {\r\n        return _super.call(this, imageOrConfig, x, y, width, height) || this;\r\n    }\r\n    return Sprite;\r\n}(Configurable(SpriteImpl)));\r\nexport { Sprite };\r\n//# sourceMappingURL=Sprite.js.map","/**\r\n * An enum that describes the strategies that rotation actions can use\r\n */\r\nexport var RotationType;\r\n(function (RotationType) {\r\n    /**\r\n     * Rotation via `ShortestPath` will use the smallest angle\r\n     * between the starting and ending points. This strategy is the default behavior.\r\n     */\r\n    RotationType[RotationType[\"ShortestPath\"] = 0] = \"ShortestPath\";\r\n    /**\r\n     * Rotation via `LongestPath` will use the largest angle\r\n     * between the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"LongestPath\"] = 1] = \"LongestPath\";\r\n    /**\r\n     * Rotation via `Clockwise` will travel in a clockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"Clockwise\"] = 2] = \"Clockwise\";\r\n    /**\r\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"CounterClockwise\"] = 3] = \"CounterClockwise\";\r\n})(RotationType || (RotationType = {}));\r\n//# sourceMappingURL=RotationType.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Resource } from './Resource';\r\nimport { Promise } from '../Promises';\r\nimport { Sprite } from '../Drawing/Sprite';\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[ILoadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n *\r\n * [[include:Textures.md]]\r\n */\r\nvar Texture = /** @class */ (function (_super) {\r\n    __extends(Texture, _super);\r\n    /**\r\n     * @param path       Path to the image resource\r\n     * @param bustCache  Optionally load texture with cache busting\r\n     */\r\n    function Texture(path, bustCache) {\r\n        if (bustCache === void 0) { bustCache = true; }\r\n        var _this = _super.call(this, path, 'blob', bustCache) || this;\r\n        _this.path = path;\r\n        _this.bustCache = bustCache;\r\n        /**\r\n         * A [[Promise]] that resolves when the Texture is loaded.\r\n         */\r\n        _this.loaded = new Promise();\r\n        _this._isLoaded = false;\r\n        _this._sprite = null;\r\n        _this._sprite = new Sprite(_this, 0, 0, 0, 0);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns true if the Texture is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    Texture.prototype.isLoaded = function () {\r\n        return this._isLoaded;\r\n    };\r\n    /**\r\n     * Begins loading the texture and returns a promise to be resolved on completion\r\n     */\r\n    Texture.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        var loaded = _super.prototype.load.call(this);\r\n        loaded.then(function () {\r\n            _this.image = new Image();\r\n            _this.image.addEventListener('load', function () {\r\n                _this._isLoaded = true;\r\n                _this.width = _this._sprite.width = _this.image.naturalWidth;\r\n                _this.height = _this._sprite.height = _this.image.naturalHeight;\r\n                _this.loaded.resolve(_this.image);\r\n                complete.resolve(_this.image);\r\n            });\r\n            _this.image.src = _super.prototype.getData.call(_this);\r\n        }, function () {\r\n            complete.reject('Error loading texture.');\r\n        });\r\n        return complete;\r\n    };\r\n    Texture.prototype.asSprite = function () {\r\n        return this._sprite;\r\n    };\r\n    return Texture;\r\n}(Resource));\r\nexport { Texture };\r\n//# sourceMappingURL=Texture.js.map","import { RotationType } from './RotationType';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport * as Util from '../Util/Util';\r\nvar EaseTo = /** @class */ (function () {\r\n    function EaseTo(actor, x, y, duration, easingFcn) {\r\n        this.actor = actor;\r\n        this.easingFcn = easingFcn;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1 * 1000; // 1 second\r\n        this._lerpStart = new Vector(0, 0);\r\n        this._lerpEnd = new Vector(0, 0);\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._distance = 0;\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = new Vector(x, y);\r\n    }\r\n    EaseTo.prototype._initialize = function () {\r\n        this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\r\n        this._currentLerpTime = 0;\r\n        this._distance = this._lerpStart.distance(this._lerpEnd);\r\n    };\r\n    EaseTo.prototype.update = function (delta) {\r\n        if (!this._initialized) {\r\n            this._initialize();\r\n            this._initialized = true;\r\n        }\r\n        var newX = this.actor.pos.x;\r\n        var newY = this.actor.pos.y;\r\n        if (this._currentLerpTime < this._lerpDuration) {\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n                newX =\r\n                    this._lerpStart.x -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            }\r\n            else {\r\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n                newY =\r\n                    this._lerpStart.y -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            }\r\n            else {\r\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            this.actor.pos.x = newX;\r\n            this.actor.pos.y = newY;\r\n            this._currentLerpTime += delta;\r\n        }\r\n        else {\r\n            this.actor.pos.x = this._lerpEnd.x;\r\n            this.actor.pos.y = this._lerpEnd.y;\r\n            //this._lerpStart = null;\r\n            //this._lerpEnd = null;\r\n            //this._currentLerpTime = 0;\r\n        }\r\n    };\r\n    EaseTo.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\r\n    };\r\n    EaseTo.prototype.reset = function () {\r\n        this._initialized = false;\r\n    };\r\n    EaseTo.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    return EaseTo;\r\n}());\r\nexport { EaseTo };\r\nvar MoveTo = /** @class */ (function () {\r\n    function MoveTo(actor, destx, desty, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = new Vector(destx, desty);\r\n        this._speed = speed;\r\n    }\r\n    MoveTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete(this._actor)) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    MoveTo.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\r\n    };\r\n    MoveTo.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    MoveTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return MoveTo;\r\n}());\r\nexport { MoveTo };\r\nvar MoveBy = /** @class */ (function () {\r\n    function MoveBy(actor, destx, desty, time) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = new Vector(destx, desty);\r\n        if (time <= 0) {\r\n            Logger.getInstance().error('Attempted to moveBy time less than or equal to zero : ' + time);\r\n            throw new Error('Cannot move in time <= 0');\r\n        }\r\n        this._time = time;\r\n    }\r\n    MoveBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n            this._speed = this._distance / (this._time / 1000);\r\n        }\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete(this._actor)) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    MoveBy.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\r\n    };\r\n    MoveBy.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    MoveBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return MoveBy;\r\n}());\r\nexport { MoveBy };\r\nvar Follow = /** @class */ (function () {\r\n    function Follow(actor, actorToFollow, followDistance) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actorToFollow = actorToFollow;\r\n        this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n        this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\r\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\r\n        this._speed = 0;\r\n    }\r\n    Follow.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        var actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\r\n        if (actorToFollowSpeed !== 0) {\r\n            this._speed = actorToFollowSpeed;\r\n        }\r\n        this._current.x = this._actor.pos.x;\r\n        this._current.y = this._actor.pos.y;\r\n        this._end.x = this._actorToFollow.pos.x;\r\n        this._end.y = this._actorToFollow.pos.y;\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        if (this._distanceBetween >= this._maximumDistance) {\r\n            var m = this._dir.scale(this._speed);\r\n            this._actor.vel.x = m.x;\r\n            this._actor.vel.y = m.y;\r\n        }\r\n        else {\r\n            this._actor.vel.x = 0;\r\n            this._actor.vel.y = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            // TODO this should never occur\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    Follow.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    Follow.prototype.isComplete = function () {\r\n        // the actor following should never stop unless specified to do so\r\n        return this._stopped;\r\n    };\r\n    Follow.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Follow;\r\n}());\r\nexport { Follow };\r\nvar Meet = /** @class */ (function () {\r\n    function Meet(actor, actorToMeet, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._speedWasSpecified = false;\r\n        this._actor = actor;\r\n        this._actorToMeet = actorToMeet;\r\n        this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n        this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\r\n        this._speed = speed || 0;\r\n        if (speed !== undefined) {\r\n            this._speedWasSpecified = true;\r\n        }\r\n    }\r\n    Meet.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        var actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\r\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\r\n            this._speed = actorToMeetSpeed;\r\n        }\r\n        this._current.x = this._actor.pos.x;\r\n        this._current.y = this._actor.pos.y;\r\n        this._end.x = this._actorToMeet.pos.x;\r\n        this._end.y = this._actorToMeet.pos.y;\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete()) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    Meet.prototype.isComplete = function () {\r\n        return this._stopped || this._distanceBetween <= 1;\r\n    };\r\n    Meet.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    Meet.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Meet;\r\n}());\r\nexport { Meet };\r\nvar RotateTo = /** @class */ (function () {\r\n    function RotateTo(actor, angleRadians, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = angleRadians;\r\n        this._speed = speed;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    RotateTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._actor.rotation;\r\n            var distance1 = Math.abs(this._end - this._start);\r\n            var distance2 = Util.TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (!this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._actor.rx = this._direction * this._speed;\r\n        if (this.isComplete()) {\r\n            this._actor.rotation = this._end;\r\n            this._actor.rx = 0;\r\n            this._stopped = true;\r\n        }\r\n    };\r\n    RotateTo.prototype.isComplete = function () {\r\n        var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    };\r\n    RotateTo.prototype.stop = function () {\r\n        this._actor.rx = 0;\r\n        this._stopped = true;\r\n    };\r\n    RotateTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return RotateTo;\r\n}());\r\nexport { RotateTo };\r\nvar RotateBy = /** @class */ (function () {\r\n    function RotateBy(actor, angleRadians, time, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = angleRadians;\r\n        this._time = time;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    RotateBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._actor.rotation;\r\n            var distance1 = Math.abs(this._end - this._start);\r\n            var distance2 = Util.TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortDistance >= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (this._shortDistance <= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n            this._speed = Math.abs((this._distance / this._time) * 1000);\r\n        }\r\n        this._actor.rx = this._direction * this._speed;\r\n        if (this.isComplete()) {\r\n            this._actor.rotation = this._end;\r\n            this._actor.rx = 0;\r\n            this._stopped = true;\r\n        }\r\n    };\r\n    RotateBy.prototype.isComplete = function () {\r\n        var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    };\r\n    RotateBy.prototype.stop = function () {\r\n        this._actor.rx = 0;\r\n        this._stopped = true;\r\n    };\r\n    RotateBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return RotateBy;\r\n}());\r\nexport { RotateBy };\r\nvar ScaleTo = /** @class */ (function () {\r\n    function ScaleTo(actor, scaleX, scaleY, speedX, speedY) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = speedX;\r\n        this._speedY = speedY;\r\n    }\r\n    ScaleTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._actor.scale.x;\r\n            this._startY = this._actor.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\r\n            var directionX = this._endY < this._startY ? -1 : 1;\r\n            this._actor.sx = this._speedX * directionX;\r\n        }\r\n        else {\r\n            this._actor.sx = 0;\r\n        }\r\n        if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\r\n            var directionY = this._endY < this._startY ? -1 : 1;\r\n            this._actor.sy = this._speedY * directionY;\r\n        }\r\n        else {\r\n            this._actor.sy = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._actor.scale.x = this._endX;\r\n            this._actor.scale.y = this._endY;\r\n            this._actor.sx = 0;\r\n            this._actor.sy = 0;\r\n        }\r\n    };\r\n    ScaleTo.prototype.isComplete = function () {\r\n        return (this._stopped ||\r\n            (Math.abs(this._actor.scale.y - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n    };\r\n    ScaleTo.prototype.stop = function () {\r\n        this._actor.sx = 0;\r\n        this._actor.sy = 0;\r\n        this._stopped = true;\r\n    };\r\n    ScaleTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return ScaleTo;\r\n}());\r\nexport { ScaleTo };\r\nvar ScaleBy = /** @class */ (function () {\r\n    function ScaleBy(actor, scaleX, scaleY, time) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = ((this._endX - this._actor.scale.x) / time) * 1000;\r\n        this._speedY = ((this._endY - this._actor.scale.y) / time) * 1000;\r\n    }\r\n    ScaleBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._actor.scale.x;\r\n            this._startY = this._actor.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        var directionX = this._endX < this._startX ? -1 : 1;\r\n        var directionY = this._endY < this._startY ? -1 : 1;\r\n        this._actor.sx = this._speedX * directionX;\r\n        this._actor.sy = this._speedY * directionY;\r\n        if (this.isComplete()) {\r\n            this._actor.scale.x = this._endX;\r\n            this._actor.scale.y = this._endY;\r\n            this._actor.sx = 0;\r\n            this._actor.sy = 0;\r\n        }\r\n    };\r\n    ScaleBy.prototype.isComplete = function () {\r\n        return (this._stopped ||\r\n            (Math.abs(this._actor.scale.x - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n    };\r\n    ScaleBy.prototype.stop = function () {\r\n        this._actor.sx = 0;\r\n        this._actor.sy = 0;\r\n        this._stopped = true;\r\n    };\r\n    ScaleBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return ScaleBy;\r\n}());\r\nexport { ScaleBy };\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(actor, delay) {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._delay = delay;\r\n    }\r\n    Delay.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        this._elapsedTime += delta;\r\n    };\r\n    Delay.prototype.isComplete = function () {\r\n        return this._stopped || this._elapsedTime >= this._delay;\r\n    };\r\n    Delay.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Delay.prototype.reset = function () {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n    };\r\n    return Delay;\r\n}());\r\nexport { Delay };\r\nvar Blink = /** @class */ (function () {\r\n    function Blink(actor, timeVisible, timeNotVisible, numBlinks) {\r\n        if (numBlinks === void 0) { numBlinks = 1; }\r\n        this._timeVisible = 0;\r\n        this._timeNotVisible = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n        this._stopped = false;\r\n        this._started = false;\r\n        this._actor = actor;\r\n        this._timeVisible = timeVisible;\r\n        this._timeNotVisible = timeNotVisible;\r\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\r\n    }\r\n    Blink.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this._elapsedTime += delta;\r\n        this._totalTime += delta;\r\n        if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\r\n            this._actor.visible = false;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\r\n            this._actor.visible = true;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._actor.visible = true;\r\n        }\r\n    };\r\n    Blink.prototype.isComplete = function () {\r\n        return this._stopped || this._totalTime >= this._duration;\r\n    };\r\n    Blink.prototype.stop = function () {\r\n        this._actor.visible = true;\r\n        this._stopped = true;\r\n    };\r\n    Blink.prototype.reset = function () {\r\n        this._started = false;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n    };\r\n    return Blink;\r\n}());\r\nexport { Blink };\r\nvar Fade = /** @class */ (function () {\r\n    function Fade(actor, endOpacity, speed) {\r\n        this._multiplier = 1;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endOpacity = endOpacity;\r\n        this._speed = speed;\r\n    }\r\n    Fade.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            // determine direction when we start\r\n            if (this._endOpacity < this._actor.opacity) {\r\n                this._multiplier = -1;\r\n            }\r\n            else {\r\n                this._multiplier = 1;\r\n            }\r\n        }\r\n        if (this._speed > 0) {\r\n            this._actor.opacity += (this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta)) / this._speed;\r\n        }\r\n        this._speed -= delta;\r\n        if (this.isComplete()) {\r\n            this._actor.opacity = this._endOpacity;\r\n        }\r\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\r\n    };\r\n    Fade.prototype.isComplete = function () {\r\n        return this._stopped || Math.abs(this._actor.opacity - this._endOpacity) < 0.05;\r\n    };\r\n    Fade.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Fade.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Fade;\r\n}());\r\nexport { Fade };\r\nvar Die = /** @class */ (function () {\r\n    function Die(actor) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n    }\r\n    Die.prototype.update = function (_delta) {\r\n        this._actor.actionQueue.clearActions();\r\n        this._actor.kill();\r\n        this._stopped = true;\r\n    };\r\n    Die.prototype.isComplete = function () {\r\n        return this._stopped;\r\n    };\r\n    Die.prototype.stop = function () {\r\n        return;\r\n    };\r\n    Die.prototype.reset = function () {\r\n        return;\r\n    };\r\n    return Die;\r\n}());\r\nexport { Die };\r\nvar CallMethod = /** @class */ (function () {\r\n    function CallMethod(actor, method) {\r\n        this._method = null;\r\n        this._actor = null;\r\n        this._hasBeenCalled = false;\r\n        this._actor = actor;\r\n        this._method = method;\r\n    }\r\n    CallMethod.prototype.update = function (_delta) {\r\n        this._method.call(this._actor);\r\n        this._hasBeenCalled = true;\r\n    };\r\n    CallMethod.prototype.isComplete = function () {\r\n        return this._hasBeenCalled;\r\n    };\r\n    CallMethod.prototype.reset = function () {\r\n        this._hasBeenCalled = false;\r\n    };\r\n    CallMethod.prototype.stop = function () {\r\n        this._hasBeenCalled = true;\r\n    };\r\n    return CallMethod;\r\n}());\r\nexport { CallMethod };\r\nvar Repeat = /** @class */ (function () {\r\n    function Repeat(actor, repeat, actions) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actionQueue = new ActionQueue(actor);\r\n        this._repeat = repeat;\r\n        this._originalRepeat = repeat;\r\n        var i = 0, len = actions.length;\r\n        for (i; i < len; i++) {\r\n            actions[i].reset();\r\n            this._actionQueue.add(actions[i]);\r\n        }\r\n    }\r\n    Repeat.prototype.update = function (delta) {\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        if (!this._actionQueue.hasNext()) {\r\n            this._actionQueue.reset();\r\n            this._repeat--;\r\n        }\r\n        this._actionQueue.update(delta);\r\n    };\r\n    Repeat.prototype.isComplete = function () {\r\n        return this._stopped || this._repeat <= 0;\r\n    };\r\n    Repeat.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Repeat.prototype.reset = function () {\r\n        this._repeat = this._originalRepeat;\r\n    };\r\n    return Repeat;\r\n}());\r\nexport { Repeat };\r\nvar RepeatForever = /** @class */ (function () {\r\n    function RepeatForever(actor, actions) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actionQueue = new ActionQueue(actor);\r\n        var i = 0, len = actions.length;\r\n        for (i; i < len; i++) {\r\n            actions[i].reset();\r\n            this._actionQueue.add(actions[i]);\r\n        }\r\n    }\r\n    RepeatForever.prototype.update = function (delta) {\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        if (this._stopped) {\r\n            return;\r\n        }\r\n        if (!this._actionQueue.hasNext()) {\r\n            this._actionQueue.reset();\r\n        }\r\n        this._actionQueue.update(delta);\r\n    };\r\n    RepeatForever.prototype.isComplete = function () {\r\n        return this._stopped;\r\n    };\r\n    RepeatForever.prototype.stop = function () {\r\n        this._stopped = true;\r\n        this._actionQueue.clearActions();\r\n    };\r\n    RepeatForever.prototype.reset = function () {\r\n        return;\r\n    };\r\n    return RepeatForever;\r\n}());\r\nexport { RepeatForever };\r\n/**\r\n * Action Queues\r\n *\r\n * Action queues are part of the [[ActionContext|Action API]] and\r\n * store the list of actions to be executed for an [[Actor]].\r\n *\r\n * Actors implement [[Actor.actions]] which can be manipulated by\r\n * advanced users to adjust the actions currently being executed in the\r\n * queue.\r\n */\r\nvar ActionQueue = /** @class */ (function () {\r\n    function ActionQueue(actor) {\r\n        this._actions = [];\r\n        this._completedActions = [];\r\n        this._actor = actor;\r\n    }\r\n    ActionQueue.prototype.add = function (action) {\r\n        this._actions.push(action);\r\n    };\r\n    ActionQueue.prototype.remove = function (action) {\r\n        var index = this._actions.indexOf(action);\r\n        this._actions.splice(index, 1);\r\n    };\r\n    ActionQueue.prototype.clearActions = function () {\r\n        this._actions.length = 0;\r\n        this._completedActions.length = 0;\r\n        if (this._currentAction) {\r\n            this._currentAction.stop();\r\n        }\r\n    };\r\n    ActionQueue.prototype.getActions = function () {\r\n        return this._actions.concat(this._completedActions);\r\n    };\r\n    ActionQueue.prototype.hasNext = function () {\r\n        return this._actions.length > 0;\r\n    };\r\n    ActionQueue.prototype.reset = function () {\r\n        this._actions = this.getActions();\r\n        var i = 0, len = this._actions.length;\r\n        for (i; i < len; i++) {\r\n            this._actions[i].reset();\r\n        }\r\n        this._completedActions = [];\r\n    };\r\n    ActionQueue.prototype.update = function (delta) {\r\n        if (this._actions.length > 0) {\r\n            this._currentAction = this._actions[0];\r\n            this._currentAction.update(delta);\r\n            if (this._currentAction.isComplete(this._actor)) {\r\n                this._completedActions.push(this._actions.shift());\r\n            }\r\n        }\r\n    };\r\n    return ActionQueue;\r\n}());\r\nexport { ActionQueue };\r\n//# sourceMappingURL=Action.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Physics } from './Physics';\r\nimport { Class } from './Class';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\nimport { Texture } from './Resources/Texture';\r\nimport { InitializeEvent, KillEvent, PreUpdateEvent, PreDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent, PostKillEvent, PreKillEvent } from './Events';\r\nimport { Color } from './Drawing/Color';\r\nimport { Sprite } from './Drawing/Sprite';\r\nimport { Logger } from './Util/Log';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { Vector } from './Algebra';\r\nimport { Body } from './Collision/Body';\r\nimport { Side } from './Collision/Side';\r\nimport { Configurable } from './Configurable';\r\nimport * as Traits from './Traits/Index';\r\nimport * as Effects from './Drawing/SpriteEffects';\r\nimport * as Util from './Util/Util';\r\n/**\r\n * @hidden\r\n */\r\nvar ActorImpl = /** @class */ (function (_super) {\r\n    __extends(ActorImpl, _super);\r\n    // #endregion\r\n    /**\r\n     * @param x       The starting x coordinate of the actor\r\n     * @param y       The starting y coordinate of the actor\r\n     * @param width   The starting width of the actor\r\n     * @param height  The starting height of the actor\r\n     * @param color   The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\r\n     * initial [[opacity]].\r\n     */\r\n    function ActorImpl(xOrConfig, y, width, height, color) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * The unique identifier for the actor\r\n         */\r\n        _this.id = ActorImpl.maxId++;\r\n        /**\r\n         * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\r\n         * acceleration, mass, inertia, etc.\r\n         */\r\n        _this.body = new Body(_this);\r\n        /**\r\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n         */\r\n        _this.oldAcc = Vector.Zero.clone();\r\n        _this._height = 0;\r\n        _this._width = 0;\r\n        /**\r\n         * The scale vector of the actor\r\n         */\r\n        _this.scale = Vector.One.clone();\r\n        /**\r\n         * The scale of the actor last frame\r\n         */\r\n        _this.oldScale = Vector.One.clone();\r\n        /**\r\n         * The x scalar velocity of the actor in scale/second\r\n         */\r\n        _this.sx = 0; //scale/sec\r\n        /**\r\n         * The y scalar velocity of the actor in scale/second\r\n         */\r\n        _this.sy = 0; //scale/sec\r\n        /**\r\n         * Indicates whether the actor is physically in the viewport\r\n         */\r\n        _this.isOffScreen = false;\r\n        /**\r\n         * The visibility of an actor\r\n         */\r\n        _this.visible = true;\r\n        /**\r\n         * The opacity of an actor. Passing in a color in the [[constructor]] will use the\r\n         * color's opacity.\r\n         */\r\n        _this.opacity = 1;\r\n        _this.previousOpacity = 1;\r\n        /**\r\n         * Convenience reference to the global logger\r\n         */\r\n        _this.logger = Logger.getInstance();\r\n        /**\r\n         * The scene that the actor is in\r\n         */\r\n        _this.scene = null;\r\n        /**\r\n         * The parent of this actor\r\n         */\r\n        _this.parent = null;\r\n        // TODO: Replace this with the new actor collection once z-indexing is built\r\n        /**\r\n         * The children of this actor\r\n         */\r\n        _this.children = [];\r\n        /**\r\n         * Gets or sets the current collision type of this actor. By\r\n         * default it is ([[CollisionType.PreventCollision]]).\r\n         */\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.collisionGroups = [];\r\n        /**\r\n         * Flag to be set when any property change would result in a geometry recalculation\r\n         * @internal\r\n         */\r\n        _this._geometryDirty = false;\r\n        _this._collisionHandlers = {};\r\n        _this._isInitialized = false;\r\n        _this.frames = {};\r\n        _this._effectsDirty = false;\r\n        /**\r\n         * Access to the current drawing for the actor, this can be\r\n         * an [[Animation]], [[Sprite]], or [[Polygon]].\r\n         * Set drawings with [[setDrawing]].\r\n         */\r\n        _this.currentDrawing = null;\r\n        /**\r\n         * Modify the current actor update pipeline.\r\n         */\r\n        _this.traits = [];\r\n        /**\r\n         * Whether or not to enable the [[CapturePointer]] trait that propagates\r\n         * pointer events to this actor\r\n         */\r\n        _this.enableCapturePointer = false;\r\n        /**\r\n         * Configuration for [[CapturePointer]] trait\r\n         */\r\n        _this.capturePointer = {\r\n            captureMoveEvents: false,\r\n            captureDragEvents: false\r\n        };\r\n        _this._zIndex = 0;\r\n        _this._isKilled = false;\r\n        _this._opacityFx = new Effects.Opacity(_this.opacity);\r\n        // #region Events\r\n        _this._capturePointerEvents = [\r\n            'pointerup',\r\n            'pointerdown',\r\n            'pointermove',\r\n            'pointerenter',\r\n            'pointerleave',\r\n            'pointerdragstart',\r\n            'pointerdragend',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        _this._captureMoveEvents = [\r\n            'pointermove',\r\n            'pointerenter',\r\n            'pointerleave',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        _this._captureDragEvents = [\r\n            'pointerdragstart',\r\n            'pointerdragend',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.pos ? config.pos.x : config.x;\r\n            y = config.pos ? config.pos.y : config.y;\r\n            width = config.width;\r\n            height = config.height;\r\n        }\r\n        _this.pos.x = xOrConfig || 0;\r\n        _this.pos.y = y || 0;\r\n        _this._width = width || 0;\r\n        _this._height = height || 0;\r\n        if (color) {\r\n            _this.color = color;\r\n            // set default opacity of an actor to the color\r\n            _this.opacity = color.a;\r\n        }\r\n        // Build default pipeline\r\n        //this.traits.push(new ex.Traits.EulerMovement());\r\n        // TODO: TileMaps should be converted to a collision area\r\n        _this.traits.push(new Traits.TileMapCollisionDetection());\r\n        _this.traits.push(new Traits.OffscreenCulling());\r\n        _this.traits.push(new Traits.CapturePointer());\r\n        // Build the action queue\r\n        _this.actionQueue = new ActionQueue(_this);\r\n        _this.actions = new ActionContext(_this);\r\n        // initialize default options\r\n        _this._initDefaults();\r\n        // Initialize default collision area to be box\r\n        _this.body.useBoxCollision();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ActorImpl.prototype, \"collisionArea\", {\r\n        /**\r\n         * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and\r\n         * [EdgeArea|edges].\r\n         */\r\n        get: function () {\r\n            return this.body.collisionArea;\r\n        },\r\n        /**\r\n         * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and\r\n         * [EdgeArea|edges].\r\n         */\r\n        set: function (area) {\r\n            this.body.collisionArea = area;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"x\", {\r\n        /**\r\n         * Gets the x position of the actor relative to it's parent (if any)\r\n         */\r\n        get: function () {\r\n            return this.body.pos.x;\r\n        },\r\n        /**\r\n         * Sets the x position of the actor relative to it's parent (if any)\r\n         */\r\n        set: function (theX) {\r\n            this.body.pos.x = theX;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"y\", {\r\n        /**\r\n         * Gets the y position of the actor relative to it's parent (if any)\r\n         */\r\n        get: function () {\r\n            return this.body.pos.y;\r\n        },\r\n        /**\r\n         * Sets the y position of the actor relative to it's parent (if any)\r\n         */\r\n        set: function (theY) {\r\n            this.body.pos.y = theY;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"pos\", {\r\n        /**\r\n         * Gets the position vector of the actor in pixels\r\n         */\r\n        get: function () {\r\n            return this.body.pos;\r\n        },\r\n        /**\r\n         * Sets the position vector of the actor in pixels\r\n         */\r\n        set: function (thePos) {\r\n            this.body.pos.setTo(thePos.x, thePos.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"oldPos\", {\r\n        /**\r\n         * Gets the position vector of the actor from the last frame\r\n         */\r\n        get: function () {\r\n            return this.body.oldPos;\r\n        },\r\n        /**\r\n         * Sets the position vector of the actor in the last frame\r\n         */\r\n        set: function (thePos) {\r\n            this.body.oldPos.setTo(thePos.x, thePos.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"vel\", {\r\n        /**\r\n         * Gets the velocity vector of the actor in pixels/sec\r\n         */\r\n        get: function () {\r\n            return this.body.vel;\r\n        },\r\n        /**\r\n         * Sets the velocity vector of the actor in pixels/sec\r\n         */\r\n        set: function (theVel) {\r\n            this.body.vel.setTo(theVel.x, theVel.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"oldVel\", {\r\n        /**\r\n         * Gets the velocity vector of the actor from the last frame\r\n         */\r\n        get: function () {\r\n            return this.body.oldVel;\r\n        },\r\n        /**\r\n         * Sets the velocity vector of the actor from the last frame\r\n         */\r\n        set: function (theVel) {\r\n            this.body.oldVel.setTo(theVel.x, theVel.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"acc\", {\r\n        /**\r\n         * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\r\n         * useful to simulate a gravitational effect.\r\n         */\r\n        get: function () {\r\n            return this.body.acc;\r\n        },\r\n        /**\r\n         * Sets the acceleration vector of teh actor in pixels/second/second\r\n         */\r\n        set: function (theAcc) {\r\n            this.body.acc.setTo(theAcc.x, theAcc.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"rotation\", {\r\n        /**\r\n         * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n         */\r\n        get: function () {\r\n            return this.body.rotation;\r\n        },\r\n        /**\r\n         * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n         */\r\n        set: function (theAngle) {\r\n            this.body.rotation = theAngle;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"rx\", {\r\n        /**\r\n         * Gets the rotational velocity of the actor in radians/second\r\n         */\r\n        get: function () {\r\n            return this.body.rx;\r\n        },\r\n        /**\r\n         * Sets the rotational velocity of the actor in radians/sec\r\n         */\r\n        set: function (angularVelocity) {\r\n            this.body.rx = angularVelocity;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"torque\", {\r\n        /**\r\n         * Gets the current torque applied to the actor. Torque can be thought of as rotational force\r\n         */\r\n        get: function () {\r\n            return this.body.torque;\r\n        },\r\n        /**\r\n         * Sets the current torque applied to the actor. Torque can be thought of as rotational force\r\n         */\r\n        set: function (theTorque) {\r\n            this.body.torque = theTorque;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"mass\", {\r\n        /**\r\n         * Get the current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        get: function () {\r\n            return this.body.mass;\r\n        },\r\n        /**\r\n         * Sets the mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        set: function (theMass) {\r\n            this.body.mass = theMass;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"moi\", {\r\n        /**\r\n         * Gets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        get: function () {\r\n            return this.body.moi;\r\n        },\r\n        /**\r\n         * Sets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        set: function (theMoi) {\r\n            this.body.moi = theMoi;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"friction\", {\r\n        /**\r\n         * Gets the coefficient of friction on this actor, this can be thought of as how sticky or slippery an object is.\r\n         */\r\n        get: function () {\r\n            return this.body.friction;\r\n        },\r\n        /**\r\n         * Sets the coefficient of friction of this actor, this can ve thought of as how stick or slippery an object is.\r\n         */\r\n        set: function (theFriction) {\r\n            this.body.friction = theFriction;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"restitution\", {\r\n        /**\r\n         * Gets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this\r\n         * as bounciness.\r\n         */\r\n        get: function () {\r\n            return this.body.restitution;\r\n        },\r\n        /**\r\n         * Sets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this\r\n         * as bounciness.\r\n         */\r\n        set: function (theRestitution) {\r\n            this.body.restitution = theRestitution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"color\", {\r\n        /**\r\n         * Sets the color of the actor. A rectangle of this color will be\r\n         * drawn if no [[IDrawable]] is specified as the actors drawing.\r\n         *\r\n         * The default is `null` which prevents a rectangle from being drawn.\r\n         */\r\n        get: function () {\r\n            return this._color;\r\n        },\r\n        set: function (v) {\r\n            this._color = v.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    ActorImpl.prototype.onInitialize = function (_engine) {\r\n        // Override me\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets wether the actor is Initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._initialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\r\n            var child = _a[_i];\r\n            child._initialize(engine);\r\n        }\r\n    };\r\n    ActorImpl.prototype._initDefaults = function () {\r\n        this.anchor = Actor.defaults.anchor.clone();\r\n    };\r\n    ActorImpl.prototype._checkForPointerOptIn = function (eventName) {\r\n        if (eventName) {\r\n            var normalized = eventName.toLowerCase();\r\n            if (this._capturePointerEvents.indexOf(normalized) !== -1) {\r\n                this.enableCapturePointer = true;\r\n                if (this._captureMoveEvents.indexOf(normalized) !== -1) {\r\n                    this.capturePointer.captureMoveEvents = true;\r\n                }\r\n                if (this._captureDragEvents.indexOf(normalized) !== -1) {\r\n                    this.capturePointer.captureDragEvents = true;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActorImpl.prototype.on = function (eventName, handler) {\r\n        this._checkForPointerOptIn(eventName);\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    ActorImpl.prototype.once = function (eventName, handler) {\r\n        this._checkForPointerOptIn(eventName);\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    ActorImpl.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    // #endregion\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPreKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._prekill = function (_scene) {\r\n        _super.prototype.emit.call(this, 'prekill', new PreKillEvent(this));\r\n        this.onPreKill(_scene);\r\n    };\r\n    /**\r\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\r\n     *\r\n     * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\r\n     */\r\n    ActorImpl.prototype.onPreKill = function (_scene) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPostKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postkill = function (_scene) {\r\n        _super.prototype.emit.call(this, 'postkill', new PostKillEvent(this));\r\n        this.onPostKill(_scene);\r\n    };\r\n    /**\r\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\r\n     *\r\n     * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\r\n     */\r\n    ActorImpl.prototype.onPostKill = function (_scene) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * If the current actor is a member of the scene, this will remove\r\n     * it from the scene graph. It will no longer be drawn or updated.\r\n     */\r\n    ActorImpl.prototype.kill = function () {\r\n        if (this.scene) {\r\n            this._prekill(this.scene);\r\n            this.emit('kill', new KillEvent(this));\r\n            this._isKilled = true;\r\n            this.scene.remove(this);\r\n            this._postkill(this.scene);\r\n        }\r\n        else {\r\n            this.logger.warn('Cannot kill actor, it was never added to the Scene');\r\n        }\r\n    };\r\n    /**\r\n     * If the current actor is killed, it will now not be killed.\r\n     */\r\n    ActorImpl.prototype.unkill = function () {\r\n        this._isKilled = false;\r\n    };\r\n    /**\r\n     * Indicates wether the actor has been killed.\r\n     */\r\n    ActorImpl.prototype.isKilled = function () {\r\n        return this._isKilled;\r\n    };\r\n    /**\r\n     * Adds a child actor to this actor. All movement of the child actor will be\r\n     * relative to the parent actor. Meaning if the parent moves the child will\r\n     * move with it.\r\n     * @param actor The child actor to add\r\n     */\r\n    ActorImpl.prototype.add = function (actor) {\r\n        actor.collisionType = CollisionType.PreventCollision;\r\n        if (Util.addItemToArray(actor, this.children)) {\r\n            actor.parent = this;\r\n        }\r\n    };\r\n    /**\r\n     * Removes a child actor from this actor.\r\n     * @param actor The child actor to remove\r\n     */\r\n    ActorImpl.prototype.remove = function (actor) {\r\n        if (Util.removeItemFromArray(actor, this.children)) {\r\n            actor.parent = null;\r\n        }\r\n    };\r\n    ActorImpl.prototype.setDrawing = function (key) {\r\n        key = key.toString();\r\n        if (this.currentDrawing !== this.frames[key]) {\r\n            if (this.frames[key] != null) {\r\n                this.frames[key].reset();\r\n                this.currentDrawing = this.frames[key];\r\n            }\r\n            else {\r\n                Logger.getInstance().error(\"the specified drawing key \" + key + \" does not exist\");\r\n            }\r\n        }\r\n    };\r\n    ActorImpl.prototype.addDrawing = function () {\r\n        if (arguments.length === 2) {\r\n            this.frames[arguments[0]] = arguments[1];\r\n            if (!this.currentDrawing) {\r\n                this.currentDrawing = arguments[1];\r\n            }\r\n            this._effectsDirty = true;\r\n        }\r\n        else {\r\n            if (arguments[0] instanceof Sprite) {\r\n                this.addDrawing('default', arguments[0]);\r\n            }\r\n            if (arguments[0] instanceof Texture) {\r\n                this.addDrawing('default', arguments[0].asSprite());\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"z\", {\r\n        get: function () {\r\n            return this.getZIndex();\r\n        },\r\n        set: function (newZ) {\r\n            this.setZIndex(newZ);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     */\r\n    ActorImpl.prototype.getZIndex = function () {\r\n        return this._zIndex;\r\n    };\r\n    /**\r\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\r\n     * The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     * @param newIndex new z-index to assign\r\n     */\r\n    ActorImpl.prototype.setZIndex = function (newIndex) {\r\n        this.scene.cleanupDrawTree(this);\r\n        this._zIndex = newIndex;\r\n        this.scene.updateDrawTree(this);\r\n    };\r\n    /**\r\n     * Adds an actor to a collision group. Actors with no named collision groups are\r\n     * considered to be in every collision group.\r\n     *\r\n     * Once in a collision group(s) actors will only collide with other actors in\r\n     * that group.\r\n     *\r\n     * @param name The name of the collision group\r\n     */\r\n    ActorImpl.prototype.addCollisionGroup = function (name) {\r\n        this.collisionGroups.push(name);\r\n    };\r\n    /**\r\n     * Removes an actor from a collision group.\r\n     * @param name The name of the collision group\r\n     */\r\n    ActorImpl.prototype.removeCollisionGroup = function (name) {\r\n        var index = this.collisionGroups.indexOf(name);\r\n        if (index !== -1) {\r\n            this.collisionGroups.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Get the center point of an actor\r\n     */\r\n    ActorImpl.prototype.getCenter = function () {\r\n        return new Vector(this.pos.x + this.getWidth() / 2 - this.anchor.x * this.getWidth(), this.pos.y + this.getHeight() / 2 - this.anchor.y * this.getHeight());\r\n    };\r\n    /**\r\n     * Gets the calculated width of an actor, factoring in scale\r\n     */\r\n    ActorImpl.prototype.getWidth = function () {\r\n        return this._width * this.getGlobalScale().x;\r\n    };\r\n    /**\r\n     * Sets the width of an actor, factoring in the current scale\r\n     */\r\n    ActorImpl.prototype.setWidth = function (width) {\r\n        this._width = width / this.scale.x;\r\n        this._geometryDirty = true;\r\n    };\r\n    /**\r\n     * Gets the calculated height of an actor, factoring in scale\r\n     */\r\n    ActorImpl.prototype.getHeight = function () {\r\n        return this._height * this.getGlobalScale().y;\r\n    };\r\n    /**\r\n     * Sets the height of an actor, factoring in the current scale\r\n     */\r\n    ActorImpl.prototype.setHeight = function (height) {\r\n        this._height = height / this.scale.y;\r\n        this._geometryDirty = true;\r\n    };\r\n    /**\r\n     * Gets the left edge of the actor\r\n     */\r\n    ActorImpl.prototype.getLeft = function () {\r\n        return this.getBounds().left;\r\n    };\r\n    /**\r\n     * Gets the right edge of the actor\r\n     */\r\n    ActorImpl.prototype.getRight = function () {\r\n        return this.getBounds().right;\r\n    };\r\n    /**\r\n     * Gets the top edge of the actor\r\n     */\r\n    ActorImpl.prototype.getTop = function () {\r\n        return this.getBounds().top;\r\n    };\r\n    /**\r\n     * Gets the bottom edge of the actor\r\n     */\r\n    ActorImpl.prototype.getBottom = function () {\r\n        return this.getBounds().bottom;\r\n    };\r\n    /**\r\n     * Gets this actor's rotation taking into account any parent relationships\r\n     *\r\n     * @returns Rotation angle in radians\r\n     */\r\n    ActorImpl.prototype.getWorldRotation = function () {\r\n        if (!this.parent) {\r\n            return this.rotation;\r\n        }\r\n        return this.rotation + this.parent.getWorldRotation();\r\n    };\r\n    /**\r\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\r\n     *\r\n     * @returns Position in world coordinates\r\n     */\r\n    ActorImpl.prototype.getWorldPos = function () {\r\n        if (!this.parent) {\r\n            return this.pos.clone();\r\n        }\r\n        // collect parents\r\n        var parents = [];\r\n        var root = this;\r\n        parents.push(this);\r\n        // find parents\r\n        while (root.parent) {\r\n            root = root.parent;\r\n            parents.push(root);\r\n        }\r\n        // calculate position\r\n        var x = parents.reduceRight(function (px, p) {\r\n            if (p.parent) {\r\n                return px + p.pos.x * p.getGlobalScale().x;\r\n            }\r\n            return px + p.pos.x;\r\n        }, 0);\r\n        var y = parents.reduceRight(function (py, p) {\r\n            if (p.parent) {\r\n                return py + p.pos.y * p.getGlobalScale().y;\r\n            }\r\n            return py + p.pos.y;\r\n        }, 0);\r\n        // rotate around root anchor\r\n        var ra = root.getWorldPos(); // 10, 10\r\n        var r = this.getWorldRotation();\r\n        return new Vector(x, y).rotate(r, ra);\r\n    };\r\n    /**\r\n     * Gets the global scale of the Actor\r\n     */\r\n    ActorImpl.prototype.getGlobalScale = function () {\r\n        if (!this.parent) {\r\n            return new Vector(this.scale.x, this.scale.y);\r\n        }\r\n        var parentScale = this.parent.getGlobalScale();\r\n        return new Vector(this.scale.x * parentScale.x, this.scale.y * parentScale.y);\r\n    };\r\n    // #region Collision\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] calculated for this instant in world space.\r\n     */\r\n    ActorImpl.prototype.getBounds = function (rotated) {\r\n        if (rotated === void 0) { rotated = true; }\r\n        // todo cache bounding box\r\n        var anchor = this._getCalculatedAnchor();\r\n        var pos = this.getWorldPos();\r\n        var bb = new BoundingBox(pos.x - anchor.x, pos.y - anchor.y, pos.x + this.getWidth() - anchor.x, pos.y + this.getHeight() - anchor.y);\r\n        return rotated ? bb.rotate(this.rotation, pos) : bb;\r\n    };\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] relative to the actor's position.\r\n     */\r\n    ActorImpl.prototype.getRelativeBounds = function (rotated) {\r\n        if (rotated === void 0) { rotated = true; }\r\n        // todo cache bounding box\r\n        var anchor = this._getCalculatedAnchor();\r\n        var bb = new BoundingBox(-anchor.x, -anchor.y, this.getWidth() - anchor.x, this.getHeight() - anchor.y);\r\n        return rotated ? bb.rotate(this.rotation) : bb;\r\n    };\r\n    /**\r\n     * Returns the actors unrotated geometry in world coordinates\r\n     */\r\n    ActorImpl.prototype.getGeometry = function () {\r\n        return this.getBounds(false).getPoints();\r\n    };\r\n    /**\r\n     * Return the actor's unrotated geometry relative to the actor's position\r\n     */\r\n    ActorImpl.prototype.getRelativeGeometry = function () {\r\n        return this.getRelativeBounds(false).getPoints();\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"isGeometryDirty\", {\r\n        /**\r\n         * Indicates that the actor's collision geometry needs to be recalculated for accurate collisions\r\n         */\r\n        get: function () {\r\n            return this._geometryDirty;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Tests whether the x/y specified are contained in the actor\r\n     * @param x  X coordinate to test (in world coordinates)\r\n     * @param y  Y coordinate to test (in world coordinates)\r\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\r\n     */\r\n    ActorImpl.prototype.contains = function (x, y, recurse) {\r\n        if (recurse === void 0) { recurse = false; }\r\n        var containment = this.getBounds().contains(new Vector(x, y));\r\n        if (recurse) {\r\n            return (containment ||\r\n                this.children.some(function (child) {\r\n                    return child.contains(x, y, true);\r\n                }));\r\n        }\r\n        return containment;\r\n    };\r\n    /**\r\n     * Returns the side of the collision based on the intersection\r\n     * @param intersect The displacement vector returned by a collision\r\n     */\r\n    ActorImpl.prototype.getSideFromIntersect = function (intersect) {\r\n        if (intersect) {\r\n            if (Math.abs(intersect.x) > Math.abs(intersect.y)) {\r\n                if (intersect.x < 0) {\r\n                    return Side.Right;\r\n                }\r\n                return Side.Left;\r\n            }\r\n            else {\r\n                if (intersect.y < 0) {\r\n                    return Side.Bottom;\r\n                }\r\n                return Side.Top;\r\n            }\r\n        }\r\n        return Side.None;\r\n    };\r\n    /**\r\n     * Test whether the actor has collided with another actor, returns the side of the current actor that collided.\r\n     * @param actor The other actor to test\r\n     */\r\n    ActorImpl.prototype.collidesWithSide = function (actor) {\r\n        var separationVector = this.collides(actor);\r\n        if (!separationVector) {\r\n            return Side.None;\r\n        }\r\n        if (Math.abs(separationVector.x) > Math.abs(separationVector.y)) {\r\n            if (this.pos.x < actor.pos.x) {\r\n                return Side.Right;\r\n            }\r\n            else {\r\n                return Side.Left;\r\n            }\r\n        }\r\n        else {\r\n            if (this.pos.y < actor.pos.y) {\r\n                return Side.Bottom;\r\n            }\r\n            else {\r\n                return Side.Top;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Test whether the actor has collided with another actor, returns the intersection vector on collision. Returns\r\n     * `null` when there is no collision;\r\n     * @param actor The other actor to test\r\n     */\r\n    ActorImpl.prototype.collides = function (actor) {\r\n        var bounds = this.getBounds();\r\n        var otherBounds = actor.getBounds();\r\n        var intersect = bounds.collides(otherBounds);\r\n        return intersect;\r\n    };\r\n    /**\r\n     * Register a handler to fire when this actor collides with another in a specified group\r\n     * @param group The group name to listen for\r\n     * @param func The callback to fire on collision with another actor from the group. The callback is passed the other actor.\r\n     */\r\n    ActorImpl.prototype.onCollidesWith = function (group, func) {\r\n        if (!this._collisionHandlers[group]) {\r\n            this._collisionHandlers[group] = [];\r\n        }\r\n        this._collisionHandlers[group].push(func);\r\n    };\r\n    ActorImpl.prototype.getCollisionHandlers = function () {\r\n        return this._collisionHandlers;\r\n    };\r\n    /**\r\n     * Removes all collision handlers for this group on this actor\r\n     * @param group Group to remove all handlers for on this actor.\r\n     */\r\n    ActorImpl.prototype.removeCollidesWith = function (group) {\r\n        this._collisionHandlers[group] = [];\r\n    };\r\n    /**\r\n     * Returns true if the two actors are less than or equal to the distance specified from each other\r\n     * @param actor     Actor to test\r\n     * @param distance  Distance in pixels to test\r\n     */\r\n    ActorImpl.prototype.within = function (actor, distance) {\r\n        return Math.sqrt(Math.pow(this.pos.x - actor.pos.x, 2) + Math.pow(this.pos.y - actor.pos.y, 2)) <= distance;\r\n    };\r\n    // #endregion\r\n    ActorImpl.prototype._getCalculatedAnchor = function () {\r\n        return new Vector(this.getWidth() * this.anchor.x, this.getHeight() * this.anchor.y);\r\n    };\r\n    ActorImpl.prototype._reapplyEffects = function (drawing) {\r\n        drawing.removeEffect(this._opacityFx);\r\n        drawing.addEffect(this._opacityFx);\r\n    };\r\n    // #region Update\r\n    /**\r\n     * Perform euler integration at the specified time step\r\n     */\r\n    ActorImpl.prototype.integrate = function (delta) {\r\n        // Update placements based on linear algebra\r\n        var seconds = delta / 1000;\r\n        var totalAcc = this.acc.clone();\r\n        // Only active vanilla actors are affected by global acceleration\r\n        if (this.collisionType === CollisionType.Active) {\r\n            totalAcc.addEqual(Physics.acc);\r\n        }\r\n        this.vel.addEqual(totalAcc.scale(seconds));\r\n        this.pos.addEqual(this.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n        this.rx += this.torque * (1.0 / this.moi) * seconds;\r\n        this.rotation += this.rx * seconds;\r\n        this.scale.x += (this.sx * delta) / 1000;\r\n        this.scale.y += (this.sy * delta) / 1000;\r\n        if (!this.scale.equals(this.oldScale)) {\r\n            // change in scale effects the geometry\r\n            this._geometryDirty = true;\r\n        }\r\n        // Update physics body\r\n        this.body.update();\r\n        this._geometryDirty = false;\r\n    };\r\n    /**\r\n     * Called by the Engine, updates the state of the actor\r\n     * @param engine The reference to the current game engine\r\n     * @param delta  The time elapsed since the last update in milliseconds\r\n     */\r\n    ActorImpl.prototype.update = function (engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        // Update action queue\r\n        this.actionQueue.update(delta);\r\n        // Update color only opacity\r\n        if (this.color) {\r\n            this.color.a = this.opacity;\r\n        }\r\n        // calculate changing opacity\r\n        if (this.previousOpacity !== this.opacity) {\r\n            this.previousOpacity = this.opacity;\r\n            this._opacityFx.opacity = this.opacity;\r\n            this._effectsDirty = true;\r\n        }\r\n        // Capture old values before integration step updates them\r\n        this.oldVel.setTo(this.vel.x, this.vel.y);\r\n        this.oldPos.setTo(this.pos.x, this.pos.y);\r\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\r\n        this.oldScale.setTo(this.scale.x, this.scale.y);\r\n        // Run Euler integration\r\n        this.integrate(delta);\r\n        // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\r\n        for (var _i = 0, _a = this.traits; _i < _a.length; _i++) {\r\n            var trait = _a[_i];\r\n            trait.update(this, engine, delta);\r\n        }\r\n        // Update child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            this.children[i].update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an actor is updated.\r\n     */\r\n    ActorImpl.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an actor is updated.\r\n     */\r\n    ActorImpl.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._preupdate = function (engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postupdate = function (engine, delta) {\r\n        this.emit('postupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    };\r\n    // endregion\r\n    // #region Drawing\r\n    /**\r\n     * Called by the Engine, draws the actor to the screen\r\n     * @param ctx   The rendering context\r\n     * @param delta The time since the last draw in milliseconds\r\n     */\r\n    ActorImpl.prototype.draw = function (ctx, delta) {\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        ctx.rotate(this.rotation);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        // translate canvas by anchor offset\r\n        ctx.save();\r\n        ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\r\n        this._predraw(ctx, delta);\r\n        if (this.currentDrawing) {\r\n            var drawing = this.currentDrawing;\r\n            // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\r\n            var offsetX = (this._width - drawing.width * drawing.scale.x) * this.anchor.x;\r\n            var offsetY = (this._height - drawing.height * drawing.scale.y) * this.anchor.y;\r\n            if (this._effectsDirty) {\r\n                this._reapplyEffects(this.currentDrawing);\r\n                this._effectsDirty = false;\r\n            }\r\n            this.currentDrawing.draw(ctx, offsetX, offsetY);\r\n        }\r\n        else {\r\n            if (this.color) {\r\n                ctx.fillStyle = this.color.toString();\r\n                ctx.fillRect(0, 0, this._width, this._height);\r\n            }\r\n        }\r\n        ctx.restore();\r\n        // Draw child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            if (this.children[i].visible) {\r\n                this.children[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        this._postdraw(ctx, delta);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\r\n     */\r\n    ActorImpl.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\r\n     */\r\n    ActorImpl.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._predraw = function (ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPreDraw(ctx, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postdraw = function (ctx, delta) {\r\n        this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPostDraw(ctx, delta);\r\n    };\r\n    /**\r\n     * Called by the Engine, draws the actors debugging to the screen\r\n     * @param ctx The rendering context\r\n     */\r\n    /* istanbul ignore next */\r\n    ActorImpl.prototype.debugDraw = function (ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        this.body.debugDraw(ctx);\r\n        // Draw actor bounding box\r\n        var bb = this.getBounds();\r\n        bb.debugDraw(ctx);\r\n        // Draw actor Id\r\n        ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\r\n        // Draw actor anchor Vector\r\n        ctx.fillStyle = Color.Yellow.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this.getWorldPos().x, this.getWorldPos().y, 3, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // Culling Box debug draw\r\n        for (var j = 0; j < this.traits.length; j++) {\r\n            if (this.traits[j] instanceof Traits.OffscreenCulling) {\r\n                this.traits[j].cullingBox.debugDraw(ctx);\r\n            }\r\n        }\r\n        // Unit Circle debug draw\r\n        ctx.strokeStyle = Color.Yellow.toString();\r\n        ctx.beginPath();\r\n        var radius = Math.min(this.getWidth(), this.getHeight());\r\n        ctx.arc(this.getWorldPos().x, this.getWorldPos().y, radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        var ticks = {\r\n            '0 Pi': 0,\r\n            'Pi/2': Math.PI / 2,\r\n            Pi: Math.PI,\r\n            '3/2 Pi': (3 * Math.PI) / 2\r\n        };\r\n        var oldFont = ctx.font;\r\n        for (var tick in ticks) {\r\n            ctx.fillStyle = Color.Yellow.toString();\r\n            ctx.font = '14px';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillText(tick, this.getWorldPos().x + Math.cos(ticks[tick]) * (radius + 10), this.getWorldPos().y + Math.sin(ticks[tick]) * (radius + 10));\r\n        }\r\n        ctx.font = oldFont;\r\n        // Draw child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            this.children[i].debugDraw(ctx);\r\n        }\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    };\r\n    /**\r\n     * Returns the full array of ancestors\r\n     */\r\n    ActorImpl.prototype.getAncestors = function () {\r\n        var path = [this];\r\n        var currentActor = this;\r\n        var parent;\r\n        while ((parent = currentActor.parent)) {\r\n            currentActor = parent;\r\n            path.push(currentActor);\r\n        }\r\n        return path.reverse();\r\n    };\r\n    // #region Properties\r\n    /**\r\n     * Indicates the next id to be set\r\n     */\r\n    ActorImpl.defaults = {\r\n        anchor: Vector.Half.clone()\r\n    };\r\n    /**\r\n     * Indicates the next id to be set\r\n     */\r\n    ActorImpl.maxId = 0;\r\n    return ActorImpl;\r\n}(Class));\r\nexport { ActorImpl };\r\n/**\r\n * The most important primitive in Excalibur is an `Actor`. Anything that\r\n * can move on the screen, collide with another `Actor`, respond to events,\r\n * or interact with the current scene, must be an actor. An `Actor` **must**\r\n * be part of a [[Scene]] for it to be drawn to the screen.\r\n *\r\n * [[include:Actors.md]]\r\n *\r\n *\r\n * [[include:Constructors.md]]\r\n *\r\n */\r\nvar Actor = /** @class */ (function (_super) {\r\n    __extends(Actor, _super);\r\n    function Actor(xOrConfig, y, width, height, color) {\r\n        return _super.call(this, xOrConfig, y, width, height, color) || this;\r\n    }\r\n    return Actor;\r\n}(Configurable(ActorImpl)));\r\nexport { Actor };\r\n/**\r\n * An enum that describes the types of collisions actors can participate in\r\n */\r\nexport var CollisionType;\r\n(function (CollisionType) {\r\n    /**\r\n     * Actors with the `PreventCollision` setting do not participate in any\r\n     * collisions and do not raise collision events.\r\n     */\r\n    CollisionType[CollisionType[\"PreventCollision\"] = 0] = \"PreventCollision\";\r\n    /**\r\n     * Actors with the `Passive` setting only raise collision events, but are not\r\n     * influenced or moved by other actors and do not influence or move other actors.\r\n     */\r\n    CollisionType[CollisionType[\"Passive\"] = 1] = \"Passive\";\r\n    /**\r\n     * Actors with the `Active` setting raise collision events and participate\r\n     * in collisions with other actors and will be push or moved by actors sharing\r\n     * the `Active` or `Fixed` setting.\r\n     */\r\n    CollisionType[CollisionType[\"Active\"] = 2] = \"Active\";\r\n    /**\r\n     * Actors with the `Fixed` setting raise collision events and participate in\r\n     * collisions with other actors. Actors with the `Fixed` setting will not be\r\n     * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\r\n     * actors as \"immovable/onstoppable\" objects. If two `Fixed` actors meet they will\r\n     * not be pushed or moved by each other, they will not interact except to throw\r\n     * collision events.\r\n     */\r\n    CollisionType[CollisionType[\"Fixed\"] = 3] = \"Fixed\";\r\n})(CollisionType || (CollisionType = {}));\r\n//# sourceMappingURL=Actor.js.map","import { Vector } from '../Algebra';\r\n/**\r\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\r\n * Given a time, the function will return a value from positive startValue to positive endValue.\r\n *\r\n * ```js\r\n * function Linear (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInQuad (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutQuad (t) {\r\n *    return t * (2 - t);\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutQuad (t) {\r\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInCubic (t) {\r\n *    return t * t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutCubic (t) {\r\n *    return (--t) * t * t + 1;\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutCubic (t) {\r\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n * }\r\n * ```\r\n */\r\nvar EasingFunctions = /** @class */ (function () {\r\n    function EasingFunctions() {\r\n    }\r\n    EasingFunctions.CreateReversableEasingFunction = function (easing) {\r\n        return function (time, start, end, duration) {\r\n            if (end < start) {\r\n                return start - (easing(time, end, start, duration) - end);\r\n            }\r\n            else {\r\n                return easing(time, start, end, duration);\r\n            }\r\n        };\r\n    };\r\n    EasingFunctions.CreateVectorEasingFunction = function (easing) {\r\n        return function (time, start, end, duration) {\r\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\r\n        };\r\n    };\r\n    EasingFunctions.Linear = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        return (endValue * currentTime) / duration + startValue;\r\n    });\r\n    EasingFunctions.EaseInQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return endValue * currentTime * currentTime + startValue;\r\n    });\r\n    EasingFunctions.EaseOutQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return -endValue * currentTime * (currentTime - 2) + startValue;\r\n    });\r\n    EasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration / 2;\r\n        if (currentTime < 1) {\r\n            return (endValue / 2) * currentTime * currentTime + startValue;\r\n        }\r\n        currentTime--;\r\n        return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\r\n    });\r\n    EasingFunctions.EaseInCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return endValue * currentTime * currentTime * currentTime + startValue;\r\n    });\r\n    EasingFunctions.EaseOutCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        currentTime--;\r\n        return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\r\n    });\r\n    EasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration / 2;\r\n        if (currentTime < 1) {\r\n            return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\r\n        }\r\n        currentTime -= 2;\r\n        return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\r\n    });\r\n    return EasingFunctions;\r\n}());\r\nexport { EasingFunctions };\r\n//# sourceMappingURL=EasingFunctions.js.map","import * as Actions from './Action';\r\nimport { Promise } from '../Promises';\r\nimport { EasingFunctions } from '../Util/EasingFunctions';\r\n/**\r\n * The fluent Action API allows you to perform \"actions\" on\r\n * [[Actor|Actors]] such as following, moving, rotating, and\r\n * more. You can implement your own actions by implementing\r\n * the [[IAction]] interface.\r\n *\r\n * [[include:Actions.md]]\r\n */\r\nvar ActionContext = /** @class */ (function () {\r\n    function ActionContext() {\r\n        this._actors = [];\r\n        this._queues = [];\r\n        if (arguments !== null) {\r\n            this._actors = Array.prototype.slice.call(arguments, 0);\r\n            this._queues = this._actors.map(function (a) {\r\n                return a.actionQueue;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    ActionContext.prototype.clearActions = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].clearActions();\r\n        }\r\n    };\r\n    ActionContext.prototype.addActorToContext = function (actor) {\r\n        this._actors.push(actor);\r\n        // if we run into problems replace the line below with:\r\n        this._queues.push(actor.actionQueue);\r\n    };\r\n    ActionContext.prototype.removeActorFromContext = function (actor) {\r\n        var index = this._actors.indexOf(actor);\r\n        if (index > -1) {\r\n            this._actors.splice(index, 1);\r\n            this._queues.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified `x` and `y` position over the\r\n     * specified duration using a given [[EasingFunctions]] and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param x         The x location to move the actor to\r\n     * @param y         The y location to move the actor to\r\n     * @param duration  The time it should take the actor to move to the new location in milliseconds\r\n     * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\r\n     */\r\n    ActionContext.prototype.easeTo = function (x, y, duration, easingFcn) {\r\n        if (easingFcn === void 0) { easingFcn = EasingFunctions.Linear; }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.EaseTo(this._actors[i], x, y, duration, easingFcn));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified x and y position at the\r\n     * speed specified (in pixels per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param x      The x location to move the actor to\r\n     * @param y      The y location to move the actor to\r\n     * @param speed  The speed in pixels per second to move\r\n     */\r\n    ActionContext.prototype.moveTo = function (x, y, speed) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.MoveTo(this._actors[i], x, y, speed));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified x and y position by a\r\n     * certain time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param x     The x location to move the actor to\r\n     * @param y     The y location to move the actor to\r\n     * @param time  The time it should take the actor to move to the new location in milliseconds\r\n     */\r\n    ActionContext.prototype.moveBy = function (x, y, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.MoveBy(this._actors[i], x, y, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    ActionContext.prototype.rotateTo = function (angleRadians, speed, rotationType) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateTo(this._actors[i], angleRadians, speed, rotationType));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will rotate an actor to the specified angle by a certain\r\n     * time (in milliseconds) and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param time          The time it should take the actor to complete the rotation in milliseconds\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    ActionContext.prototype.rotateBy = function (angleRadians, time, rotationType) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateBy(this._actors[i], angleRadians, time, rotationType));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will scale an actor to the specified size at the speed\r\n     * specified (in magnitude increase per second) and return back the\r\n     * actor. This method is part of the actor 'Action' fluent API allowing\r\n     * action chaining.\r\n     * @param sizeX   The scaling factor to apply on X axis\r\n     * @param sizeY   The scaling factor to apply on Y axis\r\n     * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\r\n     * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\r\n     */\r\n    ActionContext.prototype.scaleTo = function (sizeX, sizeY, speedX, speedY) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.ScaleTo(this._actors[i], sizeX, sizeY, speedX, speedY));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will scale an actor to the specified size by a certain time\r\n     * (in milliseconds) and return back the actor. This method is part of the\r\n     * actor 'Action' fluent API allowing action chaining.\r\n     * @param sizeX   The scaling factor to apply on X axis\r\n     * @param sizeY   The scaling factor to apply on Y axis\r\n     * @param time    The time it should take to complete the scaling in milliseconds\r\n     */\r\n    ActionContext.prototype.scaleBy = function (sizeX, sizeY, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.ScaleBy(this._actors[i], sizeX, sizeY, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    ActionContext.prototype.blink = function (timeVisible, timeNotVisible, numBlinks) {\r\n        if (numBlinks === void 0) { numBlinks = 1; }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Blink(this._actors[i], timeVisible, timeNotVisible, numBlinks));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    ActionContext.prototype.fade = function (opacity, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Fade(this._actors[i], opacity, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    ActionContext.prototype.delay = function (time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Delay(this._actors[i], time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous actions. Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    ActionContext.prototype.die = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Die(this._actors[i]));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    ActionContext.prototype.callMethod = function (method) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.CallMethod(this._actors[i], method));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to repeat all of the previously\r\n     * called actions a certain number of times. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    ActionContext.prototype.repeat = function (times) {\r\n        if (!times) {\r\n            this.repeatForever();\r\n            return this;\r\n        }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Repeat(this._actors[i], times, this._actors[i].actionQueue.getActions()));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to repeat all of the previously\r\n     * called actions forever. This method is part of the actor 'Action'\r\n     * fluent API allowing action chaining.\r\n     */\r\n    ActionContext.prototype.repeatForever = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RepeatForever(this._actors[i], this._actors[i].actionQueue.getActions()));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to follow another at a specified distance\r\n     * @param actor           The actor to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    ActionContext.prototype.follow = function (actor, followDistance) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            if (followDistance === undefined) {\r\n                this._queues[i].add(new Actions.Follow(this._actors[i], actor));\r\n            }\r\n            else {\r\n                this._queues[i].add(new Actions.Follow(this._actors[i], actor, followDistance));\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param actor  The actor to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    ActionContext.prototype.meet = function (actor, speed) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            if (speed === undefined) {\r\n                this._queues[i].add(new Actions.Meet(this._actors[i], actor));\r\n            }\r\n            else {\r\n                this._queues[i].add(new Actions.Meet(this._actors[i], actor, speed));\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    ActionContext.prototype.asPromise = function () {\r\n        var _this = this;\r\n        var promises = this._queues.map(function (q, i) {\r\n            var temp = new Promise();\r\n            q.add(new Actions.CallMethod(_this._actors[i], function () {\r\n                temp.resolve();\r\n            }));\r\n            return temp;\r\n        });\r\n        return Promise.join.apply(this, promises);\r\n    };\r\n    return ActionContext;\r\n}());\r\nexport { ActionContext };\r\n//# sourceMappingURL=ActionContext.js.map","import { Physics } from './../Physics';\r\nimport { Color } from './../Drawing/Color';\r\nimport { CollisionType } from '../Actor';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\n/**\r\n * Models a potential collision between 2 bodies\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    function Pair(bodyA, bodyB) {\r\n        this.bodyA = bodyA;\r\n        this.bodyB = bodyB;\r\n        this.id = null;\r\n        this.collision = null;\r\n        this.id = Pair.calculatePairHash(bodyA, bodyB);\r\n    }\r\n    Object.defineProperty(Pair.prototype, \"canCollide\", {\r\n        /**\r\n         * Returns whether or not it is possible for the pairs to collide\r\n         */\r\n        get: function () {\r\n            var actorA = this.bodyA.actor;\r\n            var actorB = this.bodyB.actor;\r\n            // if both are fixed short circuit\r\n            if (actorA.collisionType === CollisionType.Fixed && actorB.collisionType === CollisionType.Fixed) {\r\n                return false;\r\n            }\r\n            // if the other is prevent collision or is dead short circuit\r\n            if (actorB.collisionType === CollisionType.PreventCollision || actorB.isKilled()) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Runs the collison intersection logic on the members of this pair\r\n     */\r\n    Pair.prototype.collide = function () {\r\n        this.collision = this.bodyA.collisionArea.collide(this.bodyB.collisionArea);\r\n    };\r\n    /**\r\n     * Resovles the collision body position and velocity if a collision occured\r\n     */\r\n    Pair.prototype.resolve = function (strategy) {\r\n        if (this.collision) {\r\n            this.collision.resolve(strategy);\r\n        }\r\n    };\r\n    /**\r\n     * Calculates the unique pair hash id for this collision pair\r\n     */\r\n    Pair.calculatePairHash = function (bodyA, bodyB) {\r\n        if (bodyA.actor.id < bodyB.actor.id) {\r\n            return \"#\" + bodyA.actor.id + \"+\" + bodyB.actor.id;\r\n        }\r\n        else {\r\n            return \"#\" + bodyB.actor.id + \"+\" + bodyA.actor.id;\r\n        }\r\n    };\r\n    /* istanbul ignore next */\r\n    Pair.prototype.debugDraw = function (ctx) {\r\n        if (this.collision) {\r\n            if (Physics.showContacts) {\r\n                DrawUtil.point(ctx, Color.Red, this.collision.point);\r\n            }\r\n            if (Physics.showCollisionNormals) {\r\n                DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\r\n            }\r\n        }\r\n    };\r\n    return Pair;\r\n}());\r\nexport { Pair };\r\n//# sourceMappingURL=Pair.js.map","import { Physics, CollisionResolutionStrategy } from './../Physics';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CircleArea } from './CircleArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { Pair } from './Pair';\r\nimport { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\nvar Body = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new physics body associated with an actor\r\n     */\r\n    function Body(actor) {\r\n        this.actor = actor;\r\n        /**\r\n         * [[ICollisionArea|Collision area]] of this physics body, defines the shape for rigid body collision\r\n         */\r\n        this.collisionArea = null;\r\n        /**\r\n         * The (x, y) position of the actor this will be in the middle of the actor if the\r\n         * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\r\n         * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\r\n         */\r\n        this.pos = new Vector(0, 0);\r\n        /**\r\n         * The position of the actor last frame (x, y) in pixels\r\n         */\r\n        this.oldPos = new Vector(0, 0);\r\n        /**\r\n         * The current velocity vector (vx, vy) of the actor in pixels/second\r\n         */\r\n        this.vel = new Vector(0, 0);\r\n        /**\r\n         * The velocity of the actor last frame (vx, vy) in pixels/second\r\n         */\r\n        this.oldVel = new Vector(0, 0);\r\n        /**\r\n         * The curret acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\r\n         * be useful to simulate a gravitational effect.\r\n         */\r\n        this.acc = new Vector(0, 0);\r\n        /**\r\n         * The current torque applied to the actor\r\n         */\r\n        this.torque = 0;\r\n        /**\r\n         * The current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        this.mass = 1.0;\r\n        /**\r\n         * The current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        this.moi = 1000;\r\n        /**\r\n         * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\r\n         */\r\n        this.motion = 10;\r\n        /**\r\n         * The coefficient of friction on this actor\r\n         */\r\n        this.friction = 0.99;\r\n        /**\r\n         * The coefficient of restitution of this actor, represents the amount of energy preserved after collision\r\n         */\r\n        this.restitution = 0.2;\r\n        /**\r\n         * The rotation of the actor in radians\r\n         */\r\n        this.rotation = 0; // radians\r\n        /**\r\n         * The rotational velocity of the actor in radians/second\r\n         */\r\n        this.rx = 0; //radians/sec\r\n        this._totalMtv = Vector.Zero.clone();\r\n    }\r\n    /**\r\n     * Add minimum translation vectors accumulated during the current frame to resolve collisions.\r\n     */\r\n    Body.prototype.addMtv = function (mtv) {\r\n        this._totalMtv.addEqual(mtv);\r\n    };\r\n    /**\r\n     * Applies the accumulated translation vectors to the actors position\r\n     */\r\n    Body.prototype.applyMtv = function () {\r\n        this.pos.addEqual(this._totalMtv);\r\n        this._totalMtv.setTo(0, 0);\r\n    };\r\n    /**\r\n     * Returns the body's [[BoundingBox]] calculated for this instant in world space.\r\n     */\r\n    Body.prototype.getBounds = function () {\r\n        if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n            return this.actor.getBounds();\r\n        }\r\n        else {\r\n            return this.collisionArea.getBounds();\r\n        }\r\n    };\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] relative to the actors position.\r\n     */\r\n    Body.prototype.getRelativeBounds = function () {\r\n        if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n            return this.actor.getRelativeBounds();\r\n        }\r\n        else {\r\n            return this.actor.getRelativeBounds();\r\n        }\r\n    };\r\n    /**\r\n     * Updates the collision area geometry and internal caches\r\n     */\r\n    Body.prototype.update = function () {\r\n        if (this.collisionArea) {\r\n            // Update the geometry if needed\r\n            if (this.actor && this.actor.isGeometryDirty && this.collisionArea instanceof PolygonArea) {\r\n                this.collisionArea.points = this.actor.getRelativeGeometry();\r\n            }\r\n            this.collisionArea.recalc();\r\n        }\r\n    };\r\n    /**\r\n     * Sets up a box collision area based on the current bounds of the associated actor of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useBoxCollision = function (center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        this.collisionArea = new PolygonArea({\r\n            body: this,\r\n            points: this.actor.getRelativeGeometry(),\r\n            pos: center // position relative to actor\r\n        });\r\n        // in case of a nan moi, coalesce to a safe default\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up a polygon collision area based on a list of of points relative to the anchor of the associated actor of this physics body.\r\n     *\r\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.usePolygonCollision = function (points, center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        this.collisionArea = new PolygonArea({\r\n            body: this,\r\n            points: points,\r\n            pos: center // position relative to actor\r\n        });\r\n        // in case of a nan moi, collesce to a safe default\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up a [[CircleArea|circle collision area]] with a specified radius in pixels.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useCircleCollision = function (radius, center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        if (!radius) {\r\n            radius = this.actor.getWidth() / 2;\r\n        }\r\n        this.collisionArea = new CircleArea({\r\n            body: this,\r\n            radius: radius,\r\n            pos: center\r\n        });\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up an [[EdgeArea|edge collision]] with a start point and an end point relative to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useEdgeCollision = function (begin, end) {\r\n        this.collisionArea = new EdgeArea({\r\n            begin: begin,\r\n            end: end,\r\n            body: this\r\n        });\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /* istanbul ignore next */\r\n    Body.prototype.debugDraw = function (ctx) {\r\n        // Draw motion vectors\r\n        if (Physics.showMotionVectors) {\r\n            DrawUtil.vector(ctx, Color.Yellow, this.pos, this.acc.add(Physics.acc));\r\n            DrawUtil.vector(ctx, Color.Red, this.pos, this.vel);\r\n            DrawUtil.point(ctx, Color.Red, this.pos);\r\n        }\r\n        if (Physics.showBounds) {\r\n            this.getBounds().debugDraw(ctx, Color.Yellow);\r\n        }\r\n        if (Physics.showArea) {\r\n            this.collisionArea.debugDraw(ctx, Color.Green);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a boolean indicating whether this body collided with\r\n     * or was in stationary contact with\r\n     * the body of the other [[Actor]]\r\n     */\r\n    Body.prototype.touching = function (other) {\r\n        var pair = new Pair(this, other.body);\r\n        pair.collide();\r\n        if (pair.collision) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return Body;\r\n}());\r\nexport { Body };\r\n//# sourceMappingURL=Body.js.map","/**\r\n * Revises pointer events path accordingly to the actor\r\n */\r\nvar CapturePointer = /** @class */ (function () {\r\n    function CapturePointer() {\r\n    }\r\n    CapturePointer.prototype.update = function (actor, engine) {\r\n        if (!actor.enableCapturePointer) {\r\n            return;\r\n        }\r\n        if (actor.isKilled()) {\r\n            return;\r\n        }\r\n        engine.input.pointers.revisePointerEventsPaths(actor);\r\n    };\r\n    return CapturePointer;\r\n}());\r\nexport { CapturePointer };\r\n//# sourceMappingURL=CapturePointer.js.map","import { Physics } from './../Physics';\r\nimport { CollisionType } from '../Actor';\r\nvar EulerMovement = /** @class */ (function () {\r\n    function EulerMovement() {\r\n    }\r\n    EulerMovement.prototype.update = function (actor, _engine, delta) {\r\n        // Update placements based on linear algebra\r\n        var seconds = delta / 1000;\r\n        var totalAcc = actor.acc.clone();\r\n        // Only active vanilla actors are affected by global acceleration\r\n        if (actor.collisionType === CollisionType.Active) {\r\n            totalAcc.addEqual(Physics.acc);\r\n        }\r\n        actor.oldVel = actor.vel;\r\n        actor.vel.addEqual(totalAcc.scale(seconds));\r\n        actor.pos.addEqual(actor.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n        actor.rx += actor.torque * (1.0 / actor.moi) * seconds;\r\n        actor.rotation += actor.rx * seconds;\r\n        actor.scale.x += (actor.sx * delta) / 1000;\r\n        actor.scale.y += (actor.sy * delta) / 1000;\r\n    };\r\n    return EulerMovement;\r\n}());\r\nexport { EulerMovement };\r\n//# sourceMappingURL=EulerMovement.js.map","import { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\nvar CullingBox = /** @class */ (function () {\r\n    function CullingBox() {\r\n        this._topLeft = new Vector(0, 0);\r\n        this._topRight = new Vector(0, 0);\r\n        this._bottomLeft = new Vector(0, 0);\r\n        this._bottomRight = new Vector(0, 0);\r\n    }\r\n    CullingBox.prototype.isSpriteOffScreen = function (actor, engine) {\r\n        var drawingWidth = actor.currentDrawing.drawWidth;\r\n        var drawingHeight = actor.currentDrawing.drawHeight;\r\n        var rotation = actor.rotation;\r\n        var anchor = actor.getCenter();\r\n        var worldPos = actor.getWorldPos();\r\n        this._topLeft.x = worldPos.x - drawingWidth / 2;\r\n        this._topLeft.y = worldPos.y - drawingHeight / 2;\r\n        this._topLeft = this._topLeft.rotate(rotation, anchor);\r\n        this._topRight.x = worldPos.x + drawingWidth / 2;\r\n        this._topRight.y = worldPos.y - drawingHeight / 2;\r\n        this._topRight = this._topRight.rotate(rotation, anchor);\r\n        this._bottomLeft.x = worldPos.x - drawingWidth / 2;\r\n        this._bottomLeft.y = worldPos.y + drawingHeight / 2;\r\n        this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\r\n        this._bottomRight.x = worldPos.x + drawingWidth / 2;\r\n        this._bottomRight.y = worldPos.y + drawingHeight / 2;\r\n        this._bottomRight = this._bottomRight.rotate(rotation, anchor);\r\n        ///\r\n        var topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\r\n        var topRightScreen = engine.worldToScreenCoordinates(this._topRight);\r\n        var bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\r\n        var bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\r\n        this._xCoords = [];\r\n        this._yCoords = [];\r\n        this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\r\n        this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\r\n        this._xMin = Math.min.apply(null, this._xCoords);\r\n        this._yMin = Math.min.apply(null, this._yCoords);\r\n        this._xMax = Math.max.apply(null, this._xCoords);\r\n        this._yMax = Math.max.apply(null, this._yCoords);\r\n        var minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\r\n        var maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\r\n        this._xMinWorld = minWorld.x;\r\n        this._yMinWorld = minWorld.y;\r\n        this._xMaxWorld = maxWorld.x;\r\n        this._yMaxWorld = maxWorld.y;\r\n        var boundingPoints = [\r\n            new Vector(this._xMin, this._yMin),\r\n            new Vector(this._xMax, this._yMin),\r\n            new Vector(this._xMin, this._yMax),\r\n            new Vector(this._xMax, this._yMax)\r\n        ]; // bottomright\r\n        // sprite can be wider than canvas screen (and still visible within canvas)\r\n        // top or bottom of sprite must be within canvas\r\n        if (boundingPoints[0].x < 0 &&\r\n            boundingPoints[1].x > engine.canvas.clientWidth &&\r\n            (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)) {\r\n            return false;\r\n        }\r\n        // sprite can be taller than canvas screen (and still visible within canvas)\r\n        // left or right of sprite must be within canvas\r\n        if (boundingPoints[0].y < 0 &&\r\n            boundingPoints[2].y > engine.canvas.clientHeight &&\r\n            (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)) {\r\n            return false;\r\n        }\r\n        // otherwise if any corner is visible, we're not offscreen\r\n        for (var i = 0; i < boundingPoints.length; i++) {\r\n            if (boundingPoints[i].x > 0 &&\r\n                boundingPoints[i].y > 0 &&\r\n                boundingPoints[i].x < engine.canvas.clientWidth &&\r\n                boundingPoints[i].y < engine.canvas.clientHeight) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    CullingBox.prototype.debugDraw = function (ctx) {\r\n        // bounding rectangle\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = Color.White.toString();\r\n        ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\r\n        ctx.stroke();\r\n        ctx.fillStyle = Color.Red.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Green.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Blue.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Magenta.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    };\r\n    return CullingBox;\r\n}());\r\nexport { CullingBox };\r\n//# sourceMappingURL=CullingBox.js.map","import { CullingBox } from './../Util/CullingBox';\r\nimport { Vector } from '../Algebra';\r\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\r\nvar OffscreenCulling = /** @class */ (function () {\r\n    function OffscreenCulling() {\r\n        this.cullingBox = new CullingBox();\r\n    }\r\n    OffscreenCulling.prototype.update = function (actor, engine) {\r\n        var eventDispatcher = actor.eventDispatcher;\r\n        var anchor = actor.anchor;\r\n        var globalScale = actor.getGlobalScale();\r\n        var width = (globalScale.x * actor.getWidth()) / actor.scale.x;\r\n        var height = (globalScale.y * actor.getHeight()) / actor.scale.y;\r\n        var cameraPos = engine.currentScene.camera.pos;\r\n        var worldPos = actor.getWorldPos();\r\n        var actorScreenCoords = engine.worldToScreenCoordinates(new Vector(worldPos.x - anchor.x * width, worldPos.y - anchor.y * height));\r\n        var cameraScreenCoords = engine.worldToScreenCoordinates(cameraPos);\r\n        var zoom = 1.0;\r\n        if (actor.scene && actor.scene.camera) {\r\n            zoom = Math.abs(actor.scene.camera.getZoom());\r\n        }\r\n        var isSpriteOffScreen = true;\r\n        if (actor.currentDrawing != null) {\r\n            isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\r\n        }\r\n        if (!actor.isOffScreen) {\r\n            if ((actorScreenCoords.x + width * zoom < 0 ||\r\n                actorScreenCoords.y + height * zoom < 0 ||\r\n                actorScreenCoords.x > engine.halfDrawWidth + cameraScreenCoords.x ||\r\n                actorScreenCoords.y > engine.halfDrawHeight + cameraScreenCoords.y) &&\r\n                isSpriteOffScreen) {\r\n                eventDispatcher.emit('exitviewport', new ExitViewPortEvent(actor));\r\n                actor.isOffScreen = true;\r\n            }\r\n        }\r\n        else {\r\n            if ((actorScreenCoords.x + width * zoom > 0 &&\r\n                actorScreenCoords.y + height * zoom > 0 &&\r\n                actorScreenCoords.x < engine.halfDrawWidth + cameraScreenCoords.x &&\r\n                actorScreenCoords.y < engine.halfDrawHeight + cameraScreenCoords.y) ||\r\n                !isSpriteOffScreen) {\r\n                eventDispatcher.emit('enterviewport', new EnterViewPortEvent(actor));\r\n                actor.isOffScreen = false;\r\n            }\r\n        }\r\n    };\r\n    return OffscreenCulling;\r\n}());\r\nexport { OffscreenCulling };\r\n//# sourceMappingURL=OffscreenCulling.js.map","import { CollisionType } from '../Actor';\r\nimport { Side } from '../Collision/Side';\r\nimport { PreCollisionEvent, PostCollisionEvent } from '../Events';\r\nvar TileMapCollisionDetection = /** @class */ (function () {\r\n    function TileMapCollisionDetection() {\r\n    }\r\n    TileMapCollisionDetection.prototype.update = function (actor, engine) {\r\n        var eventDispatcher = actor.eventDispatcher;\r\n        if (actor.collisionType !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {\r\n            for (var j = 0; j < engine.currentScene.tileMaps.length; j++) {\r\n                var map = engine.currentScene.tileMaps[j];\r\n                var intersectMap;\r\n                var side = Side.None;\r\n                var max = 2;\r\n                while ((intersectMap = map.collides(actor))) {\r\n                    if (max-- < 0) {\r\n                        break;\r\n                    }\r\n                    side = actor.getSideFromIntersect(intersectMap);\r\n                    eventDispatcher.emit('precollision', new PreCollisionEvent(actor, null, side, intersectMap));\r\n                    if (actor.collisionType === CollisionType.Active) {\r\n                        actor.pos.y += intersectMap.y;\r\n                        actor.pos.x += intersectMap.x;\r\n                        eventDispatcher.emit('postcollision', new PostCollisionEvent(actor, null, side, intersectMap));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return TileMapCollisionDetection;\r\n}());\r\nexport { TileMapCollisionDetection };\r\n//# sourceMappingURL=TileMapCollisionDetection.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Vector } from './Algebra';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport * as Traits from './Traits/Index';\r\n/**\r\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\r\n * not participate in collisions. Drawn on top of all other actors.\r\n */\r\nvar UIActor = /** @class */ (function (_super) {\r\n    __extends(UIActor, _super);\r\n    /**\r\n     * @param x       The starting x coordinate of the actor\r\n     * @param y       The starting y coordinate of the actor\r\n     * @param width   The starting width of the actor\r\n     * @param height  The starting height of the actor\r\n     */\r\n    function UIActor(xOrConfig, y, width, height) {\r\n        var _this = this;\r\n        if (typeof (xOrConfig !== 'object')) {\r\n            _this = _super.call(this, xOrConfig, y, width, height) || this;\r\n        }\r\n        else {\r\n            _this = _super.call(this, xOrConfig) || this;\r\n        }\r\n        _this.traits = [];\r\n        _this.traits.push(new Traits.CapturePointer());\r\n        _this.anchor.setTo(0, 0);\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.enableCapturePointer = true;\r\n        return _this;\r\n    }\r\n    UIActor.prototype._initialize = function (engine) {\r\n        this._engine = engine;\r\n        _super.prototype._initialize.call(this, engine);\r\n    };\r\n    UIActor.prototype.contains = function (x, y, useWorld) {\r\n        if (useWorld === void 0) { useWorld = true; }\r\n        if (useWorld) {\r\n            return _super.prototype.contains.call(this, x, y);\r\n        }\r\n        var coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\r\n        return _super.prototype.contains.call(this, coords.x, coords.y);\r\n    };\r\n    return UIActor;\r\n}(Actor));\r\nexport { UIActor };\r\n//# sourceMappingURL=UIActor.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EasingFunctions } from './Util/EasingFunctions';\r\nimport { Promise, PromiseState } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { removeItemFromArray } from './Util/Util';\r\nimport { PreUpdateEvent, PostUpdateEvent, InitializeEvent } from './Events';\r\nimport { Class } from './Class';\r\n/**\r\n * Container to house convenience strategy methods\r\n * @internal\r\n */\r\nvar StrategyContainer = /** @class */ (function () {\r\n    function StrategyContainer(camera) {\r\n        this.camera = camera;\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\r\n     * @param actor The actor to lock the camera to\r\n     */\r\n    StrategyContainer.prototype.lockToActor = function (actor) {\r\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\r\n    };\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\r\n     * @param actor The actor to lock the camera to\r\n     * @param axis The axis to follow the actor on\r\n     */\r\n    StrategyContainer.prototype.lockToActorAxis = function (actor, axis) {\r\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\r\n    };\r\n    /**\r\n     * Creates and adds the [[ElasticToActorStrategy]] on the current camera\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillationg spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    StrategyContainer.prototype.elasticToActor = function (actor, cameraElasticity, cameraFriction) {\r\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\r\n    };\r\n    /**\r\n     * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    StrategyContainer.prototype.radiusAroundActor = function (actor, radius) {\r\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\r\n    };\r\n    return StrategyContainer;\r\n}());\r\nexport { StrategyContainer };\r\n/**\r\n * Camera axis enum\r\n */\r\nexport var Axis;\r\n(function (Axis) {\r\n    Axis[Axis[\"X\"] = 0] = \"X\";\r\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\r\n})(Axis || (Axis = {}));\r\n/**\r\n * Lock a camera to the exact x/y postition of an actor.\r\n */\r\nvar LockCameraToActorStrategy = /** @class */ (function () {\r\n    function LockCameraToActorStrategy(target) {\r\n        this.target = target;\r\n        this.action = function (target, _cam, _eng, _delta) {\r\n            var center = target.getCenter();\r\n            return center;\r\n        };\r\n    }\r\n    return LockCameraToActorStrategy;\r\n}());\r\nexport { LockCameraToActorStrategy };\r\n/**\r\n * Lock a camera to a specific axis around an actor.\r\n */\r\nvar LockCameraToActorAxisStrategy = /** @class */ (function () {\r\n    function LockCameraToActorAxisStrategy(target, axis) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.axis = axis;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var center = target.getCenter();\r\n            var currentFocus = cam.getFocus();\r\n            if (_this.axis === Axis.X) {\r\n                return new Vector(center.x, currentFocus.y);\r\n            }\r\n            else {\r\n                return new Vector(currentFocus.x, center.y);\r\n            }\r\n        };\r\n    }\r\n    return LockCameraToActorAxisStrategy;\r\n}());\r\nexport { LockCameraToActorAxisStrategy };\r\n/**\r\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\r\n */\r\nvar ElasticToActorStrategy = /** @class */ (function () {\r\n    /**\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillationg spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    function ElasticToActorStrategy(target, cameraElasticity, cameraFriction) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.cameraElasticity = cameraElasticity;\r\n        this.cameraFriction = cameraFriction;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var position = target.getCenter();\r\n            var focus = cam.getFocus();\r\n            var cameraVel = new Vector(cam.dx, cam.dy);\r\n            // Calculate the strech vector, using the spring equation\r\n            // F = kX\r\n            // https://en.wikipedia.org/wiki/Hooke's_law\r\n            // Apply to the current camera velocity\r\n            var stretch = position.sub(focus).scale(_this.cameraElasticity); // stretch is X\r\n            cameraVel = cameraVel.add(stretch);\r\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\r\n            // Apply to the current camera velocity\r\n            var friction = cameraVel.scale(-1).scale(_this.cameraFriction);\r\n            cameraVel = cameraVel.add(friction);\r\n            // Update position by velocity deltas\r\n            focus = focus.add(cameraVel);\r\n            return focus;\r\n        };\r\n    }\r\n    return ElasticToActorStrategy;\r\n}());\r\nexport { ElasticToActorStrategy };\r\nvar RadiusAroundActorStrategy = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    function RadiusAroundActorStrategy(target, radius) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.radius = radius;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var position = target.getCenter();\r\n            var focus = cam.getFocus();\r\n            var direction = position.sub(focus);\r\n            var distance = direction.magnitude();\r\n            if (distance >= _this.radius) {\r\n                var offset = distance - _this.radius;\r\n                return focus.add(direction.normalize().scale(offset));\r\n            }\r\n            return focus;\r\n        };\r\n    }\r\n    return RadiusAroundActorStrategy;\r\n}());\r\nexport { RadiusAroundActorStrategy };\r\n/**\r\n * Cameras\r\n *\r\n * [[BaseCamera]] is the base class for all Excalibur cameras. Cameras are used\r\n * to move around your game and set focus. They are used to determine\r\n * what is \"off screen\" and can be used to scale the game.\r\n *\r\n * [[include:Cameras.md]]\r\n */\r\nvar BaseCamera = /** @class */ (function (_super) {\r\n    __extends(BaseCamera, _super);\r\n    function BaseCamera() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._cameraStrategies = [];\r\n        _this.strategy = new StrategyContainer(_this);\r\n        // camera physical quantities\r\n        _this.z = 1;\r\n        _this.dx = 0;\r\n        _this.dy = 0;\r\n        _this.dz = 0;\r\n        _this.ax = 0;\r\n        _this.ay = 0;\r\n        _this.az = 0;\r\n        _this.rotation = 0;\r\n        _this.rx = 0;\r\n        _this._x = 0;\r\n        _this._y = 0;\r\n        _this._cameraMoving = false;\r\n        _this._currentLerpTime = 0;\r\n        _this._lerpDuration = 1000; // 1 second\r\n        _this._lerpStart = null;\r\n        _this._lerpEnd = null;\r\n        //camera effects\r\n        _this._isShaking = false;\r\n        _this._shakeMagnitudeX = 0;\r\n        _this._shakeMagnitudeY = 0;\r\n        _this._shakeDuration = 0;\r\n        _this._elapsedShakeTime = 0;\r\n        _this._xShake = 0;\r\n        _this._yShake = 0;\r\n        _this._isZooming = false;\r\n        _this._zoomStart = 1;\r\n        _this._zoomEnd = 1;\r\n        _this._currentZoomTime = 0;\r\n        _this._zoomDuration = 0;\r\n        _this._zoomEasing = EasingFunctions.EaseInOutCubic;\r\n        _this._easing = EasingFunctions.EaseInOutCubic;\r\n        _this._isInitialized = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BaseCamera.prototype, \"x\", {\r\n        /**\r\n         * Get the camera's x position\r\n         */\r\n        get: function () {\r\n            return this._x;\r\n        },\r\n        /**\r\n         * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\r\n         */\r\n        set: function (value) {\r\n            if (!this._follow && !this._cameraMoving) {\r\n                this._x = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"y\", {\r\n        /**\r\n         * Get the camera's y position\r\n         */\r\n        get: function () {\r\n            return this._y;\r\n        },\r\n        /**\r\n         * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\r\n         */\r\n        set: function (value) {\r\n            if (!this._follow && !this._cameraMoving) {\r\n                this._y = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"pos\", {\r\n        /**\r\n         * Get the camera's position as a vector\r\n         */\r\n        get: function () {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        /**\r\n         * Set the cameras position\r\n         */\r\n        set: function (value) {\r\n            this.x = value.x;\r\n            this.y = value.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"vel\", {\r\n        /**\r\n         * Get the camera's velocity as a vector\r\n         */\r\n        get: function () {\r\n            return new Vector(this.dx, this.dy);\r\n        },\r\n        /**\r\n         * Set the camera's velocity\r\n         */\r\n        set: function (value) {\r\n            this.dx = value.x;\r\n            this.dy = value.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\r\n     */\r\n    BaseCamera.prototype.getFocus = function () {\r\n        return new Vector(this.x, this.y);\r\n    };\r\n    /**\r\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\r\n     *\r\n     * @param pos The target position to move to\r\n     * @param duration The duration in milliseconds the move should last\r\n     * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\r\n     * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\r\n     *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\r\n     */\r\n    BaseCamera.prototype.move = function (pos, duration, easingFn) {\r\n        if (easingFn === void 0) { easingFn = EasingFunctions.EaseInOutCubic; }\r\n        if (typeof easingFn !== 'function') {\r\n            throw 'Please specify an EasingFunction';\r\n        }\r\n        // cannot move when following an actor\r\n        if (this._follow) {\r\n            return new Promise().reject(pos);\r\n        }\r\n        // resolve existing promise, if any\r\n        if (this._lerpPromise && this._lerpPromise.state() === PromiseState.Pending) {\r\n            this._lerpPromise.resolve(pos);\r\n        }\r\n        this._lerpPromise = new Promise();\r\n        this._lerpStart = this.getFocus().clone();\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = pos;\r\n        this._currentLerpTime = 0;\r\n        this._cameraMoving = true;\r\n        this._easing = easingFn;\r\n        return this._lerpPromise;\r\n    };\r\n    /**\r\n     * Sets the camera to shake at the specified magnitudes for the specified duration\r\n     * @param magnitudeX  The x magnitude of the shake\r\n     * @param magnitudeY  The y magnitude of the shake\r\n     * @param duration    The duration of the shake in milliseconds\r\n     */\r\n    BaseCamera.prototype.shake = function (magnitudeX, magnitudeY, duration) {\r\n        this._isShaking = true;\r\n        this._shakeMagnitudeX = magnitudeX;\r\n        this._shakeMagnitudeY = magnitudeY;\r\n        this._shakeDuration = duration;\r\n    };\r\n    /**\r\n     * Zooms the camera in or out by the specified scale over the specified duration.\r\n     * If no duration is specified, it take effect immediately.\r\n     * @param scale    The scale of the zoom\r\n     * @param duration The duration of the zoom in milliseconds\r\n     */\r\n    BaseCamera.prototype.zoom = function (scale, duration, easingFn) {\r\n        if (duration === void 0) { duration = 0; }\r\n        if (easingFn === void 0) { easingFn = EasingFunctions.EaseInOutCubic; }\r\n        this._zoomPromise = new Promise();\r\n        if (duration) {\r\n            this._isZooming = true;\r\n            this._zoomEasing = easingFn;\r\n            this._currentZoomTime = 0;\r\n            this._zoomDuration = duration;\r\n            this._zoomStart = this.z;\r\n            this._zoomEnd = scale;\r\n        }\r\n        else {\r\n            this._isZooming = false;\r\n            this.z = scale;\r\n            this._zoomPromise.resolve(true);\r\n        }\r\n        return this._zoomPromise;\r\n    };\r\n    /**\r\n     * Gets the current zoom scale\r\n     */\r\n    BaseCamera.prototype.getZoom = function () {\r\n        return this.z;\r\n    };\r\n    /**\r\n     * Adds a new camera strategy to this camera\r\n     * @param cameraStrategy Instance of an [[ICameraStrategy]]\r\n     */\r\n    BaseCamera.prototype.addStrategy = function (cameraStrategy) {\r\n        this._cameraStrategies.push(cameraStrategy);\r\n    };\r\n    /**\r\n     * Removes a camera strategy by reference\r\n     * @param cameraStrategy Instance of an [[ICameraStrategy]]\r\n     */\r\n    BaseCamera.prototype.removeStrategy = function (cameraStrategy) {\r\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\r\n    };\r\n    /**\r\n     * Clears all camera strategies from the camera\r\n     */\r\n    BaseCamera.prototype.clearAllStrategies = function () {\r\n        this._cameraStrategies.length = 0;\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    BaseCamera.prototype._preupdate = function (engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Overridable\r\n    };\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    BaseCamera.prototype._postupdate = function (engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Overridable\r\n    };\r\n    Object.defineProperty(BaseCamera.prototype, \"isInitialized\", {\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BaseCamera.prototype._initialize = function (_engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(_engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(_engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onInitialize = function (_engine) {\r\n        // Overridable\r\n    };\r\n    BaseCamera.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.update = function (_engine, delta) {\r\n        this._initialize(_engine);\r\n        this._preupdate(_engine, delta);\r\n        // Update placements based on linear algebra\r\n        this._x += (this.dx * delta) / 1000;\r\n        this._y += (this.dy * delta) / 1000;\r\n        this.z += (this.dz * delta) / 1000;\r\n        this.dx += (this.ax * delta) / 1000;\r\n        this.dy += (this.ay * delta) / 1000;\r\n        this.dz += (this.az * delta) / 1000;\r\n        this.rotation += (this.rx * delta) / 1000;\r\n        if (this._isZooming) {\r\n            if (this._currentZoomTime < this._zoomDuration) {\r\n                var zoomEasing = this._zoomEasing;\r\n                var newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\r\n                this.z = newZoom;\r\n                this._currentZoomTime += delta;\r\n            }\r\n            else {\r\n                this._isZooming = false;\r\n                this.z = this._zoomEnd;\r\n                this._currentZoomTime = 0;\r\n                this._zoomPromise.resolve(true);\r\n            }\r\n        }\r\n        if (this._cameraMoving) {\r\n            if (this._currentLerpTime < this._lerpDuration) {\r\n                var moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\r\n                var lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\r\n                this._x = lerpPoint.x;\r\n                this._y = lerpPoint.y;\r\n                this._currentLerpTime += delta;\r\n            }\r\n            else {\r\n                this._x = this._lerpEnd.x;\r\n                this._y = this._lerpEnd.y;\r\n                var end = this._lerpEnd.clone();\r\n                this._lerpStart = null;\r\n                this._lerpEnd = null;\r\n                this._currentLerpTime = 0;\r\n                this._cameraMoving = false;\r\n                // Order matters here, resolve should be last so any chain promises have a clean slate\r\n                this._lerpPromise.resolve(end);\r\n            }\r\n        }\r\n        if (this._isDoneShaking()) {\r\n            this._isShaking = false;\r\n            this._elapsedShakeTime = 0;\r\n            this._shakeMagnitudeX = 0;\r\n            this._shakeMagnitudeY = 0;\r\n            this._shakeDuration = 0;\r\n            this._xShake = 0;\r\n            this._yShake = 0;\r\n        }\r\n        else {\r\n            this._elapsedShakeTime += delta;\r\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\r\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\r\n        }\r\n        for (var _i = 0, _a = this._cameraStrategies; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            this.pos = s.action.call(s, s.target, this, _engine, delta);\r\n        }\r\n        this._postupdate(_engine, delta);\r\n    };\r\n    /**\r\n     * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\r\n     * @param ctx    Canvas context to apply transformations\r\n     * @param delta  The number of milliseconds since the last update\r\n     */\r\n    BaseCamera.prototype.draw = function (ctx) {\r\n        var focus = this.getFocus();\r\n        var canvasWidth = ctx.canvas.width;\r\n        var canvasHeight = ctx.canvas.height;\r\n        var pixelRatio = window.devicePixelRatio;\r\n        var zoom = this.getZoom();\r\n        var newCanvasWidth = canvasWidth / zoom / pixelRatio;\r\n        var newCanvasHeight = canvasHeight / zoom / pixelRatio;\r\n        ctx.scale(zoom, zoom);\r\n        ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\r\n    };\r\n    BaseCamera.prototype.debugDraw = function (ctx) {\r\n        var focus = this.getFocus();\r\n        ctx.fillStyle = 'red';\r\n        ctx.strokeStyle = 'white';\r\n        ctx.lineWidth = 3;\r\n        ctx.beginPath();\r\n        ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    BaseCamera.prototype._isDoneShaking = function () {\r\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\r\n    };\r\n    return BaseCamera;\r\n}(Class));\r\nexport { BaseCamera };\r\n//# sourceMappingURL=Camera.js.map","/**\r\n * The Excalibur timer hooks into the internal timer and fires callbacks,\r\n * after a certain interval, optionally repeating.\r\n */\r\nvar Timer = /** @class */ (function () {\r\n    /**\r\n     * @param fcn        The callback to be fired after the interval is complete.\r\n     * @param interval   Interval length\r\n     * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.\r\n     * @param numberOfRepeats Specifies a maximum number of times that this timer will execute.\r\n     */\r\n    function Timer(fcn, interval, repeats, numberOfRepeats) {\r\n        this.id = 0;\r\n        this.interval = 10;\r\n        this.fcn = function () {\r\n            return;\r\n        };\r\n        this.repeats = false;\r\n        this.maxNumberOfRepeats = -1;\r\n        this._elapsedTime = 0;\r\n        this._totalTimeAlive = 0;\r\n        this._paused = false;\r\n        this._numberOfTicks = 0;\r\n        this.complete = false;\r\n        this.scene = null;\r\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = numberOfRepeats;\r\n            if (!repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.id = Timer.id++;\r\n        this.interval = interval || this.interval;\r\n        this.fcn = fcn || this.fcn;\r\n        this.repeats = repeats || this.repeats;\r\n    }\r\n    /**\r\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\r\n     * @param delta  Number of elapsed milliseconds since the last update.\r\n     */\r\n    Timer.prototype.update = function (delta) {\r\n        if (!this._paused) {\r\n            this._totalTimeAlive += delta;\r\n            this._elapsedTime += delta;\r\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\r\n                this.complete = true;\r\n            }\r\n            if (!this.complete && this._elapsedTime >= this.interval) {\r\n                this.fcn.call(this);\r\n                this._numberOfTicks++;\r\n                if (this.repeats) {\r\n                    this._elapsedTime = 0;\r\n                }\r\n                else {\r\n                    this.complete = true;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\r\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\r\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\r\n     */\r\n    Timer.prototype.reset = function (newInterval, newNumberOfRepeats) {\r\n        if (!!newInterval && newInterval >= 0) {\r\n            this.interval = newInterval;\r\n        }\r\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = newNumberOfRepeats;\r\n            if (!this.repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.complete = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n    };\r\n    Object.defineProperty(Timer.prototype, \"timesRepeated\", {\r\n        get: function () {\r\n            return this._numberOfTicks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Timer.prototype.getTimeRunning = function () {\r\n        return this._totalTimeAlive;\r\n    };\r\n    /**\r\n     * Pauses the timer so that no more time will be incremented towards the next call\r\n     */\r\n    Timer.prototype.pause = function () {\r\n        this._paused = true;\r\n    };\r\n    /**\r\n     * Unpauses the timer. Time will now increment towards the next call\r\n     */\r\n    Timer.prototype.unpause = function () {\r\n        this._paused = false;\r\n    };\r\n    /**\r\n     * Cancels the timer, preventing any further executions.\r\n     */\r\n    Timer.prototype.cancel = function () {\r\n        if (this.scene) {\r\n            this.scene.cancelTimer(this);\r\n        }\r\n    };\r\n    Timer.id = 0;\r\n    return Timer;\r\n}());\r\nexport { Timer };\r\n//# sourceMappingURL=Timer.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\nimport { Color } from './Drawing/Color';\r\nimport { Class } from './Class';\r\nimport { Vector } from './Algebra';\r\nimport { Logger } from './Util/Log';\r\nimport * as Events from './Events';\r\nimport { Configurable } from './Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar TileMapImpl = /** @class */ (function (_super) {\r\n    __extends(TileMapImpl, _super);\r\n    /**\r\n     * @param x             The x coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n     * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n     * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\r\n     * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\r\n     * @param rows          The number of rows in the TileMap (should not be changed once set)\r\n     * @param cols          The number of cols in the TileMap (should not be changed once set)\r\n     */\r\n    function TileMapImpl(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        var _this = _super.call(this) || this;\r\n        _this._collidingX = -1;\r\n        _this._collidingY = -1;\r\n        _this._onScreenXStart = 0;\r\n        _this._onScreenXEnd = 9999;\r\n        _this._onScreenYStart = 0;\r\n        _this._onScreenYEnd = 9999;\r\n        _this._spriteSheets = {};\r\n        _this.logger = Logger.getInstance();\r\n        _this.data = [];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            cellWidth = config.cellWidth;\r\n            cellHeight = config.cellHeight;\r\n            rows = config.rows;\r\n            cols = config.cols;\r\n        }\r\n        _this.x = xOrConfig;\r\n        _this.y = y;\r\n        _this.cellWidth = cellWidth;\r\n        _this.cellHeight = cellHeight;\r\n        _this.rows = rows;\r\n        _this.cols = cols;\r\n        _this.data = new Array(rows * cols);\r\n        for (var i = 0; i < cols; i++) {\r\n            for (var j = 0; j < rows; j++) {\r\n                (function () {\r\n                    var cd = new Cell(i * cellWidth + xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols);\r\n                    _this.data[i + j * cols] = cd;\r\n                })();\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    TileMapImpl.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    TileMapImpl.prototype.registerSpriteSheet = function (key, spriteSheet) {\r\n        this._spriteSheets[key] = spriteSheet;\r\n    };\r\n    /**\r\n     * Returns the intersection vector that can be used to resolve collisions with actors. If there\r\n     * is no collision null is returned.\r\n     */\r\n    TileMapImpl.prototype.collides = function (actor) {\r\n        var width = actor.pos.x + actor.getWidth();\r\n        var height = actor.pos.y + actor.getHeight();\r\n        var actorBounds = actor.getBounds();\r\n        var overlaps = [];\r\n        // trace points for overlap\r\n        for (var x = actorBounds.left; x <= width; x += Math.min(actor.getWidth() / 2, this.cellWidth / 2)) {\r\n            for (var y = actorBounds.top; y <= height; y += Math.min(actor.getHeight() / 2, this.cellHeight / 2)) {\r\n                var cell = this.getCellByPoint(x, y);\r\n                if (cell && cell.solid) {\r\n                    var overlap = actorBounds.collides(cell.getBounds());\r\n                    var dir = actor.getCenter().sub(cell.getCenter());\r\n                    if (overlap && overlap.dot(dir) > 0) {\r\n                        overlaps.push(overlap);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (overlaps.length === 0) {\r\n            return null;\r\n        }\r\n        // Return the smallest change other than zero\r\n        var result = overlaps.reduce(function (accum, next) {\r\n            var x = accum.x;\r\n            var y = accum.y;\r\n            if (Math.abs(accum.x) < Math.abs(next.x)) {\r\n                x = next.x;\r\n            }\r\n            if (Math.abs(accum.y) < Math.abs(next.y)) {\r\n                y = next.y;\r\n            }\r\n            return new Vector(x, y);\r\n        });\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by index (row major order)\r\n     */\r\n    TileMapImpl.prototype.getCellByIndex = function (index) {\r\n        return this.data[index];\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by its x and y coordinates\r\n     */\r\n    TileMapImpl.prototype.getCell = function (x, y) {\r\n        if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\r\n            return null;\r\n        }\r\n        return this.data[x + y * this.cols];\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by testing a point in global coordinates,\r\n     * returns `null` if no cell was found.\r\n     */\r\n    TileMapImpl.prototype.getCellByPoint = function (x, y) {\r\n        x = Math.floor((x - this.x) / this.cellWidth);\r\n        y = Math.floor((y - this.y) / this.cellHeight);\r\n        var cell = this.getCell(x, y);\r\n        if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\r\n            return cell;\r\n        }\r\n        return null;\r\n    };\r\n    TileMapImpl.prototype.update = function (engine, delta) {\r\n        this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\r\n        var worldCoordsUpperLeft = engine.screenToWorldCoordinates(new Vector(0, 0));\r\n        var worldCoordsLowerRight = engine.screenToWorldCoordinates(new Vector(engine.canvas.clientWidth, engine.canvas.clientHeight));\r\n        this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\r\n        this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\r\n        this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\r\n        this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\r\n        this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\r\n    };\r\n    /**\r\n     * Draws the tile map to the screen. Called by the [[Scene]].\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    TileMapImpl.prototype.draw = function (ctx, delta) {\r\n        this.emit('predraw', new Events.PreDrawEvent(ctx, delta, this));\r\n        ctx.save();\r\n        ctx.translate(this.x, this.y);\r\n        var x = this._onScreenXStart;\r\n        var xEnd = Math.min(this._onScreenXEnd, this.cols);\r\n        var y = this._onScreenYStart;\r\n        var yEnd = Math.min(this._onScreenYEnd, this.rows);\r\n        var cs, csi, cslen;\r\n        for (x; x < xEnd; x++) {\r\n            for (y; y < yEnd; y++) {\r\n                // get non-negative tile sprites\r\n                cs = this.getCell(x, y).sprites.filter(function (s) {\r\n                    return s.spriteId > -1;\r\n                });\r\n                for (csi = 0, cslen = cs.length; csi < cslen; csi++) {\r\n                    var ss = this._spriteSheets[cs[csi].spriteSheetKey];\r\n                    // draw sprite, warning if sprite doesn't exist\r\n                    if (ss) {\r\n                        var sprite = ss.getSprite(cs[csi].spriteId);\r\n                        if (sprite) {\r\n                            sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\r\n                        }\r\n                        else {\r\n                            this.logger.warn('Sprite does not exist for id', cs[csi].spriteId, 'in sprite sheet', cs[csi].spriteSheetKey, sprite, ss);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.logger.warn('Sprite sheet', cs[csi].spriteSheetKey, 'does not exist', ss);\r\n                    }\r\n                }\r\n            }\r\n            y = this._onScreenYStart;\r\n        }\r\n        ctx.restore();\r\n        this.emit('postdraw', new Events.PostDrawEvent(ctx, delta, this));\r\n    };\r\n    /**\r\n     * Draws all the tile map's debug info. Called by the [[Scene]].\r\n     * @param ctx  The current rendering context\r\n     */\r\n    TileMapImpl.prototype.debugDraw = function (ctx) {\r\n        var width = this.cols * this.cellWidth;\r\n        var height = this.rows * this.cellHeight;\r\n        ctx.save();\r\n        ctx.strokeStyle = Color.Red.toString();\r\n        for (var x = 0; x < this.cols + 1; x++) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.x + x * this.cellWidth, this.y);\r\n            ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\r\n            ctx.stroke();\r\n        }\r\n        for (var y = 0; y < this.rows + 1; y++) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.x, this.y + y * this.cellHeight);\r\n            ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\r\n            ctx.stroke();\r\n        }\r\n        var solid = Color.Red.clone();\r\n        solid.a = 0.3;\r\n        this.data\r\n            .filter(function (cell) {\r\n            return cell.solid;\r\n        })\r\n            .forEach(function (cell) {\r\n            ctx.fillStyle = solid.toString();\r\n            ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\r\n        });\r\n        if (this._collidingY > -1 && this._collidingX > -1) {\r\n            ctx.fillStyle = Color.Cyan.toString();\r\n            ctx.fillRect(this.x + this._collidingX * this.cellWidth, this.y + this._collidingY * this.cellHeight, this.cellWidth, this.cellHeight);\r\n        }\r\n        ctx.restore();\r\n    };\r\n    return TileMapImpl;\r\n}(Class));\r\nexport { TileMapImpl };\r\n/**\r\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\r\n * without the overhead of actors.\r\n *\r\n * [[include:TileMaps.md]]\r\n */\r\nvar TileMap = /** @class */ (function (_super) {\r\n    __extends(TileMap, _super);\r\n    function TileMap(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        return _super.call(this, xOrConfig, y, cellWidth, cellHeight, rows, cols) || this;\r\n    }\r\n    return TileMap;\r\n}(Configurable(TileMapImpl)));\r\nexport { TileMap };\r\n/**\r\n * Tile sprites are used to render a specific sprite from a [[TileMap]]'s spritesheet(s)\r\n */\r\nvar TileSprite = /** @class */ (function () {\r\n    /**\r\n     * @param spriteSheetKey  The key of the spritesheet to use\r\n     * @param spriteId        The index of the sprite in the [[SpriteSheet]]\r\n     */\r\n    function TileSprite(spriteSheetKey, spriteId) {\r\n        this.spriteSheetKey = spriteSheetKey;\r\n        this.spriteId = spriteId;\r\n    }\r\n    return TileSprite;\r\n}());\r\nexport { TileSprite };\r\n/**\r\n * @hidden\r\n */\r\nvar CellImpl = /** @class */ (function () {\r\n    /**\r\n     * @param x       Gets or sets x coordinate of the cell in world coordinates\r\n     * @param y       Gets or sets y coordinate of the cell in world coordinates\r\n     * @param width   Gets or sets the width of the cell\r\n     * @param height  Gets or sets the height of the cell\r\n     * @param index   The index of the cell in row major order\r\n     * @param solid   Gets or sets whether this cell is solid\r\n     * @param sprites The list of tile sprites to use to draw in this cell (in order)\r\n     */\r\n    function CellImpl(xOrConfig, y, width, height, index, solid, sprites) {\r\n        if (solid === void 0) { solid = false; }\r\n        if (sprites === void 0) { sprites = []; }\r\n        this.solid = false;\r\n        this.sprites = [];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            width = config.width;\r\n            height = config.height;\r\n            index = config.index;\r\n            solid = config.solid;\r\n            sprites = config.sprites;\r\n        }\r\n        this.x = xOrConfig;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.index = index;\r\n        this.solid = solid;\r\n        this.sprites = sprites;\r\n        this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\r\n    }\r\n    /**\r\n     * Returns the bounding box for this cell\r\n     */\r\n    CellImpl.prototype.getBounds = function () {\r\n        return this._bounds;\r\n    };\r\n    /**\r\n     * Gets the center coordinate of this cell\r\n     */\r\n    CellImpl.prototype.getCenter = function () {\r\n        return new Vector(this.x + this.width / 2, this.y + this.height / 2);\r\n    };\r\n    /**\r\n     * Add another [[TileSprite]] to this cell\r\n     */\r\n    CellImpl.prototype.pushSprite = function (tileSprite) {\r\n        this.sprites.push(tileSprite);\r\n    };\r\n    /**\r\n     * Remove an instance of [[TileSprite]] from this cell\r\n     */\r\n    CellImpl.prototype.removeSprite = function (tileSprite) {\r\n        var index = -1;\r\n        if ((index = this.sprites.indexOf(tileSprite)) > -1) {\r\n            this.sprites.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Clear all sprites from this cell\r\n     */\r\n    CellImpl.prototype.clearSprites = function () {\r\n        this.sprites.length = 0;\r\n    };\r\n    return CellImpl;\r\n}());\r\nexport { CellImpl };\r\n/**\r\n * TileMap Cell\r\n *\r\n * A light-weight object that occupies a space in a collision map. Generally\r\n * created by a [[TileMap]].\r\n *\r\n * Cells can draw multiple sprites. Note that the order of drawing is the order\r\n * of the sprites in the array so the last one will be drawn on top. You can\r\n * use transparency to create layers this way.\r\n */\r\nvar Cell = /** @class */ (function (_super) {\r\n    __extends(Cell, _super);\r\n    function Cell(xOrConfig, y, width, height, index, solid, sprites) {\r\n        return _super.call(this, xOrConfig, y, width, height, index, solid, sprites) || this;\r\n    }\r\n    return Cell;\r\n}(Configurable(CellImpl)));\r\nexport { Cell };\r\n//# sourceMappingURL=TileMap.js.map","/**\r\n * Internal class used to build instances of AudioContext\r\n */\r\n/* istanbul ignore next */\r\nvar AudioContextFactory = /** @class */ (function () {\r\n    function AudioContextFactory() {\r\n    }\r\n    AudioContextFactory.create = function () {\r\n        if (!this._INSTANCE) {\r\n            if (window.AudioContext || window.webkitAudioContext) {\r\n                this._INSTANCE = new window.AudioContext() || new window.webkitAudioContext();\r\n            }\r\n        }\r\n        return this._INSTANCE;\r\n    };\r\n    AudioContextFactory._INSTANCE = null;\r\n    return AudioContextFactory;\r\n}());\r\nexport { AudioContextFactory };\r\n//# sourceMappingURL=AudioContext.js.map","import { AudioContextFactory } from '../Resources/Sound/AudioContext';\r\nvar WebAudio = /** @class */ (function () {\r\n    function WebAudio() {\r\n    }\r\n    /**\r\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\r\n     * right after a user interaction event. Typically used by [[PauseAfterLoader]]\r\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n     */\r\n    WebAudio.unlock = function () {\r\n        if (WebAudio._unlocked || !AudioContextFactory.create()) {\r\n            return;\r\n        }\r\n        var audioContext = AudioContextFactory.create();\r\n        // create empty buffer and play it\r\n        var buffer = audioContext.createBuffer(1, 1, 22050);\r\n        var source = audioContext.createBufferSource();\r\n        var ended = false;\r\n        source.buffer = buffer;\r\n        source.connect(audioContext.destination);\r\n        source.onended = function () { return (ended = true); };\r\n        if (source.noteOn) {\r\n            // deprecated\r\n            source.noteOn(0);\r\n        }\r\n        else {\r\n            source.start(0);\r\n        }\r\n        // by checking the play state after some time, we know if we're really unlocked\r\n        setTimeout(function () {\r\n            if (source.playbackState) {\r\n                var legacySource = source;\r\n                if (legacySource.playbackState === legacySource.PLAYING_STATE || legacySource.playbackState === legacySource.FINISHED_STATE) {\r\n                    WebAudio._unlocked = true;\r\n                }\r\n            }\r\n            else {\r\n                if (audioContext.currentTime > 0 || ended) {\r\n                    WebAudio._unlocked = true;\r\n                }\r\n            }\r\n        }, 0);\r\n    };\r\n    WebAudio.isUnlocked = function () {\r\n        return this._unlocked;\r\n    };\r\n    WebAudio._unlocked = false;\r\n    return WebAudio;\r\n}());\r\nexport { WebAudio };\r\n//# sourceMappingURL=WebAudio.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { WebAudio } from './Util/WebAudio';\r\nimport { Logger } from './Util/Log';\r\nimport { Promise, PromiseState } from './Promises';\r\nimport { Class } from './Class';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\n/**\r\n * Pre-loading assets\r\n *\r\n * The loader provides a mechanism to preload multiple resources at\r\n * one time. The loader must be passed to the engine in order to\r\n * trigger the loading progress bar.\r\n *\r\n * The [[Loader]] itself implements [[ILoadable]] so you can load loaders.\r\n *\r\n * ## Example: Pre-loading resources for a game\r\n *\r\n * ```js\r\n * // create a loader\r\n * var loader = new ex.Loader();\r\n *\r\n * // create a resource dictionary (best practice is to keep a separate file)\r\n * var resources = {\r\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\r\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\r\n * };\r\n *\r\n * // loop through dictionary and add to loader\r\n * for (var loadable in resources) {\r\n *   if (resources.hasOwnProperty(loadable)) {\r\n *     loader.addResource(resources[loadable]);\r\n *   }\r\n * }\r\n *\r\n * // start game\r\n * game.start(loader).then(function () {\r\n *   console.log(\"Game started!\");\r\n * });\r\n * ```\r\n */\r\nvar Loader = /** @class */ (function (_super) {\r\n    __extends(Loader, _super);\r\n    /**\r\n     * @param loadables  Optionally provide the list of resources you want to load at constructor time\r\n     */\r\n    function Loader(loadables) {\r\n        var _this = _super.call(this) || this;\r\n        _this._resourceList = [];\r\n        _this._index = 0;\r\n        _this._resourceCount = 0;\r\n        _this._numLoaded = 0;\r\n        _this._progressCounts = {};\r\n        _this._totalCounts = {};\r\n        // logo drawing stuff\r\n        /* tslint:disable:max-line-length */\r\n        // base64 string encoding of the excalibur logo (logo-white.png)\r\n        _this.logo = 'data:image/png;base64,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';\r\n        /* tslint:enable:max-line-length */\r\n        _this.logoWidth = 468;\r\n        _this.logoHeight = 118;\r\n        _this.backgroundColor = '#176BAA';\r\n        _this.getData = function () {\r\n            return;\r\n        };\r\n        _this.setData = function () {\r\n            return;\r\n        };\r\n        _this.processData = function () {\r\n            return;\r\n        };\r\n        _this.onprogress = function (e) {\r\n            Logger.getInstance().debug('[ex.Loader] Loading ' + ((100 * e.loaded) / e.total).toFixed(0));\r\n            return;\r\n        };\r\n        _this.oncomplete = function () {\r\n            return;\r\n        };\r\n        _this.onerror = function () {\r\n            return;\r\n        };\r\n        if (loadables) {\r\n            _this.addResources(loadables);\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Loader.prototype, \"_image\", {\r\n        get: function () {\r\n            if (!this._imageElement) {\r\n                this._imageElement = new Image();\r\n                this._imageElement.src = this.logo;\r\n            }\r\n            return this._imageElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Loader.prototype.wireEngine = function (engine) {\r\n        this._engine = engine;\r\n    };\r\n    /**\r\n     * Add a resource to the loader to load\r\n     * @param loadable  Resource to add\r\n     */\r\n    Loader.prototype.addResource = function (loadable) {\r\n        var key = this._index++;\r\n        this._resourceList.push(loadable);\r\n        this._progressCounts[key] = 0;\r\n        this._totalCounts[key] = 1;\r\n        this._resourceCount++;\r\n    };\r\n    /**\r\n     * Add a list of resources to the loader to load\r\n     * @param loadables  The list of resources to load\r\n     */\r\n    Loader.prototype.addResources = function (loadables) {\r\n        var i = 0, len = loadables.length;\r\n        for (i; i < len; i++) {\r\n            this.addResource(loadables[i]);\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if the loader has completely loaded all resources\r\n     */\r\n    Loader.prototype.isLoaded = function () {\r\n        return this._numLoaded === this._resourceCount;\r\n    };\r\n    /**\r\n     * Begin loading all of the supplied resources, returning a promise\r\n     * that resolves when loading of all is complete\r\n     */\r\n    Loader.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        var me = this;\r\n        if (this._resourceList.length === 0) {\r\n            me.oncomplete.call(me);\r\n            return complete.resolve();\r\n        }\r\n        var progressArray = new Array(this._resourceList.length);\r\n        var progressChunks = this._resourceList.length;\r\n        this._resourceList.forEach(function (r, i) {\r\n            if (_this._engine) {\r\n                r.wireEngine(_this._engine);\r\n            }\r\n            r.onprogress = function (e) {\r\n                var total = e.total;\r\n                var loaded = e.loaded;\r\n                progressArray[i] = { loaded: (loaded / total) * (100 / progressChunks), total: 100 };\r\n                var progressResult = progressArray.reduce(function (accum, next) {\r\n                    return { loaded: accum.loaded + next.loaded, total: 100 };\r\n                }, { loaded: 0, total: 100 });\r\n                me.onprogress.call(me, progressResult);\r\n            };\r\n            r.oncomplete = r.onerror = function () {\r\n                me._numLoaded++;\r\n                if (me._numLoaded === me._resourceCount) {\r\n                    me.oncomplete.call(me);\r\n                    complete.resolve();\r\n                }\r\n            };\r\n        });\r\n        function loadNext(list, index) {\r\n            if (!list[index]) {\r\n                return;\r\n            }\r\n            list[index].load().then(function () {\r\n                loadNext(list, index + 1);\r\n            });\r\n        }\r\n        loadNext(this._resourceList, 0);\r\n        return complete;\r\n    };\r\n    /**\r\n     * Loader draw function. Draws the default Excalibur loading screen.\r\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\r\n     * to customize the drawing, or just override entire method.\r\n     */\r\n    Loader.prototype.draw = function (ctx) {\r\n        var canvasHeight = this._engine.canvasHeight / window.devicePixelRatio;\r\n        var canvasWidth = this._engine.canvasWidth / window.devicePixelRatio;\r\n        ctx.fillStyle = this.backgroundColor;\r\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        var y = canvasHeight / 2;\r\n        var width = Math.min(this.logoWidth, canvasWidth * 0.75);\r\n        var x = canvasWidth / 2 - width / 2;\r\n        var imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\r\n        var oldAntialias = this._engine.getAntialiasing();\r\n        this._engine.setAntialiasing(true);\r\n        ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, x, y - imageHeight - 20, width, imageHeight);\r\n        // loading box\r\n        ctx.lineWidth = 2;\r\n        DrawUtil.roundRect(ctx, x, y, width, 20, 10);\r\n        var progress = width * (this._numLoaded / this._resourceCount);\r\n        var margin = 5;\r\n        var progressWidth = progress - margin * 2;\r\n        var height = 20 - margin * 2;\r\n        DrawUtil.roundRect(ctx, x + margin, y + margin, progressWidth > 0 ? progressWidth : 0, height, 5, null, Color.White);\r\n        this._engine.setAntialiasing(oldAntialias);\r\n    };\r\n    /**\r\n     * Perform any calculations or logic in the `update` method. The default `Loader` does not\r\n     * do anything in this method so it is safe to override.\r\n     */\r\n    Loader.prototype.update = function (_engine, _delta) {\r\n        // overridable update\r\n    };\r\n    return Loader;\r\n}(Class));\r\nexport { Loader };\r\n/**\r\n * A [[Loader]] that pauses after loading to allow user\r\n * to proceed to play the game. Typically you will\r\n * want to use this loader for iOS to allow sounds\r\n * to play after loading (Apple Safari requires user\r\n * interaction to allow sounds, even for games)\r\n *\r\n * **Note:** Because Loader is not part of a Scene, you must\r\n * call `update` and `draw` manually on \"child\" objects.\r\n *\r\n * ## Implementing a Trigger\r\n *\r\n * The `PauseAfterLoader` requires an element to act as the trigger button\r\n * to start the game.\r\n *\r\n * For example, let's create an `<a>` tag to be our trigger and call it `tap-to-play`.\r\n *\r\n * ```html\r\n * <div id=\"wrapper\">\r\n *    <canvas id=\"game\"></canvas>\r\n *    <a id=\"tap-to-play\" href='javascript:void(0);'>Tap to Play</a>\r\n * </div>\r\n * ```\r\n *\r\n * We've put it inside a wrapper to position it properly over the game canvas.\r\n *\r\n * Now let's add some CSS to style it (insert into `<head>`):\r\n *\r\n * ```html\r\n * <style>\r\n *     #wrapper {\r\n *         position: relative;\r\n *         width: 500px;\r\n *         height: 500px;\r\n *     }\r\n *     #tap-to-play {\r\n *         display: none;\r\n *         font-size: 24px;\r\n *         font-family: sans-serif;\r\n *         text-align: center;\r\n *         border: 3px solid white;\r\n *         position: absolute;\r\n *         color: white;\r\n *         width: 200px;\r\n *         height: 50px;\r\n *         line-height: 50px;\r\n *         text-decoration: none;\r\n *         left: 147px;\r\n *         top: 80%;\r\n *     }\r\n * </style>\r\n * ```\r\n *\r\n * Now we can create a `PauseAfterLoader` with a reference to our trigger button:\r\n *\r\n * ```ts\r\n * var loader = new ex.PauseAfterLoader('tap-to-play', [...]);\r\n * ```\r\n *\r\n * ## Use PauseAfterLoader for iOS\r\n *\r\n * The primary use case for pausing before starting the game is to\r\n * pass Apple's requirement of user interaction. The Web Audio context\r\n * in Safari is disabled by default until user interaction.\r\n *\r\n * Therefore, you can use this snippet to only use PauseAfterLoader when\r\n * iOS is detected (see [this thread](http://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\r\n * for more techniques).\r\n *\r\n * ```ts\r\n * var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(<any>window).MSStream;\r\n * var loader: ex.Loader = iOS ? new ex.PauseAfterLoader('tap-to-play') : new ex.Loader();\r\n *\r\n * loader.addResource(...);\r\n * ```\r\n */\r\nvar PauseAfterLoader = /** @class */ (function (_super) {\r\n    __extends(PauseAfterLoader, _super);\r\n    function PauseAfterLoader(triggerElementId, loadables) {\r\n        var _this = _super.call(this, loadables) || this;\r\n        _this._handleOnTrigger = function () {\r\n            if (_this._waitPromise.state() !== PromiseState.Pending) {\r\n                return false;\r\n            }\r\n            // unlock Safari WebAudio context\r\n            WebAudio.unlock();\r\n            // continue to play game\r\n            _this._waitPromise.resolve(_this._loadedValue);\r\n            // hide DOM element\r\n            _this._playTrigger.style.display = 'none';\r\n            return false;\r\n        };\r\n        _this._playTrigger = document.getElementById(triggerElementId);\r\n        _this._playTrigger.addEventListener('click', _this._handleOnTrigger);\r\n        return _this;\r\n    }\r\n    PauseAfterLoader.prototype.load = function () {\r\n        var _this = this;\r\n        this._waitPromise = new Promise();\r\n        // wait until user indicates to proceed before finishing load\r\n        _super.prototype.load.call(this).then(function (value) {\r\n            _this._loadedValue = value;\r\n            // show element\r\n            _this._playTrigger.style.display = 'block';\r\n        }, function (value) {\r\n            _this._waitPromise.reject(value);\r\n        });\r\n        return this._waitPromise;\r\n    };\r\n    return PauseAfterLoader;\r\n}(Loader));\r\nexport { PauseAfterLoader };\r\n//# sourceMappingURL=Loader.js.map","import { Logger } from './Log';\r\n/**\r\n * This is the list of features that will be used to log the supported\r\n * features to the console when Detector.logBrowserFeatures() is called.\r\n */\r\nvar REPORTED_FEATURES = {\r\n    webgl: 'WebGL',\r\n    webaudio: 'WebAudio',\r\n    gamepadapi: 'Gamepad API'\r\n};\r\n/**\r\n * Excalibur internal feature detection helper class\r\n */\r\nvar Detector = /** @class */ (function () {\r\n    function Detector() {\r\n        this._features = null;\r\n        this.failedTests = [];\r\n        // critical browser features required for ex to run\r\n        this._criticalTests = {\r\n            // Test canvas/2d context support\r\n            canvasSupport: function () {\r\n                var elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('2d'));\r\n            },\r\n            // Test array buffer support ex uses for downloading binary data\r\n            arrayBufferSupport: function () {\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.open('GET', '/');\r\n                try {\r\n                    xhr.responseType = 'arraybuffer';\r\n                }\r\n                catch (e) {\r\n                    return false;\r\n                }\r\n                return xhr.responseType === 'arraybuffer';\r\n            },\r\n            // Test data urls ex uses for sprites\r\n            dataUrlSupport: function () {\r\n                var canvas = document.createElement('canvas');\r\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\r\n            },\r\n            // Test object url support for loading\r\n            objectUrlSupport: function () {\r\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\r\n            },\r\n            // RGBA support for colors\r\n            rgbaSupport: function () {\r\n                var style = document.createElement('a').style;\r\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\r\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\r\n            }\r\n        };\r\n        // warnings excalibur performance will be degraded\r\n        this._warningTest = {\r\n            webAudioSupport: function () {\r\n                return !!(window.AudioContext ||\r\n                    window.webkitAudioContext ||\r\n                    window.mozAudioContext ||\r\n                    window.msAudioContext ||\r\n                    window.oAudioContext);\r\n            },\r\n            webglSupport: function () {\r\n                var elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('webgl'));\r\n            }\r\n        };\r\n        this._features = this._loadBrowserFeatures();\r\n    }\r\n    /**\r\n     * Returns a map of currently supported browser features. This method\r\n     * treats the features as a singleton and will only calculate feature\r\n     * support if it has not previously been done.\r\n     */\r\n    Detector.prototype.getBrowserFeatures = function () {\r\n        if (this._features === null) {\r\n            this._features = this._loadBrowserFeatures();\r\n        }\r\n        return this._features;\r\n    };\r\n    /**\r\n     * Report on non-critical browser support for debugging purposes.\r\n     * Use native browser console colors for visibility.\r\n     */\r\n    Detector.prototype.logBrowserFeatures = function () {\r\n        var msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\r\n        var args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\r\n        var supported = this.getBrowserFeatures();\r\n        for (var _i = 0, _a = Object.keys(REPORTED_FEATURES); _i < _a.length; _i++) {\r\n            var feature = _a[_i];\r\n            if (supported[feature]) {\r\n                msg += '(%c\\u2713%c)'; // ()\r\n                args.push('font-weight: bold; color: green');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            else {\r\n                msg += '(%c\\u2717%c)'; // ()\r\n                args.push('font-weight: bold; color: red');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\r\n        }\r\n        args.unshift(msg);\r\n        console.log.apply(console, args);\r\n    };\r\n    /**\r\n     * Executes several IIFE's to get a constant reference to supported\r\n     * features within the current execution context.\r\n     */\r\n    Detector.prototype._loadBrowserFeatures = function () {\r\n        var _this = this;\r\n        return {\r\n            // IIFE to check canvas support\r\n            canvas: (function () {\r\n                return _this._criticalTests.canvasSupport();\r\n            })(),\r\n            // IIFE to check arraybuffer support\r\n            arraybuffer: (function () {\r\n                return _this._criticalTests.arrayBufferSupport();\r\n            })(),\r\n            // IIFE to check dataurl support\r\n            dataurl: (function () {\r\n                return _this._criticalTests.dataUrlSupport();\r\n            })(),\r\n            // IIFE to check objecturl support\r\n            objecturl: (function () {\r\n                return _this._criticalTests.objectUrlSupport();\r\n            })(),\r\n            // IIFE to check rgba support\r\n            rgba: (function () {\r\n                return _this._criticalTests.rgbaSupport();\r\n            })(),\r\n            // IIFE to check webaudio support\r\n            webaudio: (function () {\r\n                return _this._warningTest.webAudioSupport();\r\n            })(),\r\n            // IIFE to check webgl support\r\n            webgl: (function () {\r\n                return _this._warningTest.webglSupport();\r\n            })(),\r\n            // IIFE to check gamepadapi support\r\n            gamepadapi: (function () {\r\n                return !!navigator.getGamepads;\r\n            })()\r\n        };\r\n    };\r\n    Detector.prototype.test = function () {\r\n        // Critical test will for ex not to run\r\n        var failedCritical = false;\r\n        for (var test in this._criticalTests) {\r\n            if (!this._criticalTests[test].call(this)) {\r\n                this.failedTests.push(test);\r\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\r\n                failedCritical = true;\r\n            }\r\n        }\r\n        if (failedCritical) {\r\n            return false;\r\n        }\r\n        // Warning tests do not for ex to return false to compatibility\r\n        for (var warning in this._warningTest) {\r\n            if (!this._warningTest[warning]()) {\r\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    return Detector;\r\n}());\r\nexport { Detector };\r\n//# sourceMappingURL=Detector.js.map","import { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { Logger } from '../Util/Log';\r\n/**\r\n * Dynamic Tree Node used for tracking bounds within the tree\r\n */\r\nvar TreeNode = /** @class */ (function () {\r\n    function TreeNode(parent) {\r\n        this.parent = parent;\r\n        this.parent = parent || null;\r\n        this.body = null;\r\n        this.bounds = new BoundingBox();\r\n        this.left = null;\r\n        this.right = null;\r\n        this.height = 0;\r\n    }\r\n    TreeNode.prototype.isLeaf = function () {\r\n        return !this.left && !this.right;\r\n    };\r\n    return TreeNode;\r\n}());\r\nexport { TreeNode };\r\n/**\r\n * The DynamicTrees provides a spatial partiioning data structure for quickly querying for overlapping bounding boxes for\r\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\r\n *\r\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\r\n * Every non-leaf node is a bounding box that contains child bounding boxes.\r\n */\r\nvar DynamicTree = /** @class */ (function () {\r\n    function DynamicTree(worldBounds) {\r\n        if (worldBounds === void 0) { worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE); }\r\n        this.worldBounds = worldBounds;\r\n        this.root = null;\r\n        this.nodes = {};\r\n    }\r\n    /**\r\n     * Inserts a node into the dynamic tree\r\n     */\r\n    DynamicTree.prototype._insert = function (leaf) {\r\n        // If there are no nodes in the tree, make this the root leaf\r\n        if (this.root === null) {\r\n            this.root = leaf;\r\n            this.root.parent = null;\r\n            return;\r\n        }\r\n        // Search the tree for a node that is not a leaf and find the best place to insert\r\n        var leafAABB = leaf.bounds;\r\n        var currentRoot = this.root;\r\n        while (!currentRoot.isLeaf()) {\r\n            var left = currentRoot.left;\r\n            var right = currentRoot.right;\r\n            var area = currentRoot.bounds.getPerimeter();\r\n            var combinedAABB = currentRoot.bounds.combine(leafAABB);\r\n            var combinedArea = combinedAABB.getPerimeter();\r\n            // Calculate cost heuristic for creating a new parent and leaf\r\n            var cost = 2 * combinedArea;\r\n            // Minimum cost of pushing the leaf down the tree\r\n            var inheritanceCost = 2 * (combinedArea - area);\r\n            // Cost of descending\r\n            var leftCost = 0;\r\n            var leftCombined = leafAABB.combine(left.bounds);\r\n            var newArea;\r\n            var oldArea;\r\n            if (left.isLeaf()) {\r\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = left.bounds.getPerimeter();\r\n                newArea = leftCombined.getPerimeter();\r\n                leftCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            var rightCost = 0;\r\n            var rightCombined = leafAABB.combine(right.bounds);\r\n            if (right.isLeaf()) {\r\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = right.bounds.getPerimeter();\r\n                newArea = rightCombined.getPerimeter();\r\n                rightCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            // cost is acceptable\r\n            if (cost < leftCost && cost < rightCost) {\r\n                break;\r\n            }\r\n            // Descend to the depths\r\n            if (leftCost < rightCost) {\r\n                currentRoot = left;\r\n            }\r\n            else {\r\n                currentRoot = right;\r\n            }\r\n        }\r\n        // Create the new parent node and insert into the tree\r\n        var oldParent = currentRoot.parent;\r\n        var newParent = new TreeNode(oldParent);\r\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\r\n        newParent.height = currentRoot.height + 1;\r\n        if (oldParent !== null) {\r\n            // The sibling node was not the root\r\n            if (oldParent.left === currentRoot) {\r\n                oldParent.left = newParent;\r\n            }\r\n            else {\r\n                oldParent.right = newParent;\r\n            }\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n        }\r\n        else {\r\n            // The sibling node was the root\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n            this.root = newParent;\r\n        }\r\n        // Walk up the tree fixing heights and AABBs\r\n        var currentNode = leaf.parent;\r\n        while (currentNode) {\r\n            currentNode = this._balance(currentNode);\r\n            if (!currentNode.left) {\r\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\r\n            }\r\n            if (!currentNode.right) {\r\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\r\n            }\r\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n            currentNode = currentNode.parent;\r\n        }\r\n    };\r\n    /**\r\n     * Removes a node from the dynamic tree\r\n     */\r\n    DynamicTree.prototype._remove = function (leaf) {\r\n        if (leaf === this.root) {\r\n            this.root = null;\r\n            return;\r\n        }\r\n        var parent = leaf.parent;\r\n        var grandParent = parent.parent;\r\n        var sibling;\r\n        if (parent.left === leaf) {\r\n            sibling = parent.right;\r\n        }\r\n        else {\r\n            sibling = parent.left;\r\n        }\r\n        if (grandParent) {\r\n            if (grandParent.left === parent) {\r\n                grandParent.left = sibling;\r\n            }\r\n            else {\r\n                grandParent.right = sibling;\r\n            }\r\n            sibling.parent = grandParent;\r\n            var currentNode = grandParent;\r\n            while (currentNode) {\r\n                currentNode = this._balance(currentNode);\r\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n                currentNode = currentNode.parent;\r\n            }\r\n        }\r\n        else {\r\n            this.root = sibling;\r\n            sibling.parent = null;\r\n        }\r\n    };\r\n    /**\r\n     * Tracks a body in the dynamic tree\r\n     */\r\n    DynamicTree.prototype.trackBody = function (body) {\r\n        var node = new TreeNode();\r\n        node.body = body;\r\n        node.bounds = body.getBounds();\r\n        node.bounds.left -= 2;\r\n        node.bounds.top -= 2;\r\n        node.bounds.right += 2;\r\n        node.bounds.bottom += 2;\r\n        this.nodes[body.actor.id] = node;\r\n        this._insert(node);\r\n    };\r\n    /**\r\n     * Updates the dynamic tree given the current bounds of each body being tracked\r\n     */\r\n    DynamicTree.prototype.updateBody = function (body) {\r\n        var node = this.nodes[body.actor.id];\r\n        if (!node) {\r\n            return false;\r\n        }\r\n        var b = body.getBounds();\r\n        // if the body is outside the world no longer update it\r\n        if (!this.worldBounds.contains(b)) {\r\n            Logger.getInstance().warn('Actor with id ' + body.actor.id + ' is outside the world bounds and will no longer be tracked for physics');\r\n            this.untrackBody(body);\r\n            return false;\r\n        }\r\n        if (node.bounds.contains(b)) {\r\n            return false;\r\n        }\r\n        this._remove(node);\r\n        b.left -= Physics.boundsPadding;\r\n        b.top -= Physics.boundsPadding;\r\n        b.right += Physics.boundsPadding;\r\n        b.bottom += Physics.boundsPadding;\r\n        var multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplyer;\r\n        var multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplyer;\r\n        if (multdx < 0) {\r\n            b.left += multdx;\r\n        }\r\n        else {\r\n            b.right += multdx;\r\n        }\r\n        if (multdy < 0) {\r\n            b.top += multdy;\r\n        }\r\n        else {\r\n            b.bottom += multdy;\r\n        }\r\n        node.bounds = b;\r\n        this._insert(node);\r\n        return true;\r\n    };\r\n    /**\r\n     * Untracks a body from the dynamic tree\r\n     */\r\n    DynamicTree.prototype.untrackBody = function (body) {\r\n        var node = this.nodes[body.actor.id];\r\n        if (!node) {\r\n            return;\r\n        }\r\n        this._remove(node);\r\n        this.nodes[body.actor.id] = null;\r\n        delete this.nodes[body.actor.id];\r\n    };\r\n    /**\r\n     * Balances the tree about a node\r\n     */\r\n    DynamicTree.prototype._balance = function (node) {\r\n        if (node === null) {\r\n            throw new Error('Cannot balance at null node');\r\n        }\r\n        if (node.isLeaf() || node.height < 2) {\r\n            return node;\r\n        }\r\n        var left = node.left;\r\n        var right = node.right;\r\n        var a = node;\r\n        var b = left;\r\n        var c = right;\r\n        var d = left.left;\r\n        var e = left.right;\r\n        var f = right.left;\r\n        var g = right.right;\r\n        var balance = c.height - b.height;\r\n        // Rotate c node up\r\n        if (balance > 1) {\r\n            // Swap the right node with it's parent\r\n            c.left = a;\r\n            c.parent = a.parent;\r\n            a.parent = c;\r\n            // The original node's old parent should point to the right node\r\n            // this is mega confusing\r\n            if (c.parent) {\r\n                if (c.parent.left === a) {\r\n                    c.parent.left = c;\r\n                }\r\n                else {\r\n                    c.parent.right = c;\r\n                }\r\n            }\r\n            else {\r\n                this.root = c;\r\n            }\r\n            // Rotate\r\n            if (f.height > g.height) {\r\n                c.right = f;\r\n                a.right = g;\r\n                g.parent = a;\r\n                a.bounds = b.bounds.combine(g.bounds);\r\n                c.bounds = a.bounds.combine(f.bounds);\r\n                a.height = 1 + Math.max(b.height, g.height);\r\n                c.height = 1 + Math.max(a.height, f.height);\r\n            }\r\n            else {\r\n                c.right = g;\r\n                a.right = f;\r\n                f.parent = a;\r\n                a.bounds = b.bounds.combine(f.bounds);\r\n                c.bounds = a.bounds.combine(g.bounds);\r\n                a.height = 1 + Math.max(b.height, f.height);\r\n                c.height = 1 + Math.max(a.height, g.height);\r\n            }\r\n            return c;\r\n        }\r\n        // Rotate left node up\r\n        if (balance < -1) {\r\n            // swap\r\n            b.left = a;\r\n            b.parent = a.parent;\r\n            a.parent = b;\r\n            // node's old parent should point to b\r\n            if (b.parent) {\r\n                if (b.parent.left === a) {\r\n                    b.parent.left = b;\r\n                }\r\n                else {\r\n                    if (b.parent.right !== a) {\r\n                        throw 'Error rotating Dynamic Tree';\r\n                    }\r\n                    b.parent.right = b;\r\n                }\r\n            }\r\n            else {\r\n                this.root = b;\r\n            }\r\n            // rotate\r\n            if (d.height > e.height) {\r\n                b.right = d;\r\n                a.left = e;\r\n                e.parent = a;\r\n                a.bounds = c.bounds.combine(e.bounds);\r\n                b.bounds = a.bounds.combine(d.bounds);\r\n                a.height = 1 + Math.max(c.height, e.height);\r\n                b.height = 1 + Math.max(a.height, d.height);\r\n            }\r\n            else {\r\n                b.right = e;\r\n                a.left = d;\r\n                d.parent = a;\r\n                a.bounds = c.bounds.combine(d.bounds);\r\n                b.bounds = a.bounds.combine(e.bounds);\r\n                a.height = 1 + Math.max(c.height, d.height);\r\n                b.height = 1 + Math.max(a.height, e.height);\r\n            }\r\n            return b;\r\n        }\r\n        return node;\r\n    };\r\n    /**\r\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\r\n     */\r\n    DynamicTree.prototype.getHeight = function () {\r\n        if (this.root === null) {\r\n            return 0;\r\n        }\r\n        return this.root.height;\r\n    };\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\r\n     *\r\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\r\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\r\n     * the tree until all possible colliders have been returned.\r\n     */\r\n    DynamicTree.prototype.query = function (body, callback) {\r\n        var bounds = body.getBounds();\r\n        var helper = function (currentNode) {\r\n            if (currentNode && currentNode.bounds.collides(bounds)) {\r\n                if (currentNode.isLeaf() && currentNode.body !== body) {\r\n                    if (callback.call(body, currentNode.body)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        helper(this.root);\r\n    };\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\r\n     * long ray to test the tree specified by `max`.\r\n     *\r\n     * In the query callback, it will be passed a potential body that intersects with the racast. Returning true from this\r\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\r\n     * the tree until all possible bodies that would intersect with the ray have been returned.\r\n     */\r\n    DynamicTree.prototype.rayCastQuery = function (ray, max, callback) {\r\n        if (max === void 0) { max = Infinity; }\r\n        var helper = function (currentNode) {\r\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\r\n                if (currentNode.isLeaf()) {\r\n                    if (callback.call(ray, currentNode.body)) {\r\n                        // ray hit a leaf! return the body\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    // ray hit but not at a leaf, recurse deeper\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false; // ray missed\r\n        };\r\n        helper(this.root);\r\n    };\r\n    DynamicTree.prototype.getNodes = function () {\r\n        var helper = function (currentNode) {\r\n            if (currentNode) {\r\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        return helper(this.root);\r\n    };\r\n    DynamicTree.prototype.debugDraw = function (ctx) {\r\n        // draw all the nodes in the Dynamic Tree\r\n        var helper = function (currentNode) {\r\n            if (currentNode) {\r\n                if (currentNode.isLeaf()) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = 'green';\r\n                }\r\n                else {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = 'white';\r\n                }\r\n                currentNode.bounds.debugDraw(ctx);\r\n                if (currentNode.left) {\r\n                    helper(currentNode.left);\r\n                }\r\n                if (currentNode.right) {\r\n                    helper(currentNode.right);\r\n                }\r\n            }\r\n        };\r\n        helper(this.root);\r\n    };\r\n    return DynamicTree;\r\n}());\r\nexport { DynamicTree };\r\n//# sourceMappingURL=DynamicTree.js.map","import { Physics } from './../Physics';\r\nimport { DynamicTree } from './DynamicTree';\r\nimport { Pair } from './Pair';\r\nimport { Vector, Ray } from '../Algebra';\r\nimport { CollisionType } from '../Actor';\r\nimport { Logger } from '../Util/Log';\r\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\r\nvar DynamicTreeCollisionBroadphase = /** @class */ (function () {\r\n    function DynamicTreeCollisionBroadphase() {\r\n        this._dynamicCollisionTree = new DynamicTree();\r\n        this._collisionHash = {};\r\n        this._collisionPairCache = [];\r\n        this._lastFramePairs = [];\r\n        this._lastFramePairsHash = {};\r\n    }\r\n    /**\r\n     * Tracks a physics body for collisions\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.track = function (target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot track null physics body');\r\n            return;\r\n        }\r\n        this._dynamicCollisionTree.trackBody(target);\r\n    };\r\n    /**\r\n     * Untracks a physics body\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.untrack = function (target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot untrack a null physics body');\r\n            return;\r\n        }\r\n        this._dynamicCollisionTree.untrackBody(target);\r\n    };\r\n    DynamicTreeCollisionBroadphase.prototype._canCollide = function (actorA, actorB) {\r\n        // if the collision pair has been calculated already short circuit\r\n        var hash = Pair.calculatePairHash(actorA.body, actorB.body);\r\n        if (this._collisionHash[hash]) {\r\n            return false; // pair exists easy exit return false\r\n        }\r\n        // if both are fixed short circuit\r\n        if (actorA.collisionType === CollisionType.Fixed && actorB.collisionType === CollisionType.Fixed) {\r\n            return false;\r\n        }\r\n        // if the other is prevent collision or is dead short circuit\r\n        if (actorB.collisionType === CollisionType.PreventCollision || actorB.isKilled()) {\r\n            return false;\r\n        }\r\n        // they can collide\r\n        return true;\r\n    };\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.broadphase = function (targets, delta, stats) {\r\n        var _this = this;\r\n        var seconds = delta / 1000;\r\n        // TODO optimization use only the actors that are moving to start\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        var potentialColliders = targets.filter(function (other) {\r\n            return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        // clear old list of collision pairs\r\n        this._collisionPairCache = [];\r\n        this._collisionHash = {};\r\n        // check for normal collision pairs\r\n        var actor;\r\n        for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n            actor = potentialColliders[j];\r\n            // Query the collision tree for potential colliders\r\n            this._dynamicCollisionTree.query(actor.body, function (other) {\r\n                if (_this._canCollide(actor, other.actor)) {\r\n                    var pair = new Pair(actor.body, other);\r\n                    _this._collisionHash[pair.id] = true;\r\n                    _this._collisionPairCache.push(pair);\r\n                }\r\n                // Always return false, to query whole tree. Returning true in the query method stops searching\r\n                return false;\r\n            });\r\n        }\r\n        if (stats) {\r\n            stats.physics.pairs = this._collisionPairCache.length;\r\n        }\r\n        // Check dynamic tree for fast moving objects\r\n        // Fast moving objects are those moving at least there smallest bound per frame\r\n        if (Physics.checkForFastBodies) {\r\n            for (var _i = 0, potentialColliders_1 = potentialColliders; _i < potentialColliders_1.length; _i++) {\r\n                var actor = potentialColliders_1[_i];\r\n                // Skip non-active objects. Does not make sense on other collison types\r\n                if (actor.collisionType !== CollisionType.Active) {\r\n                    continue;\r\n                }\r\n                // Maximum travel distance next frame\r\n                var updateDistance = actor.vel.magnitude() * seconds + // velocity term\r\n                    actor.acc.magnitude() * 0.5 * seconds * seconds; // acc term\r\n                // Find the minimum dimension\r\n                var minDimension = Math.min(actor.body.getBounds().getHeight(), actor.body.getBounds().getWidth());\r\n                if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\r\n                    if (stats) {\r\n                        stats.physics.fastBodies++;\r\n                    }\r\n                    // start with the oldPos because the integration for actors has already happened\r\n                    // objects resting on a surface may be slightly penatrating in the current position\r\n                    var updateVec = actor.pos.sub(actor.oldPos);\r\n                    var centerPoint = actor.body.collisionArea.getCenter();\r\n                    var furthestPoint = actor.body.collisionArea.getFurthestPoint(actor.vel);\r\n                    var origin = furthestPoint.sub(updateVec);\r\n                    var ray = new Ray(origin, actor.vel);\r\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\r\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\r\n                    var minBody;\r\n                    var minTranslate = new Vector(Infinity, Infinity);\r\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, function (other) {\r\n                        if (actor.body !== other && other.collisionArea) {\r\n                            var hitPoint = other.collisionArea.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\r\n                            if (hitPoint) {\r\n                                var translate = hitPoint.sub(origin);\r\n                                if (translate.magnitude() < minTranslate.magnitude()) {\r\n                                    minTranslate = translate;\r\n                                    minBody = other;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    });\r\n                    if (minBody && Vector.isValid(minTranslate)) {\r\n                        var pair = new Pair(actor.body, minBody);\r\n                        if (!this._collisionHash[pair.id]) {\r\n                            this._collisionHash[pair.id] = true;\r\n                            this._collisionPairCache.push(pair);\r\n                        }\r\n                        // move the fast moving object to the other body\r\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\r\n                        var shift = centerPoint.sub(furthestPoint);\r\n                        actor.pos = origin\r\n                            .add(shift)\r\n                            .add(minTranslate)\r\n                            .add(ray.dir.scale(2 * Physics.surfaceEpsilon));\r\n                        actor.body.collisionArea.recalc();\r\n                        if (stats) {\r\n                            stats.physics.fastBodyCollisions++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // return cache\r\n        return this._collisionPairCache;\r\n    };\r\n    /**\r\n     * Applies narrow phase on collision pairs to find actual area intersections\r\n     * Adds actual colliding pairs to stats' Frame data\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.narrowphase = function (pairs, stats) {\r\n        for (var i = 0; i < pairs.length; i++) {\r\n            pairs[i].collide();\r\n            if (stats && pairs[i].collision) {\r\n                stats.physics.collisions++;\r\n                stats.physics.collidersHash[pairs[i].id] = pairs[i];\r\n            }\r\n        }\r\n        return pairs.filter(function (p) { return p.collision; });\r\n    };\r\n    /**\r\n     * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect.\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.resolve = function (pairs, delta, strategy) {\r\n        for (var _i = 0, pairs_1 = pairs; _i < pairs_1.length; _i++) {\r\n            var pair = pairs_1[_i];\r\n            pair.resolve(strategy);\r\n            if (pair.collision) {\r\n                pair.bodyA.applyMtv();\r\n                pair.bodyB.applyMtv();\r\n                // todo still don't like this, this is a small integration step to resolve narrowphase collisions\r\n                pair.bodyA.actor.integrate(delta * Physics.collisionShift);\r\n                pair.bodyB.actor.integrate(delta * Physics.collisionShift);\r\n            }\r\n        }\r\n        return pairs.filter(function (p) { return p.canCollide; });\r\n    };\r\n    DynamicTreeCollisionBroadphase.prototype.runCollisionStartEnd = function (pairs) {\r\n        var currentFrameHash = {};\r\n        for (var _i = 0, pairs_2 = pairs; _i < pairs_2.length; _i++) {\r\n            var p = pairs_2[_i];\r\n            // load currentFrameHash\r\n            currentFrameHash[p.id] = p;\r\n            // find all new collisions\r\n            if (!this._lastFramePairsHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\r\n                actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\r\n            }\r\n        }\r\n        // find all old collisions\r\n        for (var _a = 0, _b = this._lastFramePairs; _a < _b.length; _a++) {\r\n            var p = _b[_a];\r\n            if (!currentFrameHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\r\n                actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\r\n            }\r\n        }\r\n        // reset the last frame cache\r\n        this._lastFramePairs = pairs;\r\n        this._lastFramePairsHash = currentFrameHash;\r\n    };\r\n    /**\r\n     * Update the dynamic tree positions\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.update = function (targets) {\r\n        var updated = 0, i = 0, len = targets.length;\r\n        for (i; i < len; i++) {\r\n            if (this._dynamicCollisionTree.updateBody(targets[i].body)) {\r\n                updated++;\r\n            }\r\n        }\r\n        return updated;\r\n    };\r\n    /* istanbul ignore next */\r\n    DynamicTreeCollisionBroadphase.prototype.debugDraw = function (ctx) {\r\n        if (Physics.broadphaseDebug) {\r\n            this._dynamicCollisionTree.debugDraw(ctx);\r\n        }\r\n        if (Physics.showContacts || Physics.showCollisionNormals) {\r\n            for (var _i = 0, _a = this._collisionPairCache; _i < _a.length; _i++) {\r\n                var pair = _a[_i];\r\n                pair.debugDraw(ctx);\r\n            }\r\n        }\r\n    };\r\n    return DynamicTreeCollisionBroadphase;\r\n}());\r\nexport { DynamicTreeCollisionBroadphase };\r\n//# sourceMappingURL=DynamicTreeCollisionBroadphase.js.map","/**\r\n * A sorted list implementation. NOTE: this implementation is not self-balancing\r\n */\r\nvar SortedList = /** @class */ (function () {\r\n    function SortedList(getComparable) {\r\n        this._getComparable = getComparable;\r\n    }\r\n    SortedList.prototype.find = function (element) {\r\n        return this._find(this._root, element);\r\n    };\r\n    SortedList.prototype._find = function (node, element) {\r\n        if (node == null) {\r\n            return false;\r\n        }\r\n        else if (this._getComparable.call(element) === node.getKey()) {\r\n            if (node.getData().indexOf(element) > -1) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            return this._find(node.getLeft(), element);\r\n        }\r\n        else {\r\n            return this._find(node.getRight(), element);\r\n        }\r\n    };\r\n    // returns the array of elements at a specific key value\r\n    SortedList.prototype.get = function (key) {\r\n        return this._get(this._root, key);\r\n    };\r\n    SortedList.prototype._get = function (node, key) {\r\n        if (node == null) {\r\n            return [];\r\n        }\r\n        else if (key === node.getKey()) {\r\n            return node.getData();\r\n        }\r\n        else if (key < node.getKey()) {\r\n            return this._get(node.getLeft(), key);\r\n        }\r\n        else {\r\n            return this._get(node.getRight(), key);\r\n        }\r\n    };\r\n    SortedList.prototype.add = function (element) {\r\n        if (this._root == null) {\r\n            this._root = new BinaryTreeNode(this._getComparable.call(element), [element], null, null);\r\n            return true;\r\n        }\r\n        else {\r\n            return this._insert(this._root, element);\r\n        }\r\n    };\r\n    SortedList.prototype._insert = function (node, element) {\r\n        if (node != null) {\r\n            if (this._getComparable.call(element) === node.getKey()) {\r\n                if (node.getData().indexOf(element) > -1) {\r\n                    return false; // the element we're trying to insert already exists\r\n                }\r\n                else {\r\n                    node.getData().push(element);\r\n                    return true;\r\n                }\r\n            }\r\n            else if (this._getComparable.call(element) < node.getKey()) {\r\n                if (node.getLeft() == null) {\r\n                    node.setLeft(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getLeft(), element);\r\n                }\r\n            }\r\n            else {\r\n                if (node.getRight() == null) {\r\n                    node.setRight(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getRight(), element);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    SortedList.prototype.removeByComparable = function (element) {\r\n        this._root = this._remove(this._root, element);\r\n    };\r\n    SortedList.prototype._remove = function (node, element) {\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (this._getComparable.call(element) === node.getKey()) {\r\n            var elementIndex = node.getData().indexOf(element);\r\n            // if the node contains the element, remove the element\r\n            if (elementIndex > -1) {\r\n                node.getData().splice(elementIndex, 1);\r\n                // if we have removed the last element at this node, remove the node\r\n                if (node.getData().length === 0) {\r\n                    // if the node is a leaf\r\n                    if (node.getLeft() == null && node.getRight() == null) {\r\n                        return null;\r\n                    }\r\n                    else if (node.getLeft() == null) {\r\n                        return node.getRight();\r\n                    }\r\n                    else if (node.getRight() == null) {\r\n                        return node.getLeft();\r\n                    }\r\n                    // if node has 2 children\r\n                    var temp = this._findMinNode(node.getRight());\r\n                    node.setKey(temp.getKey());\r\n                    node.setData(temp.getData());\r\n                    node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\r\n                    return node;\r\n                }\r\n                else {\r\n                    // this prevents the node from being removed since it still contains elements\r\n                    return node;\r\n                }\r\n            }\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            node.setLeft(this._remove(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._remove(node.getRight(), element));\r\n            return node;\r\n        }\r\n        return null;\r\n    };\r\n    // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\r\n    SortedList.prototype._cleanup = function (node, element) {\r\n        var comparable = element.getKey();\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (comparable === node.getKey()) {\r\n            // if the node is a leaf\r\n            if (node.getLeft() == null && node.getRight() == null) {\r\n                return null;\r\n            }\r\n            else if (node.getLeft() == null) {\r\n                return node.getRight();\r\n            }\r\n            else if (node.getRight() == null) {\r\n                return node.getLeft();\r\n            }\r\n            // if node has 2 children\r\n            var temp = this._findMinNode(node.getRight());\r\n            node.setKey(temp.getKey());\r\n            node.setData(temp.getData());\r\n            node.setRight(this._cleanup(node.getRight(), temp));\r\n            return node;\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            node.setLeft(this._cleanup(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._cleanup(node.getRight(), element));\r\n            return node;\r\n        }\r\n    };\r\n    SortedList.prototype._findMinNode = function (node) {\r\n        var current = node;\r\n        while (current.getLeft() != null) {\r\n            current = current.getLeft();\r\n        }\r\n        return current;\r\n    };\r\n    SortedList.prototype.list = function () {\r\n        var results = new Array();\r\n        this._list(this._root, results);\r\n        return results;\r\n    };\r\n    SortedList.prototype._list = function (treeNode, results) {\r\n        if (treeNode != null) {\r\n            this._list(treeNode.getLeft(), results);\r\n            treeNode.getData().forEach(function (element) {\r\n                results.push(element);\r\n            });\r\n            this._list(treeNode.getRight(), results);\r\n        }\r\n    };\r\n    return SortedList;\r\n}());\r\nexport { SortedList };\r\n/**\r\n * A tree node part of [[SortedList]]\r\n */\r\nvar BinaryTreeNode = /** @class */ (function () {\r\n    function BinaryTreeNode(key, data, left, right) {\r\n        this._key = key;\r\n        this._data = data;\r\n        this._left = left;\r\n        this._right = right;\r\n    }\r\n    BinaryTreeNode.prototype.getKey = function () {\r\n        return this._key;\r\n    };\r\n    BinaryTreeNode.prototype.setKey = function (key) {\r\n        this._key = key;\r\n    };\r\n    BinaryTreeNode.prototype.getData = function () {\r\n        return this._data;\r\n    };\r\n    BinaryTreeNode.prototype.setData = function (data) {\r\n        this._data = data;\r\n    };\r\n    BinaryTreeNode.prototype.getLeft = function () {\r\n        return this._left;\r\n    };\r\n    BinaryTreeNode.prototype.setLeft = function (left) {\r\n        this._left = left;\r\n    };\r\n    BinaryTreeNode.prototype.getRight = function () {\r\n        return this._right;\r\n    };\r\n    BinaryTreeNode.prototype.setRight = function (right) {\r\n        this._right = right;\r\n    };\r\n    return BinaryTreeNode;\r\n}());\r\nexport { BinaryTreeNode };\r\n/**\r\n * Mock element for testing\r\n *\r\n * @internal\r\n */\r\nvar MockedElement = /** @class */ (function () {\r\n    function MockedElement(key) {\r\n        this._key = 0;\r\n        this._key = key;\r\n    }\r\n    MockedElement.prototype.getTheKey = function () {\r\n        return this._key;\r\n    };\r\n    MockedElement.prototype.setKey = function (key) {\r\n        this._key = key;\r\n    };\r\n    return MockedElement;\r\n}());\r\nexport { MockedElement };\r\n//# sourceMappingURL=SortedList.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Vector } from './Algebra';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { Actor } from './Actor';\r\nimport { Logger } from './Util/Log';\r\nimport { Class } from './Class';\r\n/**\r\n * Groups are used for logically grouping Actors so they can be acted upon\r\n * in bulk.\r\n *\r\n * [[include:Groups.md]]\r\n */\r\nvar Group = /** @class */ (function (_super) {\r\n    __extends(Group, _super);\r\n    function Group(name, scene) {\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.scene = scene;\r\n        _this._logger = Logger.getInstance();\r\n        _this._members = [];\r\n        _this.actions = new ActionContext();\r\n        if (scene == null) {\r\n            _this._logger.error('Invalid constructor arguments passed to Group: ', name, ', scene must not be null!');\r\n        }\r\n        else {\r\n            var existingGroup = scene.groups[name];\r\n            if (existingGroup) {\r\n                _this._logger.warn('Group with name', name, 'already exists. This new group will replace it.');\r\n            }\r\n            scene.groups[name] = _this;\r\n        }\r\n        return _this;\r\n    }\r\n    Group.prototype.add = function (actorOrActors) {\r\n        if (actorOrActors instanceof Actor) {\r\n            actorOrActors = [].concat(actorOrActors);\r\n        }\r\n        var i = 0, len = actorOrActors.length, groupIdx;\r\n        for (i; i < len; i++) {\r\n            groupIdx = this.getMembers().indexOf(actorOrActors[i]);\r\n            if (groupIdx === -1) {\r\n                this._members.push(actorOrActors[i]);\r\n                this.scene.add(actorOrActors[i]);\r\n                this.actions.addActorToContext(actorOrActors[i]);\r\n                this.eventDispatcher.wire(actorOrActors[i].eventDispatcher);\r\n            }\r\n        }\r\n    };\r\n    Group.prototype.remove = function (actor) {\r\n        var index = this._members.indexOf(actor);\r\n        if (index > -1) {\r\n            this._members.splice(index, 1);\r\n            this.actions.removeActorFromContext(actor);\r\n            this.eventDispatcher.unwire(actor.eventDispatcher);\r\n        }\r\n    };\r\n    Group.prototype.move = function (args) {\r\n        var i = 0, members = this.getMembers(), len = members.length;\r\n        if (arguments.length === 1 && args instanceof Vector) {\r\n            for (i; i < len; i++) {\r\n                members[i].pos.x += args.x;\r\n                members[i].pos.y += args.y;\r\n            }\r\n        }\r\n        else if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            var x = arguments[0];\r\n            var y = arguments[1];\r\n            for (i; i < len; i++) {\r\n                members[i].pos.x += x;\r\n                members[i].pos.y += y;\r\n            }\r\n        }\r\n        else {\r\n            this._logger.error('Invalid arguments passed to group move', this.name, 'args:', arguments);\r\n        }\r\n    };\r\n    Group.prototype.rotate = function (angle) {\r\n        if (typeof angle !== 'number') {\r\n            this._logger.error('Invalid arguments passed to group rotate', this.name, 'args:', arguments);\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.getMembers(); _i < _a.length; _i++) {\r\n            var member = _a[_i];\r\n            member.rotation += angle;\r\n        }\r\n    };\r\n    Group.prototype.on = function (eventName, handler) {\r\n        this.eventDispatcher.on(eventName, handler);\r\n    };\r\n    Group.prototype.off = function (eventName, handler) {\r\n        this.eventDispatcher.off(eventName, handler);\r\n    };\r\n    Group.prototype.emit = function (topic, event) {\r\n        this.eventDispatcher.emit(topic, event);\r\n    };\r\n    Group.prototype.contains = function (actor) {\r\n        return this.getMembers().indexOf(actor) > -1;\r\n    };\r\n    Group.prototype.getMembers = function () {\r\n        return this._members;\r\n    };\r\n    Group.prototype.getRandomMember = function () {\r\n        return this._members[Math.floor(Math.random() * this._members.length)];\r\n    };\r\n    Group.prototype.getBounds = function () {\r\n        return this.getMembers()\r\n            .map(function (a) { return a.getBounds(); })\r\n            .reduce(function (prev, curr) {\r\n            return prev.combine(curr);\r\n        });\r\n    };\r\n    return Group;\r\n}(Class));\r\nexport { Group };\r\n//# sourceMappingURL=Group.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Configurable } from './Configurable';\r\n/**\r\n * Enum representing the different font size units\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\r\n */\r\nexport var FontUnit;\r\n(function (FontUnit) {\r\n    /**\r\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\r\n     */\r\n    FontUnit[FontUnit[\"Em\"] = 0] = \"Em\";\r\n    /**\r\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is eqaul to the font size of the root element\r\n     */\r\n    FontUnit[FontUnit[\"Rem\"] = 1] = \"Rem\";\r\n    /**\r\n     * Pixel is a unit of length in screen pixels\r\n     */\r\n    FontUnit[FontUnit[\"Px\"] = 2] = \"Px\";\r\n    /**\r\n     * Point is a physical unit length (1/72 of an inch)\r\n     */\r\n    FontUnit[FontUnit[\"Pt\"] = 3] = \"Pt\";\r\n    /**\r\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\r\n     */\r\n    FontUnit[FontUnit[\"Percent\"] = 4] = \"Percent\";\r\n})(FontUnit || (FontUnit = {}));\r\n/**\r\n * Enum representing the different horizontal text alignments\r\n */\r\nexport var TextAlign;\r\n(function (TextAlign) {\r\n    /**\r\n     * The text is left-aligned.\r\n     */\r\n    TextAlign[TextAlign[\"Left\"] = 0] = \"Left\";\r\n    /**\r\n     * The text is right-aligned.\r\n     */\r\n    TextAlign[TextAlign[\"Right\"] = 1] = \"Right\";\r\n    /**\r\n     * The text is centered.\r\n     */\r\n    TextAlign[TextAlign[\"Center\"] = 2] = \"Center\";\r\n    /**\r\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\r\n     * right-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[TextAlign[\"Start\"] = 3] = \"Start\";\r\n    /**\r\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\r\n     * left-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[TextAlign[\"End\"] = 4] = \"End\";\r\n})(TextAlign || (TextAlign = {}));\r\n/**\r\n * Enum representing the different baseline text alignments\r\n */\r\nexport var BaseAlign;\r\n(function (BaseAlign) {\r\n    /**\r\n     * The text baseline is the top of the em square.\r\n     */\r\n    BaseAlign[BaseAlign[\"Top\"] = 0] = \"Top\";\r\n    /**\r\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\r\n     * alphabetic.\r\n     */\r\n    BaseAlign[BaseAlign[\"Hanging\"] = 1] = \"Hanging\";\r\n    /**\r\n     * The text baseline is the middle of the em square.\r\n     */\r\n    BaseAlign[BaseAlign[\"Middle\"] = 2] = \"Middle\";\r\n    /**\r\n     * The text baseline is the normal alphabetic baseline.\r\n     */\r\n    BaseAlign[BaseAlign[\"Alphabetic\"] = 3] = \"Alphabetic\";\r\n    /**\r\n     * The text baseline is the ideographic baseline; this is the bottom of\r\n     * the body of the characters, if the main body of characters protrudes\r\n     * beneath the alphabetic baseline.  Currently unsupported; this will\r\n     * act like alphabetic.\r\n     */\r\n    BaseAlign[BaseAlign[\"Ideographic\"] = 4] = \"Ideographic\";\r\n    /**\r\n     * The text baseline is the bottom of the bounding box.  This differs\r\n     * from the ideographic baseline in that the ideographic baseline\r\n     * doesn't consider descenders.\r\n     */\r\n    BaseAlign[BaseAlign[\"Bottom\"] = 5] = \"Bottom\";\r\n})(BaseAlign || (BaseAlign = {}));\r\n/**\r\n * Enum representing the different possible font styles\r\n */\r\nexport var FontStyle;\r\n(function (FontStyle) {\r\n    FontStyle[FontStyle[\"Normal\"] = 0] = \"Normal\";\r\n    FontStyle[FontStyle[\"Italic\"] = 1] = \"Italic\";\r\n    FontStyle[FontStyle[\"Oblique\"] = 2] = \"Oblique\";\r\n})(FontStyle || (FontStyle = {}));\r\n/**\r\n * @hidden\r\n */\r\nvar LabelImpl = /** @class */ (function (_super) {\r\n    __extends(LabelImpl, _super);\r\n    /**\r\n     * @param text        The text of the label\r\n     * @param x           The x position of the label\r\n     * @param y           The y position of the label\r\n     * @param fontFamily  Use any valid CSS font string for the label's font. Web fonts are supported. Default is `10px sans-serif`.\r\n     * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence\r\n     * over a css font.\r\n     */\r\n    function LabelImpl(textOrConfig, x, y, fontFamily, spriteFont) {\r\n        var _this = _super.call(this, textOrConfig && typeof textOrConfig === 'object'\r\n            ? {\r\n                x: textOrConfig.x,\r\n                y: textOrConfig.y\r\n            }\r\n            : { x: x, y: y }) || this;\r\n        /**\r\n         * Sets or gets the bold property of the label's text, by default it's false\r\n         */\r\n        _this.bold = false;\r\n        /**\r\n         * The font size in the selected units, default is 10 (default units is pixel)\r\n         */\r\n        _this.fontSize = 10;\r\n        /**\r\n         * The font style for this label, the default is [[FontStyle.Normal]]\r\n         */\r\n        _this.fontStyle = FontStyle.Normal;\r\n        /**\r\n         * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\r\n         */\r\n        _this.fontUnit = FontUnit.Px;\r\n        /**\r\n         * Gets or sets the horizontal text alignment property for the label.\r\n         */\r\n        _this.textAlign = TextAlign.Left;\r\n        /**\r\n         * Gets or sets the baseline alignment property for the label.\r\n         */\r\n        _this.baseAlign = BaseAlign.Bottom;\r\n        /**\r\n         * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\r\n         */\r\n        _this.letterSpacing = 0; //px\r\n        /**\r\n         * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\r\n         */\r\n        _this.caseInsensitive = true;\r\n        var text = '';\r\n        if (textOrConfig && typeof textOrConfig === 'object') {\r\n            fontFamily = textOrConfig.fontFamily;\r\n            spriteFont = textOrConfig.spriteFont;\r\n            text = textOrConfig.text;\r\n        }\r\n        else {\r\n            text = textOrConfig;\r\n        }\r\n        _this.text = text || '';\r\n        _this.color = Color.Black.clone();\r\n        _this.spriteFont = spriteFont;\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.fontFamily = fontFamily || 'sans-serif'; // coalesce to default canvas font\r\n        _this._textShadowOn = false;\r\n        _this._shadowOffsetX = 0;\r\n        _this._shadowOffsetY = 0;\r\n        if (spriteFont) {\r\n            //this._textSprites = spriteFont.getTextSprites();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns the width of the text in the label (in pixels);\r\n     * @param ctx  Rendering context to measure the string with\r\n     */\r\n    LabelImpl.prototype.getTextWidth = function (ctx) {\r\n        var oldFont = ctx.font;\r\n        ctx.font = this._fontString;\r\n        var width = ctx.measureText(this.text).width;\r\n        ctx.font = oldFont;\r\n        return width;\r\n    };\r\n    // TypeScript doesn't support string enums :(\r\n    LabelImpl.prototype._lookupFontUnit = function (fontUnit) {\r\n        switch (fontUnit) {\r\n            case FontUnit.Em:\r\n                return 'em';\r\n            case FontUnit.Rem:\r\n                return 'rem';\r\n            case FontUnit.Pt:\r\n                return 'pt';\r\n            case FontUnit.Px:\r\n                return 'px';\r\n            case FontUnit.Percent:\r\n                return '%';\r\n            default:\r\n                return 'px';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupTextAlign = function (textAlign) {\r\n        switch (textAlign) {\r\n            case TextAlign.Left:\r\n                return 'left';\r\n            case TextAlign.Right:\r\n                return 'right';\r\n            case TextAlign.Center:\r\n                return 'center';\r\n            case TextAlign.End:\r\n                return 'end';\r\n            case TextAlign.Start:\r\n                return 'start';\r\n            default:\r\n                return 'start';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupBaseAlign = function (baseAlign) {\r\n        switch (baseAlign) {\r\n            case BaseAlign.Alphabetic:\r\n                return 'alphabetic';\r\n            case BaseAlign.Bottom:\r\n                return 'bottom';\r\n            case BaseAlign.Hanging:\r\n                return 'hangin';\r\n            case BaseAlign.Ideographic:\r\n                return 'ideographic';\r\n            case BaseAlign.Middle:\r\n                return 'middle';\r\n            case BaseAlign.Top:\r\n                return 'top';\r\n            default:\r\n                return 'alphabetic';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupFontStyle = function (fontStyle) {\r\n        var boldstring = this.bold ? ' bold' : '';\r\n        switch (fontStyle) {\r\n            case FontStyle.Italic:\r\n                return 'italic' + boldstring;\r\n            case FontStyle.Normal:\r\n                return 'normal' + boldstring;\r\n            case FontStyle.Oblique:\r\n                return 'oblique' + boldstring;\r\n            default:\r\n                return 'normal' + boldstring;\r\n        }\r\n    };\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     */\r\n    LabelImpl.prototype.setTextShadow = function (offsetX, offsetY, shadowColor) {\r\n        this.spriteFont.setTextShadow(offsetX, offsetY, shadowColor);\r\n    };\r\n    /**\r\n     * Toggles text shadows on or off, only applies when using sprite fonts\r\n     */\r\n    LabelImpl.prototype.useTextShadow = function (on) {\r\n        this.spriteFont.useTextShadow(on);\r\n    };\r\n    /**\r\n     * Clears the current text shadow\r\n     */\r\n    LabelImpl.prototype.clearTextShadow = function () {\r\n        this._textShadowOn = false;\r\n        this._shadowOffsetX = 0;\r\n        this._shadowOffsetY = 0;\r\n    };\r\n    LabelImpl.prototype.update = function (engine, delta) {\r\n        _super.prototype.update.call(this, engine, delta);\r\n    };\r\n    LabelImpl.prototype.draw = function (ctx, delta) {\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        ctx.rotate(this.rotation);\r\n        if (this._textShadowOn) {\r\n            ctx.save();\r\n            ctx.translate(this._shadowOffsetX, this._shadowOffsetY);\r\n            this._fontDraw(ctx);\r\n            ctx.restore();\r\n        }\r\n        this._fontDraw(ctx);\r\n        _super.prototype.draw.call(this, ctx, delta);\r\n        ctx.restore();\r\n    };\r\n    LabelImpl.prototype._fontDraw = function (ctx) {\r\n        if (this.spriteFont) {\r\n            this.spriteFont.draw(ctx, this.text, 0, 0, {\r\n                color: this.color.clone(),\r\n                baseAlign: this.baseAlign,\r\n                textAlign: this.textAlign,\r\n                fontSize: this.fontSize,\r\n                letterSpacing: this.letterSpacing,\r\n                opacity: this.opacity\r\n            });\r\n        }\r\n        else {\r\n            var oldAlign = ctx.textAlign;\r\n            var oldTextBaseline = ctx.textBaseline;\r\n            ctx.textAlign = this._lookupTextAlign(this.textAlign);\r\n            ctx.textBaseline = this._lookupBaseAlign(this.baseAlign);\r\n            if (this.color) {\r\n                this.color.a = this.opacity;\r\n            }\r\n            ctx.fillStyle = this.color.toString();\r\n            ctx.font = this._fontString;\r\n            if (this.maxWidth) {\r\n                ctx.fillText(this.text, 0, 0, this.maxWidth);\r\n            }\r\n            else {\r\n                ctx.fillText(this.text, 0, 0);\r\n            }\r\n            ctx.textAlign = oldAlign;\r\n            ctx.textBaseline = oldTextBaseline;\r\n        }\r\n    };\r\n    Object.defineProperty(LabelImpl.prototype, \"_fontString\", {\r\n        get: function () {\r\n            return this._lookupFontStyle(this.fontStyle) + \" \" + this.fontSize + this._lookupFontUnit(this.fontUnit) + \" \" + this.fontFamily;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LabelImpl.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n    };\r\n    return LabelImpl;\r\n}(Actor));\r\nexport { LabelImpl };\r\n/**\r\n * Labels are the way to draw small amounts of text to the screen. They are\r\n * actors and inherit all of the benefits and capabilities.\r\n *\r\n * [[include:Labels.md]]\r\n */\r\nvar Label = /** @class */ (function (_super) {\r\n    __extends(Label, _super);\r\n    function Label(textOrConfig, x, y, fontFamily, spriteFont) {\r\n        return _super.call(this, textOrConfig, x, y, fontFamily, spriteFont) || this;\r\n    }\r\n    return Label;\r\n}(Configurable(LabelImpl)));\r\nexport { Label };\r\n//# sourceMappingURL=Label.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { EventDispatcher } from './EventDispatcher';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Vector } from './Algebra';\r\nimport { ExitTriggerEvent, EnterTriggerEvent } from './Events';\r\nimport * as Util from './Util/Util';\r\nvar triggerDefaults = {\r\n    pos: Vector.Zero.clone(),\r\n    width: 10,\r\n    height: 10,\r\n    visible: false,\r\n    action: function () {\r\n        return;\r\n    },\r\n    filter: function () { return true; },\r\n    repeat: -1\r\n};\r\n/**\r\n * Triggers are a method of firing arbitrary code on collision. These are useful\r\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\r\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\r\n *\r\n * [[include:Triggers.md]]\r\n */\r\nvar Trigger = /** @class */ (function (_super) {\r\n    __extends(Trigger, _super);\r\n    /**\r\n     *\r\n     * @param opts Trigger options\r\n     */\r\n    function Trigger(opts) {\r\n        var _this = _super.call(this, opts.pos.x, opts.pos.y, opts.width, opts.height) || this;\r\n        /**\r\n         * Action to fire when triggered by collision\r\n         */\r\n        _this.action = function () {\r\n            return;\r\n        };\r\n        /**\r\n         * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\r\n         * filter return true for the collided actor.\r\n         */\r\n        _this.filter = function () { return true; };\r\n        /**\r\n         * Number of times to repeat before killing the trigger,\r\n         */\r\n        _this.repeat = -1;\r\n        opts = Util.extend({}, triggerDefaults, opts);\r\n        _this.filter = opts.filter || _this.filter;\r\n        _this.repeat = opts.repeat || _this.repeat;\r\n        _this.action = opts.action || _this.action;\r\n        if (opts.target) {\r\n            _this.target = opts.target;\r\n        }\r\n        _this.visible = opts.visible;\r\n        _this.collisionType = CollisionType.Passive;\r\n        _this.eventDispatcher = new EventDispatcher(_this);\r\n        _this.actionQueue = new ActionQueue(_this);\r\n        _this.on('collisionstart', function (evt) {\r\n            if (_this.filter(evt.other)) {\r\n                _this.emit('enter', new EnterTriggerEvent(_this, evt.other));\r\n                _this._dispatchAction();\r\n                // remove trigger if its done, -1 repeat forever\r\n                if (_this.repeat === 0) {\r\n                    _this.kill();\r\n                }\r\n            }\r\n        });\r\n        _this.on('collisionend', function (evt) {\r\n            if (_this.filter(evt.other)) {\r\n                _this.emit('exit', new ExitTriggerEvent(_this, evt.other));\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Trigger.prototype, \"target\", {\r\n        get: function () {\r\n            return this._target;\r\n        },\r\n        set: function (target) {\r\n            this._target = target;\r\n            this.filter = function (actor) { return actor === target; };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Trigger.prototype._initialize = function (engine) {\r\n        _super.prototype._initialize.call(this, engine);\r\n    };\r\n    Trigger.prototype._dispatchAction = function () {\r\n        this.action.call(this);\r\n        this.repeat--;\r\n    };\r\n    /* istanbul ignore next */\r\n    Trigger.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n        // Meant to draw debug information about actors\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        var bb = this.getBounds();\r\n        var wp = this.getWorldPos();\r\n        bb.left = bb.left - wp.x;\r\n        bb.right = bb.right - wp.x;\r\n        bb.top = bb.top - wp.y;\r\n        bb.bottom = bb.bottom - wp.y;\r\n        // Currently collision primitives cannot rotate\r\n        // ctx.rotate(this.rotation);\r\n        ctx.fillStyle = Color.Violet.toString();\r\n        ctx.strokeStyle = Color.Violet.toString();\r\n        ctx.fillText('Trigger', 10, 10);\r\n        bb.debugDraw(ctx);\r\n        ctx.restore();\r\n    };\r\n    return Trigger;\r\n}(Actor));\r\nexport { Trigger };\r\n//# sourceMappingURL=Trigger.js.map","import { UIActor } from '../UIActor';\r\nimport { Label } from '../Label';\r\nimport { Trigger } from '../Trigger';\r\nexport function isVanillaActor(actor) {\r\n    return !(actor instanceof UIActor) && !(actor instanceof Trigger) && !(actor instanceof Label);\r\n}\r\nexport function isUIActor(actor) {\r\n    return actor instanceof UIActor;\r\n}\r\n//# sourceMappingURL=Actors.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { UIActor } from './UIActor';\r\nimport { Physics } from './Physics';\r\nimport { InitializeEvent, PreUpdateEvent, PostUpdateEvent, PreDrawEvent, PostDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent } from './Events';\r\nimport { Logger } from './Util/Log';\r\nimport { Timer } from './Timer';\r\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\r\nimport { SortedList } from './Util/SortedList';\r\nimport { Group } from './Group';\r\nimport { TileMap } from './TileMap';\r\nimport { BaseCamera } from './Camera';\r\nimport { Actor } from './Actor';\r\nimport { Class } from './Class';\r\nimport * as Util from './Util/Util';\r\nimport * as ActorUtils from './Util/Actors';\r\nimport { Trigger } from './Trigger';\r\n/**\r\n * [[Actor|Actors]] are composed together into groupings called Scenes in\r\n * Excalibur. The metaphor models the same idea behind real world\r\n * actors in a scene. Only actors in scenes will be updated and drawn.\r\n *\r\n * Typical usages of a scene include: levels, menus, loading screens, etc.\r\n *\r\n * [[include:Scenes.md]]\r\n */\r\nvar Scene = /** @class */ (function (_super) {\r\n    __extends(Scene, _super);\r\n    function Scene(engine) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * The actors in the current scene\r\n         */\r\n        _this.actors = [];\r\n        /**\r\n         * The triggers in the current scene\r\n         */\r\n        _this.triggers = [];\r\n        /**\r\n         * The [[TileMap]]s in the scene, if any\r\n         */\r\n        _this.tileMaps = [];\r\n        /**\r\n         * The [[Group]]s in the scene, if any\r\n         */\r\n        _this.groups = {};\r\n        /**\r\n         * The [[UIActor]]s in a scene, if any; these are drawn last\r\n         */\r\n        _this.uiActors = [];\r\n        _this._isInitialized = false;\r\n        _this._sortedDrawingTree = new SortedList(Actor.prototype.getZIndex);\r\n        _this._broadphase = new DynamicTreeCollisionBroadphase();\r\n        _this._killQueue = [];\r\n        _this._triggerKillQueue = [];\r\n        _this._timers = [];\r\n        _this._cancelQueue = [];\r\n        _this._logger = Logger.getInstance();\r\n        _this.camera = new BaseCamera();\r\n        if (engine) {\r\n            _this.camera.x = engine.halfDrawWidth;\r\n            _this.camera.y = engine.halfDrawHeight;\r\n        }\r\n        return _this;\r\n    }\r\n    Scene.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Scene.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    Scene.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     */\r\n    Scene.prototype.onInitialize = function (_engine) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * This is called when the scene is made active and started. It is meant to be overriden,\r\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    Scene.prototype.onActivate = function (_oldScene, _newScene) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overriden,\r\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    Scene.prototype.onDeactivate = function (_oldScene, _newScene) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    Scene.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    Scene.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before a scene is drawn.\r\n     */\r\n    Scene.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after a scene is drawn.\r\n     */\r\n    Scene.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Initializes actors in the scene\r\n     */\r\n    Scene.prototype._initializeChildren = function () {\r\n        for (var _i = 0, _a = this.actors; _i < _a.length; _i++) {\r\n            var child = _a[_i];\r\n            child._initialize(this.engine);\r\n        }\r\n    };\r\n    Object.defineProperty(Scene.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets whether or not the [[Scene]] has been initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Initializes the scene before the first update, meant to be called by engine not by users of\r\n     * Excalibur\r\n     * @internal\r\n     */\r\n    Scene.prototype._initialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            if (this.camera) {\r\n                this.camera.x = engine.halfDrawWidth;\r\n                this.camera.y = engine.halfDrawHeight;\r\n            }\r\n            this._initializeChildren();\r\n            this._logger.debug('Scene.onInitialize', this, engine);\r\n            this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\r\n            this.onInitialize.call(this, engine);\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\r\n     * @internal\r\n     */\r\n    Scene.prototype._activate = function (oldScene, newScene) {\r\n        this._logger.debug('Scene.onActivate', this);\r\n        this.onActivate(oldScene, newScene);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\r\n     * @internal\r\n     */\r\n    Scene.prototype._deactivate = function (oldScene, newScene) {\r\n        this._logger.debug('Scene.onDectivate', this);\r\n        this.onDeactivate(oldScene, newScene);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    Scene.prototype._preupdate = function (_engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\r\n        this.onPreUpdate(_engine, delta);\r\n    };\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    Scene.prototype._postupdate = function (_engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\r\n        this.onPostUpdate(_engine, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    Scene.prototype._predraw = function (_ctx, _delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\r\n        this.onPreDraw(_ctx, _delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    Scene.prototype._postdraw = function (_ctx, _delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\r\n        this.onPostDraw(_ctx, _delta);\r\n    };\r\n    /**\r\n     * Updates all the actors and timers in the scene. Called by the [[Engine]].\r\n     * @param engine  Reference to the current Engine\r\n     * @param delta   The number of milliseconds since the last update\r\n     */\r\n    Scene.prototype.update = function (engine, delta) {\r\n        this._preupdate(engine, delta);\r\n        var i, len;\r\n        // Remove timers in the cancel queue before updating them\r\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\r\n            this.removeTimer(this._cancelQueue[i]);\r\n        }\r\n        this._cancelQueue.length = 0;\r\n        // Cycle through timers updating timers\r\n        for (var _i = 0, _a = this._timers; _i < _a.length; _i++) {\r\n            var timer = _a[_i];\r\n            timer.update(delta);\r\n        }\r\n        // Cycle through actors updating UI actors\r\n        for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n            this.uiActors[i].update(engine, delta);\r\n        }\r\n        // Cycle through actors updating tile maps\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].update(engine, delta);\r\n        }\r\n        // Cycle through actors updating actors\r\n        for (i = 0, len = this.actors.length; i < len; i++) {\r\n            this.actors[i].update(engine, delta);\r\n        }\r\n        // Cycle through triggers updating\r\n        for (i = 0, len = this.triggers.length; i < len; i++) {\r\n            this.triggers[i].update(engine, delta);\r\n        }\r\n        this._collectActorStats(engine);\r\n        // propagates all events through their paths assigned\r\n        engine.input.pointers.propagate();\r\n        // Run the broadphase and narrowphase\r\n        if (this._broadphase && Physics.enabled) {\r\n            var beforeBroadphase = Date.now();\r\n            this._broadphase.update(this.actors, delta);\r\n            var pairs = this._broadphase.broadphase(this.actors, delta, engine.stats.currFrame);\r\n            var afterBroadphase = Date.now();\r\n            var beforeNarrowphase = Date.now();\r\n            var iter = Physics.collisionPasses;\r\n            var collisionDelta = delta / iter;\r\n            while (iter > 0) {\r\n                // Run the narrowphase\r\n                pairs = this._broadphase.narrowphase(pairs, engine.stats.currFrame);\r\n                // Run collision resolution strategy\r\n                pairs = this._broadphase.resolve(pairs, collisionDelta, Physics.collisionResolutionStrategy);\r\n                this._broadphase.runCollisionStartEnd(pairs);\r\n                iter--;\r\n            }\r\n            var afterNarrowphase = Date.now();\r\n            engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\r\n            engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\r\n        }\r\n        engine.stats.currFrame.actors.killed = this._killQueue.length + this._triggerKillQueue.length;\r\n        this._processKillQueue(this._killQueue, this.actors);\r\n        this._processKillQueue(this._triggerKillQueue, this.triggers);\r\n        if (this.camera) {\r\n            this.camera.update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    };\r\n    Scene.prototype._processKillQueue = function (killQueue, collection) {\r\n        // Remove actors from scene graph after being killed\r\n        var actorIndex;\r\n        for (var _i = 0, killQueue_1 = killQueue; _i < killQueue_1.length; _i++) {\r\n            var killed = killQueue_1[_i];\r\n            //don't remove actors that were readded during the same frame they were killed\r\n            if (killed.isKilled()) {\r\n                actorIndex = collection.indexOf(killed);\r\n                if (actorIndex > -1) {\r\n                    this._sortedDrawingTree.removeByComparable(killed);\r\n                    collection.splice(actorIndex, 1);\r\n                }\r\n            }\r\n        }\r\n        killQueue.length = 0;\r\n    };\r\n    /**\r\n     * Draws all the actors in the Scene. Called by the [[Engine]].\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    Scene.prototype.draw = function (ctx, delta) {\r\n        this._predraw(ctx, delta);\r\n        ctx.save();\r\n        if (this.camera) {\r\n            this.camera.draw(ctx);\r\n        }\r\n        var i, len;\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].draw(ctx, delta);\r\n        }\r\n        var sortedChildren = this._sortedDrawingTree.list();\r\n        for (i = 0, len = sortedChildren.length; i < len; i++) {\r\n            // only draw actors that are visible and on screen\r\n            if (sortedChildren[i].visible && !sortedChildren[i].isOffScreen) {\r\n                sortedChildren[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        if (this.engine && this.engine.isDebug) {\r\n            ctx.strokeStyle = 'yellow';\r\n            this.debugDraw(ctx);\r\n        }\r\n        ctx.restore();\r\n        for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n            // only draw ui actors that are visible and on screen\r\n            if (this.uiActors[i].visible) {\r\n                this.uiActors[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        if (this.engine && this.engine.isDebug) {\r\n            for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n                this.uiActors[i].debugDraw(ctx);\r\n            }\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    };\r\n    /**\r\n     * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\r\n     * @param ctx  The current rendering context\r\n     */\r\n    /* istanbul ignore next */\r\n    Scene.prototype.debugDraw = function (ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        var i, len;\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].debugDraw(ctx);\r\n        }\r\n        for (i = 0, len = this.actors.length; i < len; i++) {\r\n            this.actors[i].debugDraw(ctx);\r\n        }\r\n        for (i = 0, len = this.triggers.length; i < len; i++) {\r\n            this.triggers[i].debugDraw(ctx);\r\n        }\r\n        this._broadphase.debugDraw(ctx, 20);\r\n        this.camera.debugDraw(ctx);\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    };\r\n    /**\r\n     * Checks whether an actor is contained in this scene or not\r\n     */\r\n    Scene.prototype.contains = function (actor) {\r\n        return this.actors.indexOf(actor) > -1;\r\n    };\r\n    Scene.prototype.add = function (entity) {\r\n        if (entity instanceof Actor) {\r\n            entity.unkill();\r\n        }\r\n        if (entity instanceof UIActor) {\r\n            if (!Util.contains(this.uiActors, entity)) {\r\n                this.addUIActor(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            if (!Util.contains(this.actors, entity)) {\r\n                this._addChild(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof Timer) {\r\n            if (!Util.contains(this._timers, entity)) {\r\n                this.addTimer(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            if (!Util.contains(this.tileMaps, entity)) {\r\n                this.addTileMap(entity);\r\n            }\r\n        }\r\n    };\r\n    Scene.prototype.remove = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.removeUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._removeChild(entity);\r\n            if (!entity.isKilled()) {\r\n                entity.kill();\r\n            }\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.removeTileMap(entity);\r\n        }\r\n    };\r\n    /**\r\n     * Adds (any) actor to act as a piece of UI, meaning it is always positioned\r\n     * in screen coordinates. UI actors do not participate in collisions.\r\n     * @todo Should this be `UIActor` only?\r\n     */\r\n    Scene.prototype.addUIActor = function (actor) {\r\n        this.uiActors.push(actor);\r\n        actor.scene = this;\r\n    };\r\n    /**\r\n     * Removes an actor as a piece of UI\r\n     */\r\n    Scene.prototype.removeUIActor = function (actor) {\r\n        var index = this.uiActors.indexOf(actor);\r\n        if (index > -1) {\r\n            this.uiActors.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an actor to the scene, once this is done the actor will be drawn and updated.\r\n     */\r\n    Scene.prototype._addChild = function (actor) {\r\n        this._broadphase.track(actor.body);\r\n        actor.scene = this;\r\n        if (actor instanceof Trigger) {\r\n            this.triggers.push(actor);\r\n        }\r\n        else {\r\n            this.actors.push(actor);\r\n        }\r\n        this._sortedDrawingTree.add(actor);\r\n    };\r\n    /**\r\n     * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\r\n     */\r\n    Scene.prototype.addTileMap = function (tileMap) {\r\n        this.tileMaps.push(tileMap);\r\n    };\r\n    /**\r\n     * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\r\n     */\r\n    Scene.prototype.removeTileMap = function (tileMap) {\r\n        var index = this.tileMaps.indexOf(tileMap);\r\n        if (index > -1) {\r\n            this.tileMaps.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Removes an actor from the scene, it will no longer be drawn or updated.\r\n     */\r\n    Scene.prototype._removeChild = function (actor) {\r\n        this._broadphase.untrack(actor.body);\r\n        if (actor instanceof Trigger) {\r\n            this._triggerKillQueue.push(actor);\r\n        }\r\n        else {\r\n            this._killQueue.push(actor);\r\n        }\r\n        actor.parent = null;\r\n    };\r\n    /**\r\n     * Adds a [[Timer]] to the scene\r\n     * @param timer  The timer to add\r\n     */\r\n    Scene.prototype.addTimer = function (timer) {\r\n        this._timers.push(timer);\r\n        timer.scene = this;\r\n        return timer;\r\n    };\r\n    /**\r\n     * Removes a [[Timer]] from the scene.\r\n     * @warning Can be dangerous, use [[cancelTimer]] instead\r\n     * @param timer  The timer to remove\r\n     */\r\n    Scene.prototype.removeTimer = function (timer) {\r\n        var i = this._timers.indexOf(timer);\r\n        if (i !== -1) {\r\n            this._timers.splice(i, 1);\r\n        }\r\n        return timer;\r\n    };\r\n    /**\r\n     * Cancels a [[Timer]], removing it from the scene nicely\r\n     * @param timer  The timer to cancel\r\n     */\r\n    Scene.prototype.cancelTimer = function (timer) {\r\n        this._cancelQueue.push(timer);\r\n        return timer;\r\n    };\r\n    /**\r\n     * Tests whether a [[Timer]] is active in the scene\r\n     */\r\n    Scene.prototype.isTimerActive = function (timer) {\r\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\r\n    };\r\n    /**\r\n     * Creates and adds a [[Group]] to the scene with a name\r\n     */\r\n    Scene.prototype.createGroup = function (name) {\r\n        return new Group(name, this);\r\n    };\r\n    /**\r\n     * Returns a [[Group]] by name\r\n     */\r\n    Scene.prototype.getGroup = function (name) {\r\n        return this.groups[name];\r\n    };\r\n    Scene.prototype.removeGroup = function (group) {\r\n        if (typeof group === 'string') {\r\n            delete this.groups[group];\r\n        }\r\n        else if (group instanceof Group) {\r\n            delete this.groups[group.name];\r\n        }\r\n        else {\r\n            this._logger.error('Invalid arguments to removeGroup', group);\r\n        }\r\n    };\r\n    /**\r\n     * Removes the given actor from the sorted drawing tree\r\n     */\r\n    Scene.prototype.cleanupDrawTree = function (actor) {\r\n        this._sortedDrawingTree.removeByComparable(actor);\r\n    };\r\n    /**\r\n     * Updates the given actor's position in the sorted drawing tree\r\n     */\r\n    Scene.prototype.updateDrawTree = function (actor) {\r\n        this._sortedDrawingTree.add(actor);\r\n    };\r\n    /**\r\n     * Checks if an actor is in this scene's sorted draw tree\r\n     */\r\n    Scene.prototype.isActorInDrawTree = function (actor) {\r\n        return this._sortedDrawingTree.find(actor);\r\n    };\r\n    Scene.prototype.isCurrentScene = function () {\r\n        if (this.engine) {\r\n            return this.engine.currentScene === this;\r\n        }\r\n        return false;\r\n    };\r\n    Scene.prototype._collectActorStats = function (engine) {\r\n        for (var _i = 0, _a = this.uiActors; _i < _a.length; _i++) {\r\n            var _ui = _a[_i];\r\n            engine.stats.currFrame.actors.ui++;\r\n        }\r\n        for (var _b = 0, _c = this.actors; _b < _c.length; _b++) {\r\n            var actor = _c[_b];\r\n            engine.stats.currFrame.actors.alive++;\r\n            for (var _d = 0, _e = actor.children; _d < _e.length; _d++) {\r\n                var child = _e[_d];\r\n                if (ActorUtils.isUIActor(child)) {\r\n                    engine.stats.currFrame.actors.ui++;\r\n                }\r\n                else {\r\n                    engine.stats.currFrame.actors.alive++;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Scene;\r\n}(Class));\r\nexport { Scene };\r\n//# sourceMappingURL=Scene.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from './../Class';\r\nimport { GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\r\n/**\r\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\r\n * to provide controller support for your games.\r\n *\r\n * [[include:Gamepads.md]]\r\n */\r\nvar Gamepads = /** @class */ (function (_super) {\r\n    __extends(Gamepads, _super);\r\n    function Gamepads() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Whether or not to poll for Gamepad input (default: `false`)\r\n         */\r\n        _this.enabled = false;\r\n        /**\r\n         * Whether or not Gamepad API is supported\r\n         */\r\n        _this.supported = !!navigator.getGamepads;\r\n        _this._gamePadTimeStamps = [0, 0, 0, 0];\r\n        _this._oldPads = [];\r\n        _this._pads = [];\r\n        _this._initSuccess = false;\r\n        _this._navigator = navigator;\r\n        _this._minimumConfiguration = null;\r\n        return _this;\r\n    }\r\n    Gamepads.prototype.init = function () {\r\n        if (!this.supported) {\r\n            return;\r\n        }\r\n        if (this._initSuccess) {\r\n            return;\r\n        }\r\n        // In Chrome, this will return 4 undefined items until a button is pressed\r\n        // In FF, this will not return any items until a button is pressed\r\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\r\n        if (this._oldPads.length && this._oldPads[0]) {\r\n            this._initSuccess = true;\r\n        }\r\n    };\r\n    /**\r\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\r\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\r\n     * all other controllers with more axis or buttons are valid as well. If no minimum\r\n     * configuration is set all pads are valid.\r\n     */\r\n    Gamepads.prototype.setMinimumGamepadConfiguration = function (config) {\r\n        this._enableAndUpdate(); // if config is used, implicitly enable\r\n        this._minimumConfiguration = config;\r\n    };\r\n    /**\r\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\r\n     */\r\n    Gamepads.prototype._enableAndUpdate = function () {\r\n        if (!this.enabled) {\r\n            this.enabled = true;\r\n            this.update();\r\n        }\r\n    };\r\n    /**\r\n     * Checks a navigator gamepad against the minimum configuration if present.\r\n     */\r\n    Gamepads.prototype._isGamepadValid = function (pad) {\r\n        if (!this._minimumConfiguration) {\r\n            return true;\r\n        }\r\n        if (!pad) {\r\n            return false;\r\n        }\r\n        var axesLength = pad.axes.filter(function (value) {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        var buttonLength = pad.buttons.filter(function (value) {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\r\n    };\r\n    Gamepads.prototype.on = function (eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Gamepads.prototype.off = function (eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Updates Gamepad state and publishes Gamepad events\r\n     */\r\n    Gamepads.prototype.update = function () {\r\n        if (!this.enabled || !this.supported) {\r\n            return;\r\n        }\r\n        this.init();\r\n        var gamepads = this._navigator.getGamepads();\r\n        for (var i = 0; i < gamepads.length; i++) {\r\n            if (!gamepads[i]) {\r\n                var gamepad = this.at(i);\r\n                // If was connected, but now isn't emit the disconnect event\r\n                if (gamepad.connected) {\r\n                    this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\r\n                }\r\n                // Reset connection status\r\n                gamepad.connected = false;\r\n                continue;\r\n            }\r\n            else {\r\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\r\n                    this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\r\n                }\r\n                // Set connection status\r\n                this.at(i).connected = true;\r\n            }\r\n            // Only supported in Chrome\r\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\r\n                continue;\r\n            }\r\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\r\n            // Add reference to navigator gamepad\r\n            this.at(i).navigatorGamepad = gamepads[i];\r\n            // Buttons\r\n            var b, bi, a, ai, value;\r\n            for (b in Buttons) {\r\n                bi = Buttons[b];\r\n                if (typeof bi === 'number') {\r\n                    if (gamepads[i].buttons[bi]) {\r\n                        value = gamepads[i].buttons[bi].value;\r\n                        if (value !== this._oldPads[i].getButton(bi)) {\r\n                            if (gamepads[i].buttons[bi].pressed) {\r\n                                this.at(i).updateButton(bi, value);\r\n                                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\r\n                            }\r\n                            else {\r\n                                this.at(i).updateButton(bi, 0);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Axes\r\n            for (a in Axes) {\r\n                ai = Axes[a];\r\n                if (typeof ai === 'number') {\r\n                    value = gamepads[i].axes[ai];\r\n                    if (value !== this._oldPads[i].getAxes(ai)) {\r\n                        this.at(i).updateAxes(ai, value);\r\n                        this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\r\n                    }\r\n                }\r\n            }\r\n            this._oldPads[i] = this._clonePad(gamepads[i]);\r\n        }\r\n    };\r\n    /**\r\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\r\n     */\r\n    Gamepads.prototype.at = function (index) {\r\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\r\n        if (index >= this._pads.length) {\r\n            // Ensure there is a pad to retrieve\r\n            for (var i = this._pads.length - 1, max = index; i < max; i++) {\r\n                this._pads.push(new Gamepad());\r\n                this._oldPads.push(new Gamepad());\r\n            }\r\n        }\r\n        return this._pads[index];\r\n    };\r\n    /**\r\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\r\n     */\r\n    Gamepads.prototype.getValidGamepads = function () {\r\n        this._enableAndUpdate();\r\n        var result = [];\r\n        for (var i = 0; i < this._pads.length; i++) {\r\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\r\n                result.push(this.at(i));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Gets the number of connected gamepads\r\n     */\r\n    Gamepads.prototype.count = function () {\r\n        return this._pads.filter(function (p) { return p.connected; }).length;\r\n    };\r\n    Gamepads.prototype._clonePads = function (pads) {\r\n        var arr = [];\r\n        for (var i = 0, len = pads.length; i < len; i++) {\r\n            arr.push(this._clonePad(pads[i]));\r\n        }\r\n        return arr;\r\n    };\r\n    /**\r\n     * Fastest way to clone a known object is to do it yourself\r\n     */\r\n    Gamepads.prototype._clonePad = function (pad) {\r\n        var i, len;\r\n        var clonedPad = new Gamepad();\r\n        if (!pad) {\r\n            return clonedPad;\r\n        }\r\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\r\n            if (pad.buttons[i]) {\r\n                clonedPad.updateButton(i, pad.buttons[i].value);\r\n            }\r\n        }\r\n        for (i = 0, len = pad.axes.length; i < len; i++) {\r\n            clonedPad.updateAxes(i, pad.axes[i]);\r\n        }\r\n        return clonedPad;\r\n    };\r\n    /**\r\n     * The minimum value an axis has to move before considering it a change\r\n     */\r\n    Gamepads.MinAxisMoveThreshold = 0.05;\r\n    return Gamepads;\r\n}(Class));\r\nexport { Gamepads };\r\n/**\r\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\r\n * for more information on handling controller input.\r\n */\r\nvar Gamepad = /** @class */ (function (_super) {\r\n    __extends(Gamepad, _super);\r\n    function Gamepad() {\r\n        var _this = _super.call(this) || this;\r\n        _this.connected = false;\r\n        _this._buttons = new Array(16);\r\n        _this._axes = new Array(4);\r\n        var i;\r\n        for (i = 0; i < _this._buttons.length; i++) {\r\n            _this._buttons[i] = 0;\r\n        }\r\n        for (i = 0; i < _this._axes.length; i++) {\r\n            _this._axes[i] = 0;\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Whether or not the given button is pressed\r\n     * @param button     The button to query\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    Gamepad.prototype.isButtonPressed = function (button, threshold) {\r\n        if (threshold === void 0) { threshold = 1; }\r\n        return this._buttons[button] >= threshold;\r\n    };\r\n    /**\r\n     * Gets the given button value between 0 and 1\r\n     */\r\n    Gamepad.prototype.getButton = function (button) {\r\n        return this._buttons[button];\r\n    };\r\n    /**\r\n     * Gets the given axis value between -1 and 1. Values below\r\n     * [[MinAxisMoveThreshold]] are considered 0.\r\n     */\r\n    Gamepad.prototype.getAxes = function (axes) {\r\n        var value = this._axes[axes];\r\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    };\r\n    Gamepad.prototype.updateButton = function (buttonIndex, value) {\r\n        this._buttons[buttonIndex] = value;\r\n    };\r\n    Gamepad.prototype.updateAxes = function (axesIndex, value) {\r\n        this._axes[axesIndex] = value;\r\n    };\r\n    return Gamepad;\r\n}(Class));\r\nexport { Gamepad };\r\n/**\r\n * Gamepad Buttons enumeration\r\n */\r\nexport var Buttons;\r\n(function (Buttons) {\r\n    /**\r\n     * Face 1 button (e.g. A)\r\n     */\r\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\r\n    /**\r\n     * Face 2 button (e.g. B)\r\n     */\r\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\r\n    /**\r\n     * Face 3 button (e.g. X)\r\n     */\r\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\r\n    /**\r\n     * Face 4 button (e.g. Y)\r\n     */\r\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\r\n    /**\r\n     * Left bumper button\r\n     */\r\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\r\n    /**\r\n     * Right bumper button\r\n     */\r\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\r\n    /**\r\n     * Left trigger button\r\n     */\r\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\r\n    /**\r\n     * Right trigger button\r\n     */\r\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\r\n    /**\r\n     * Select button\r\n     */\r\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\r\n    /**\r\n     * Start button\r\n     */\r\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\r\n    /**\r\n     * Left analog stick press (e.g. L3)\r\n     */\r\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\r\n    /**\r\n     * Right analog stick press (e.g. R3)\r\n     */\r\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\r\n    /**\r\n     * D-pad up\r\n     */\r\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\r\n    /**\r\n     * D-pad down\r\n     */\r\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\r\n    /**\r\n     * D-pad left\r\n     */\r\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\r\n    /**\r\n     * D-pad right\r\n     */\r\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\r\n})(Buttons || (Buttons = {}));\r\n/**\r\n * Gamepad Axes enumeration\r\n */\r\nexport var Axes;\r\n(function (Axes) {\r\n    /**\r\n     * Left analogue stick X direction\r\n     */\r\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\r\n    /**\r\n     * Left analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\r\n    /**\r\n     * Right analogue stick X direction\r\n     */\r\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\r\n    /**\r\n     * Right analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\r\n})(Axes || (Axes = {}));\r\n//# sourceMappingURL=Gamepad.js.map","/**\r\n * Debug statistics and flags for Excalibur. If polling these values, it would be\r\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\r\n * updated during a frame.\r\n */\r\nvar Debug = /** @class */ (function () {\r\n    function Debug() {\r\n        /**\r\n         * Performance statistics\r\n         */\r\n        this.stats = {\r\n            /**\r\n             * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[postframe]] event. See [[IFrameStats]]\r\n             */\r\n            currFrame: new FrameStats(),\r\n            /**\r\n             * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[IFrameStats]]\r\n             */\r\n            prevFrame: new FrameStats()\r\n        };\r\n    }\r\n    return Debug;\r\n}());\r\nexport { Debug };\r\n/**\r\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\r\n * creating instances of this every frame.\r\n */\r\nvar FrameStats = /** @class */ (function () {\r\n    function FrameStats() {\r\n        this._id = 0;\r\n        this._delta = 0;\r\n        this._fps = 0;\r\n        this._actorStats = {\r\n            alive: 0,\r\n            killed: 0,\r\n            ui: 0,\r\n            get remaining() {\r\n                return this.alive - this.killed;\r\n            },\r\n            get total() {\r\n                return this.remaining + this.ui;\r\n            }\r\n        };\r\n        this._durationStats = {\r\n            update: 0,\r\n            draw: 0,\r\n            get total() {\r\n                return this.update + this.draw;\r\n            }\r\n        };\r\n        this._physicsStats = new PhysicsStats();\r\n    }\r\n    /**\r\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    FrameStats.prototype.reset = function (otherStats) {\r\n        if (otherStats) {\r\n            this.id = otherStats.id;\r\n            this.delta = otherStats.delta;\r\n            this.fps = otherStats.fps;\r\n            this.actors.alive = otherStats.actors.alive;\r\n            this.actors.killed = otherStats.actors.killed;\r\n            this.actors.ui = otherStats.actors.ui;\r\n            this.duration.update = otherStats.duration.update;\r\n            this.duration.draw = otherStats.duration.draw;\r\n            this._physicsStats.reset(otherStats.physics);\r\n        }\r\n        else {\r\n            this.id = this.delta = this.fps = 0;\r\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\r\n            this.duration.update = this.duration.draw = 0;\r\n            this._physicsStats.reset();\r\n        }\r\n    };\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    FrameStats.prototype.clone = function () {\r\n        var fs = new FrameStats();\r\n        fs.reset(this);\r\n        return fs;\r\n    };\r\n    Object.defineProperty(FrameStats.prototype, \"id\", {\r\n        /**\r\n         * Gets the frame's id\r\n         */\r\n        get: function () {\r\n            return this._id;\r\n        },\r\n        /**\r\n         * Sets the frame's id\r\n         */\r\n        set: function (value) {\r\n            this._id = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"delta\", {\r\n        /**\r\n         * Gets the frame's delta (time since last frame)\r\n         */\r\n        get: function () {\r\n            return this._delta;\r\n        },\r\n        /**\r\n         * Sets the frame's delta (time since last frame). Internal use only.\r\n         * @internal\r\n         */\r\n        set: function (value) {\r\n            this._delta = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"fps\", {\r\n        /**\r\n         * Gets the frame's frames-per-second (FPS)\r\n         */\r\n        get: function () {\r\n            return this._fps;\r\n        },\r\n        /**\r\n         * Sets the frame's frames-per-second (FPS). Internal use only.\r\n         * @internal\r\n         */\r\n        set: function (value) {\r\n            this._fps = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"actors\", {\r\n        /**\r\n         * Gets the frame's actor statistics\r\n         */\r\n        get: function () {\r\n            return this._actorStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"duration\", {\r\n        /**\r\n         * Gets the frame's duration statistics\r\n         */\r\n        get: function () {\r\n            return this._durationStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"physics\", {\r\n        /**\r\n         * Gets the frame's physics statistics\r\n         */\r\n        get: function () {\r\n            return this._physicsStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FrameStats;\r\n}());\r\nexport { FrameStats };\r\nvar PhysicsStats = /** @class */ (function () {\r\n    function PhysicsStats() {\r\n        this._pairs = 0;\r\n        this._collisions = 0;\r\n        this._collidersHash = {};\r\n        this._fastBodies = 0;\r\n        this._fastBodyCollisions = 0;\r\n        this._broadphase = 0;\r\n        this._narrowphase = 0;\r\n    }\r\n    /**\r\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    PhysicsStats.prototype.reset = function (otherStats) {\r\n        if (otherStats) {\r\n            this.pairs = otherStats.pairs;\r\n            this.collisions = otherStats.collisions;\r\n            this.collidersHash = otherStats.collidersHash;\r\n            this.fastBodies = otherStats.fastBodies;\r\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\r\n            this.broadphase = otherStats.broadphase;\r\n            this.narrowphase = otherStats.narrowphase;\r\n        }\r\n        else {\r\n            this.pairs = this.collisions = this.fastBodies = 0;\r\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\r\n            this.collidersHash = {};\r\n        }\r\n    };\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    PhysicsStats.prototype.clone = function () {\r\n        var ps = new PhysicsStats();\r\n        ps.reset(this);\r\n        return ps;\r\n    };\r\n    Object.defineProperty(PhysicsStats.prototype, \"pairs\", {\r\n        get: function () {\r\n            return this._pairs;\r\n        },\r\n        set: function (value) {\r\n            this._pairs = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"collisions\", {\r\n        get: function () {\r\n            return this._collisions;\r\n        },\r\n        set: function (value) {\r\n            this._collisions = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"collidersHash\", {\r\n        get: function () {\r\n            return this._collidersHash;\r\n        },\r\n        set: function (colliders) {\r\n            this._collidersHash = colliders;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"fastBodies\", {\r\n        get: function () {\r\n            return this._fastBodies;\r\n        },\r\n        set: function (value) {\r\n            this._fastBodies = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"fastBodyCollisions\", {\r\n        get: function () {\r\n            return this._fastBodyCollisions;\r\n        },\r\n        set: function (value) {\r\n            this._fastBodyCollisions = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"broadphase\", {\r\n        get: function () {\r\n            return this._broadphase;\r\n        },\r\n        set: function (value) {\r\n            this._broadphase = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"narrowphase\", {\r\n        get: function () {\r\n            return this._narrowphase;\r\n        },\r\n        set: function (value) {\r\n            this._narrowphase = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PhysicsStats;\r\n}());\r\nexport { PhysicsStats };\r\n//# sourceMappingURL=Debug.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { ScrollPreventionMode } from './../Engine';\r\nimport { GameEvent } from '../Events';\r\nimport { Vector, GlobalCoordinates } from '../Algebra';\r\nimport { Class } from '../Class';\r\nimport * as Actors from '../Util/Actors';\r\nimport * as Util from '../Util/Util';\r\n/**\r\n * The type of pointer for a [[PointerEvent]].\r\n */\r\nexport var PointerType;\r\n(function (PointerType) {\r\n    PointerType[PointerType[\"Touch\"] = 0] = \"Touch\";\r\n    PointerType[PointerType[\"Mouse\"] = 1] = \"Mouse\";\r\n    PointerType[PointerType[\"Pen\"] = 2] = \"Pen\";\r\n    PointerType[PointerType[\"Unknown\"] = 3] = \"Unknown\";\r\n})(PointerType || (PointerType = {}));\r\n/**\r\n * The mouse button being pressed.\r\n */\r\nexport var PointerButton;\r\n(function (PointerButton) {\r\n    PointerButton[PointerButton[\"Left\"] = 0] = \"Left\";\r\n    PointerButton[PointerButton[\"Middle\"] = 1] = \"Middle\";\r\n    PointerButton[PointerButton[\"Right\"] = 2] = \"Right\";\r\n    PointerButton[PointerButton[\"Unknown\"] = 3] = \"Unknown\";\r\n})(PointerButton || (PointerButton = {}));\r\nexport var WheelDeltaMode;\r\n(function (WheelDeltaMode) {\r\n    WheelDeltaMode[WheelDeltaMode[\"Pixel\"] = 0] = \"Pixel\";\r\n    WheelDeltaMode[WheelDeltaMode[\"Line\"] = 1] = \"Line\";\r\n    WheelDeltaMode[WheelDeltaMode[\"Page\"] = 2] = \"Page\";\r\n})(WheelDeltaMode || (WheelDeltaMode = {}));\r\n/**\r\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\r\n */\r\nexport var PointerScope;\r\n(function (PointerScope) {\r\n    /**\r\n     * Handle events on the `canvas` element only. Events originating outside the\r\n     * `canvas` will not be handled.\r\n     */\r\n    PointerScope[PointerScope[\"Canvas\"] = 0] = \"Canvas\";\r\n    /**\r\n     * Handles events on the entire document. All events will be handled by Excalibur.\r\n     */\r\n    PointerScope[PointerScope[\"Document\"] = 1] = \"Document\";\r\n})(PointerScope || (PointerScope = {}));\r\n/**\r\n * A constant used to normalize wheel events across different browsers\r\n *\r\n * This normalization factor is pulled from https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\r\n */\r\nvar ScrollWheelNormalizationFactor = -1 / 40;\r\n/**\r\n * Pointer events\r\n *\r\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\r\n * handling pointer input.\r\n *\r\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\r\n */\r\nvar PointerEvent = /** @class */ (function (_super) {\r\n    __extends(PointerEvent, _super);\r\n    /**\r\n     * @param coordinates         The [[GlobalCoordinates]] of the event\r\n     * @param pointer             The [[Pointer]] of the event\r\n     * @param index               The index of the pointer (zero-based)\r\n     * @param pointerType         The type of pointer\r\n     * @param button              The button pressed (if [[PointerType.Mouse]])\r\n     * @param ev                  The raw DOM event being handled\r\n     * @param pos                 (Will be added to signature in 0.14.0 release) The position of the event (in world coordinates)\r\n     */\r\n    function PointerEvent(coordinates, pointer, index, pointerType, button, ev) {\r\n        var _this = _super.call(this) || this;\r\n        _this.coordinates = coordinates;\r\n        _this.pointer = pointer;\r\n        _this.index = index;\r\n        _this.pointerType = pointerType;\r\n        _this.button = button;\r\n        _this.ev = ev;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PointerEvent.prototype, \"worldPos\", {\r\n        /** The world coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.worldPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"pagePos\", {\r\n        /** The page coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.pagePos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"screenPos\", {\r\n        /** The screen coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.screenPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"pos\", {\r\n        get: function () {\r\n            return this.coordinates.worldPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets event path to actor, depending on actor provided.\r\n     * If actor is lower in hierarchy tree, previous path'll be kept.\r\n     * @param actor Actor, to lay path form.\r\n     */\r\n    PointerEvent.prototype.layPath = function (actor) {\r\n        if (!this.pointer.isActorUnderPointer(actor)) {\r\n            return;\r\n        }\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    return PointerEvent;\r\n}(GameEvent));\r\nexport { PointerEvent };\r\nvar PointerEventFactory = /** @class */ (function () {\r\n    function PointerEventFactory(_pointerEventType) {\r\n        this._pointerEventType = _pointerEventType;\r\n    }\r\n    /**\r\n     * Create specific PointerEvent\r\n     */\r\n    PointerEventFactory.prototype.create = function (coordinates, pointer, index, pointerType, button, ev) {\r\n        return new this._pointerEventType(coordinates, pointer, index, pointerType, button, ev);\r\n    };\r\n    return PointerEventFactory;\r\n}());\r\nexport { PointerEventFactory };\r\nvar PointerDragEvent = /** @class */ (function (_super) {\r\n    __extends(PointerDragEvent, _super);\r\n    function PointerDragEvent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return PointerDragEvent;\r\n}(PointerEvent));\r\nexport { PointerDragEvent };\r\nvar PointerUpEvent = /** @class */ (function (_super) {\r\n    __extends(PointerUpEvent, _super);\r\n    function PointerUpEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerup';\r\n        return _this;\r\n    }\r\n    PointerUpEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragEnd && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragend', this);\r\n        }\r\n    };\r\n    return PointerUpEvent;\r\n}(PointerEvent));\r\nexport { PointerUpEvent };\r\nvar PointerDownEvent = /** @class */ (function (_super) {\r\n    __extends(PointerDownEvent, _super);\r\n    function PointerDownEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerdown';\r\n        return _this;\r\n    }\r\n    PointerDownEvent.prototype._onActionEnd = function (actor) {\r\n        if (this.pointer.isDragStart && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragstart', this);\r\n        }\r\n    };\r\n    return PointerDownEvent;\r\n}(PointerEvent));\r\nexport { PointerDownEvent };\r\nvar PointerMoveEvent = /** @class */ (function (_super) {\r\n    __extends(PointerMoveEvent, _super);\r\n    function PointerMoveEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointermove';\r\n        return _this;\r\n    }\r\n    PointerMoveEvent.prototype.propagate = function () {\r\n        var _this = this;\r\n        if (!this.eventPath.length) {\r\n            if (this.pointer.hasActorsUnderPointer) {\r\n                var actors = this.pointer.getActorsUnderPointer();\r\n                actors.forEach(function (actor) {\r\n                    if (!_this.pointer.isActorUnderPointer(actor)) {\r\n                        _this._onActorLeave(actor);\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        this.action();\r\n        if (this.bubbles) {\r\n            this.propagate();\r\n        }\r\n    };\r\n    /**\r\n     * Sets event path to actor, depending on actor provided.\r\n     * If actor is in a dragging state, current dragging target would be used.\r\n     * @param actor Actor, to lay path form.\r\n     */\r\n    PointerMoveEvent.prototype.layPath = function (actor) {\r\n        /**\r\n         *  double-check is preformed, because user could move pointer too fast and\r\n         *  in that case, pointer can appear out of boundings of the dragging element\r\n         */\r\n        if (this.pointer.isDragging) {\r\n            actor = this.pointer.dragTarget || actor;\r\n        }\r\n        else if (!this.pointer.isActorUnderPointer(actor)) {\r\n            return;\r\n        }\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    PointerMoveEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n        if (this.pointer.isActorUnderPointer(actor) && !this.pointer.hasActorUnderPointerInList(actor)) {\r\n            this._onActorEnter(actor);\r\n        }\r\n        if (this.pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragmove', this);\r\n        }\r\n    };\r\n    PointerMoveEvent.prototype._onActorEnter = function (actor) {\r\n        var pe = createPointerEventByName('enter', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\r\n        pe.layPath(actor);\r\n        pe.propagate();\r\n        this.pointer.addActorUnderPointer(actor);\r\n        if (this.pointer.isDragging) {\r\n            this.pointer.dragTarget = actor;\r\n        }\r\n    };\r\n    PointerMoveEvent.prototype._onActorLeave = function (actor) {\r\n        var pe = createPointerEventByName('leave', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\r\n        pe.layPath(actor);\r\n        pe.propagate();\r\n        this.pointer.removeActorUnderPointer(actor);\r\n    };\r\n    return PointerMoveEvent;\r\n}(PointerEvent));\r\nexport { PointerMoveEvent };\r\nvar PointerEnterEvent = /** @class */ (function (_super) {\r\n    __extends(PointerEnterEvent, _super);\r\n    function PointerEnterEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerenter';\r\n        return _this;\r\n    }\r\n    PointerEnterEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n    };\r\n    PointerEnterEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragenter', this);\r\n        }\r\n    };\r\n    return PointerEnterEvent;\r\n}(PointerEvent));\r\nexport { PointerEnterEvent };\r\nvar PointerLeaveEvent = /** @class */ (function (_super) {\r\n    __extends(PointerLeaveEvent, _super);\r\n    function PointerLeaveEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerleave';\r\n        return _this;\r\n    }\r\n    PointerLeaveEvent.prototype.layPath = function (actor) {\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    PointerLeaveEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n    };\r\n    PointerLeaveEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragleave', this);\r\n        }\r\n    };\r\n    return PointerLeaveEvent;\r\n}(PointerEvent));\r\nexport { PointerLeaveEvent };\r\nvar PointerCancelEvent = /** @class */ (function (_super) {\r\n    __extends(PointerCancelEvent, _super);\r\n    function PointerCancelEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointercancel';\r\n        return _this;\r\n    }\r\n    return PointerCancelEvent;\r\n}(PointerEvent));\r\nexport { PointerCancelEvent };\r\n/**\r\n * Wheel Events\r\n *\r\n * Represents a mouse wheel event. See [[Pointers]] for more information on\r\n * handling point input.\r\n */\r\nvar WheelEvent = /** @class */ (function (_super) {\r\n    __extends(WheelEvent, _super);\r\n    /**\r\n     * @param x            The `x` coordinate of the event (in world coordinates)\r\n     * @param y            The `y` coordinate of the event (in world coordinates)\r\n     * @param pageX        The `x` coordinate of the event (in document coordinates)\r\n     * @param pageY        The `y` coordinate of the event (in document coordinates)\r\n     * @param screenX      The `x` coordinate of the event (in screen coordinates)\r\n     * @param screenY      The `y` coordinate of the event (in screen coordinates)\r\n     * @param index        The index of the pointer (zero-based)\r\n     * @param deltaX       The type of pointer\r\n     * @param deltaY       The type of pointer\r\n     * @param deltaZ       The type of pointer\r\n     * @param deltaMode    The type of movement [[WheelDeltaMode]]\r\n     * @param ev           The raw DOM event being handled\r\n     */\r\n    function WheelEvent(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\r\n        var _this = _super.call(this) || this;\r\n        _this.x = x;\r\n        _this.y = y;\r\n        _this.pageX = pageX;\r\n        _this.pageY = pageY;\r\n        _this.screenX = screenX;\r\n        _this.screenY = screenY;\r\n        _this.index = index;\r\n        _this.deltaX = deltaX;\r\n        _this.deltaY = deltaY;\r\n        _this.deltaZ = deltaZ;\r\n        _this.deltaMode = deltaMode;\r\n        _this.ev = ev;\r\n        return _this;\r\n    }\r\n    return WheelEvent;\r\n}(GameEvent));\r\nexport { WheelEvent };\r\nfunction createPointerEventByName(eventName, coordinates, pointer, index, pointerType, button, ev) {\r\n    var factory;\r\n    switch (eventName) {\r\n        case 'up':\r\n            factory = new PointerEventFactory(PointerUpEvent);\r\n            break;\r\n        case 'down':\r\n            factory = new PointerEventFactory(PointerDownEvent);\r\n            break;\r\n        case 'move':\r\n            factory = new PointerEventFactory(PointerMoveEvent);\r\n            break;\r\n        case 'cancel':\r\n            factory = new PointerEventFactory(PointerCancelEvent);\r\n            break;\r\n        case 'enter':\r\n            factory = new PointerEventFactory(PointerEnterEvent);\r\n            break;\r\n        case 'leave':\r\n            factory = new PointerEventFactory(PointerLeaveEvent);\r\n            break;\r\n    }\r\n    return factory.create(coordinates, pointer, index, pointerType, button, ev);\r\n}\r\n/**\r\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to\r\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\r\n *\r\n * [[include:Pointers.md]]\r\n */\r\nvar Pointers = /** @class */ (function (_super) {\r\n    __extends(Pointers, _super);\r\n    function Pointers(engine) {\r\n        var _this = _super.call(this) || this;\r\n        _this._pointerDown = [];\r\n        _this._pointerUp = [];\r\n        _this._pointerMove = [];\r\n        _this._pointerCancel = [];\r\n        _this._wheel = [];\r\n        _this._pointers = [];\r\n        _this._activePointers = [];\r\n        _this._engine = engine;\r\n        _this._pointers.push(new Pointer());\r\n        _this._activePointers = [-1];\r\n        _this.primary = _this._pointers[0];\r\n        return _this;\r\n    }\r\n    Pointers.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Initializes pointer event listeners\r\n     */\r\n    Pointers.prototype.init = function (target) {\r\n        target = target || this._engine.canvas;\r\n        // Touch Events\r\n        target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\r\n        target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\r\n        target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\r\n        target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\r\n        // W3C Pointer Events\r\n        // Current: IE11, IE10\r\n        if (window.PointerEvent) {\r\n            // IE11\r\n            this._engine.canvas.style.touchAction = 'none';\r\n            target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\r\n            target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\r\n            target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\r\n            target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerCancel));\r\n        }\r\n        else if (window.MSPointerEvent) {\r\n            // IE10\r\n            this._engine.canvas.style.msTouchAction = 'none';\r\n            target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\r\n            target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\r\n            target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\r\n            target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerCancel));\r\n        }\r\n        else {\r\n            // Mouse Events\r\n            target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\r\n            target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\r\n            target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\r\n        }\r\n        // MDN MouseWheelEvent\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            target.addEventListener('wheel', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            target.addEventListener('mousewheel', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            target.addEventListener('MozMousePixelScroll', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n    };\r\n    Pointers.prototype.update = function () {\r\n        this._pointerUp.length = 0;\r\n        this._pointerDown.length = 0;\r\n        this._pointerMove.length = 0;\r\n        this._pointerCancel.length = 0;\r\n        this._wheel.length = 0;\r\n        for (var i = 0; i < this._pointers.length; i++) {\r\n            this._pointers[i].update();\r\n        }\r\n    };\r\n    /**\r\n     * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\r\n     * @param index  The pointer index to retrieve\r\n     */\r\n    Pointers.prototype.at = function (index) {\r\n        if (index >= this._pointers.length) {\r\n            // Ensure there is a pointer to retrieve\r\n            for (var i = this._pointers.length - 1, max = index; i < max; i++) {\r\n                this._pointers.push(new Pointer());\r\n                this._activePointers.push(-1);\r\n            }\r\n        }\r\n        return this._pointers[index];\r\n    };\r\n    /**\r\n     * Get number of pointers being watched\r\n     */\r\n    Pointers.prototype.count = function () {\r\n        return this._pointers.length;\r\n    };\r\n    /**\r\n     * Propogates events through ancestors chain if necessary\r\n     */\r\n    Pointers.prototype.propagate = function () {\r\n        this._propagatePointerEvent(this._pointerDown);\r\n        this._propagatePointerEvent(this._pointerUp);\r\n        this._propagatePointerEvent(this._pointerMove);\r\n        this._propagatePointerEvent(this._pointerCancel);\r\n        this._propagateWheelEvent('pointerwheel', this._wheel);\r\n    };\r\n    /**\r\n     * Revises pointer events paths accordingly to actor provided\r\n     * @param actor  Actor to be revised\r\n     */\r\n    Pointers.prototype.revisePointerEventsPaths = function (actor) {\r\n        this._revisePointerEventPath(actor, this._pointerDown);\r\n        this._revisePointerEventPath(actor, this._pointerUp);\r\n        this._revisePointerEventPath(actor, this._pointerMove);\r\n        this._revisePointerEventPath(actor, this._pointerCancel);\r\n        this._validateWheelEventPath(this._wheel, actor);\r\n    };\r\n    Pointers.prototype._propagatePointerEvent = function (pointers) {\r\n        var len = pointers.length;\r\n        for (var i = 0; i < len; i++) {\r\n            pointers[i].propagate();\r\n        }\r\n    };\r\n    Pointers.prototype._revisePointerEventPath = function (actor, pointers) {\r\n        var len = pointers.length;\r\n        for (var i = 0; i < len; i++) {\r\n            var pointerEvent = pointers[i];\r\n            pointerEvent.layPath(actor);\r\n        }\r\n    };\r\n    Pointers.prototype._validateWheelEventPath = function (pointers, actor) {\r\n        for (var i = 0; i < pointers.length; i++) {\r\n            var wheelEvent = pointers[i];\r\n            var isNotUIActor = !Actors.isUIActor(actor);\r\n            if (actor.contains(wheelEvent.x, wheelEvent.y, isNotUIActor)) {\r\n                wheelEvent.layPath(actor);\r\n            }\r\n        }\r\n    };\r\n    Pointers.prototype._propagateWheelEvent = function (eventName, pointers) {\r\n        var len = pointers.length;\r\n        var wheelEvent;\r\n        for (var i = 0; i < len; i++) {\r\n            wheelEvent = pointers[i];\r\n            switch (eventName) {\r\n                case 'pointerwheel':\r\n                    this._propagateWheelPointerEvent(wheelEvent);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Pointers.prototype._propagateWheelPointerEvent = function (wheelEvent) {\r\n        if (!wheelEvent.eventPath.length) {\r\n            return;\r\n        }\r\n        var actor = wheelEvent.eventPath.pop();\r\n        actor.eventDispatcher.emit('pointerwheel', wheelEvent);\r\n        if (wheelEvent.bubbles) {\r\n            this._propagateWheelPointerEvent(wheelEvent);\r\n        }\r\n    };\r\n    Pointers.prototype._handleMouseEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            var pointer = _this.at(0);\r\n            var coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, _this._engine);\r\n            var pe = createPointerEventByName(eventName, coordinates, pointer, 0, PointerType.Mouse, e.button, e);\r\n            eventArr.push(pe);\r\n            pointer.eventDispatcher.emit(eventName, pe);\r\n        };\r\n    };\r\n    Pointers.prototype._handleTouchEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            for (var i = 0, len = e.changedTouches.length; i < len; i++) {\r\n                var index = _this._pointers.length > 1 ? _this._getPointerIndex(e.changedTouches[i].identifier) : 0;\r\n                if (index === -1) {\r\n                    continue;\r\n                }\r\n                var pointer = _this.at(index);\r\n                var coordinates = GlobalCoordinates.fromPagePosition(e.changedTouches[i].pageX, e.changedTouches[i].pageY, _this._engine);\r\n                var pe = createPointerEventByName(eventName, coordinates, pointer, index, PointerType.Touch, PointerButton.Unknown, e);\r\n                eventArr.push(pe);\r\n                pointer.eventDispatcher.emit(eventName, pe);\r\n                // only with multi-pointer\r\n                if (_this._pointers.length > 1) {\r\n                    if (eventName === 'up') {\r\n                        // remove pointer ID from pool when pointer is lifted\r\n                        _this._activePointers[index] = -1;\r\n                    }\r\n                    else if (eventName === 'down') {\r\n                        // set pointer ID to given index\r\n                        _this._activePointers[index] = e.changedTouches[i].identifier;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    };\r\n    Pointers.prototype._handlePointerEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            // get the index for this pointer ID if multi-pointer is asked for\r\n            var index = _this._pointers.length > 1 ? _this._getPointerIndex(e.pointerId) : 0;\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            var pointer = _this.at(index);\r\n            var coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, _this._engine);\r\n            var pe = createPointerEventByName(eventName, coordinates, pointer, index, _this._stringToPointerType(e.pointerType), e.button, e);\r\n            eventArr.push(pe);\r\n            pointer.eventDispatcher.emit(eventName, pe);\r\n            // only with multi-pointer\r\n            if (_this._pointers.length > 1) {\r\n                if (eventName === 'up') {\r\n                    // remove pointer ID from pool when pointer is lifted\r\n                    _this._activePointers[index] = -1;\r\n                }\r\n                else if (eventName === 'down') {\r\n                    // set pointer ID to given index\r\n                    _this._activePointers[index] = e.pointerId;\r\n                }\r\n            }\r\n        };\r\n    };\r\n    Pointers.prototype._handleWheelEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            // Should we prevent page scroll because of this event\r\n            if (_this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n                (_this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && e.target === _this._engine.canvas)) {\r\n                e.preventDefault();\r\n            }\r\n            var x = e.pageX - Util.getPosition(_this._engine.canvas).x;\r\n            var y = e.pageY - Util.getPosition(_this._engine.canvas).y;\r\n            var transformedPoint = _this._engine.screenToWorldCoordinates(new Vector(x, y));\r\n            // deltaX, deltaY, and deltaZ are the standard modern properties\r\n            // wheelDeltaX, wheelDeltaY, are legacy properties in webkit browsers and older IE\r\n            // e.detail is only used in opera\r\n            var deltaX = e.deltaX || e.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\r\n            var deltaY = e.deltaY || e.wheelDeltaY * ScrollWheelNormalizationFactor || e.wheelDelta * ScrollWheelNormalizationFactor || e.detail || 0;\r\n            var deltaZ = e.deltaZ || 0;\r\n            var deltaMode = WheelDeltaMode.Pixel;\r\n            if (e.deltaMode) {\r\n                if (e.deltaMode === 1) {\r\n                    deltaMode = WheelDeltaMode.Line;\r\n                }\r\n                else if (e.deltaMode === 2) {\r\n                    deltaMode = WheelDeltaMode.Page;\r\n                }\r\n            }\r\n            var we = new WheelEvent(transformedPoint.x, transformedPoint.y, e.pageX, e.pageY, x, y, 0, deltaX, deltaY, deltaZ, deltaMode, e);\r\n            eventArr.push(we);\r\n            _this.at(0).eventDispatcher.emit(eventName, we);\r\n        };\r\n    };\r\n    /**\r\n     * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\r\n     * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\r\n     */\r\n    Pointers.prototype._getPointerIndex = function (pointerId) {\r\n        var idx;\r\n        if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\r\n            return idx;\r\n        }\r\n        for (var i = 0; i < this._activePointers.length; i++) {\r\n            if (this._activePointers[i] === -1) {\r\n                return i;\r\n            }\r\n        }\r\n        // ignore pointer because game isn't watching\r\n        return -1;\r\n    };\r\n    Pointers.prototype._stringToPointerType = function (s) {\r\n        switch (s) {\r\n            case 'touch':\r\n                return PointerType.Touch;\r\n            case 'mouse':\r\n                return PointerType.Mouse;\r\n            case 'pen':\r\n                return PointerType.Pen;\r\n            default:\r\n                return PointerType.Unknown;\r\n        }\r\n    };\r\n    return Pointers;\r\n}(Class));\r\nexport { Pointers };\r\n/**\r\n * Captures and dispatches PointerEvents\r\n */\r\nvar Pointer = /** @class */ (function (_super) {\r\n    __extends(Pointer, _super);\r\n    function Pointer() {\r\n        var _this = _super.call(this) || this;\r\n        _this._isDown = false;\r\n        _this._wasDown = false;\r\n        _this._actorsUnderPointer = { length: 0 };\r\n        /**\r\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastPagePos = null;\r\n        /**\r\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastScreenPos = null;\r\n        /**\r\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastWorldPos = null;\r\n        /**\r\n         * Returns the currently dragging target or null if it isn't exist\r\n         */\r\n        _this.dragTarget = null;\r\n        _this.on('move', _this._onPointerMove);\r\n        _this.on('down', _this._onPointerDown);\r\n        _this.on('up', _this._onPointerUp);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Pointer.prototype, \"isDragging\", {\r\n        /**\r\n         * Whether the Pointer is currently dragging.\r\n         */\r\n        get: function () {\r\n            return this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"isDragStart\", {\r\n        /**\r\n         * Whether the Pointer just started dragging.\r\n         */\r\n        get: function () {\r\n            return !this._wasDown && this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"isDragEnd\", {\r\n        /**\r\n         * Whether the Pointer just ended dragging.\r\n         */\r\n        get: function () {\r\n            return this._wasDown && !this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"hasActorsUnderPointer\", {\r\n        /**\r\n         * Returns true if pointer has any actors under\r\n         */\r\n        get: function () {\r\n            return !!this._actorsUnderPointer.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Pointer.prototype.update = function () {\r\n        if (this._wasDown && !this._isDown) {\r\n            this._wasDown = false;\r\n        }\r\n        else if (!this._wasDown && this._isDown) {\r\n            this._wasDown = true;\r\n        }\r\n    };\r\n    /**\r\n     * Adds an Actor to actorsUnderPointer object.\r\n     * @param actor An Actor to be added;\r\n     */\r\n    Pointer.prototype.addActorUnderPointer = function (actor) {\r\n        if (!this.hasActorUnderPointerInList(actor)) {\r\n            this._actorsUnderPointer[actor.id] = actor;\r\n            this._actorsUnderPointer.length += 1;\r\n        }\r\n    };\r\n    /**\r\n     * Removes an Actor from actorsUnderPointer object.\r\n     * @param actor An Actor to be removed;\r\n     */\r\n    Pointer.prototype.removeActorUnderPointer = function (actor) {\r\n        if (this.hasActorUnderPointerInList(actor)) {\r\n            delete this._actorsUnderPointer[actor.id];\r\n            this._actorsUnderPointer.length -= 1;\r\n        }\r\n    };\r\n    /**\r\n     * Returns an Actor from actorsUnderPointer object.\r\n     * @param actor An Actor to be ;\r\n     */\r\n    Pointer.prototype.getActorsUnderPointer = function () {\r\n        var actors = [];\r\n        for (var id in this._actorsUnderPointer) {\r\n            if (id === 'length') {\r\n                continue;\r\n            }\r\n            var actor = this._actorsUnderPointer[id];\r\n            actors.push(actor);\r\n        }\r\n        return actors;\r\n    };\r\n    /**\r\n     * Checks if Pointer has a specific Actor under.\r\n     * @param actor An Actor for check;\r\n     */\r\n    Pointer.prototype.isActorUnderPointer = function (actor) {\r\n        return actor.contains(this.lastWorldPos.x, this.lastWorldPos.y, !Actors.isUIActor(actor));\r\n    };\r\n    /**\r\n     * Checks if Pointer has a specific Actor in ActrorsUnderPointer list.\r\n     * @param actor An Actor for check;\r\n     */\r\n    Pointer.prototype.hasActorUnderPointerInList = function (actor) {\r\n        return this._actorsUnderPointer.hasOwnProperty(actor.id.toString());\r\n    };\r\n    Pointer.prototype._onPointerMove = function (ev) {\r\n        this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n        this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n        this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n    };\r\n    Pointer.prototype._onPointerDown = function () {\r\n        this._isDown = true;\r\n    };\r\n    Pointer.prototype._onPointerUp = function () {\r\n        this._isDown = false;\r\n        this.dragTarget = null;\r\n    };\r\n    return Pointer;\r\n}(Class));\r\nexport { Pointer };\r\n//# sourceMappingURL=Pointer.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from './../Class';\r\nimport { GameEvent } from '../Events';\r\n/**\r\n * Enum representing input key codes\r\n */\r\nexport var Keys;\r\n(function (Keys) {\r\n    Keys[Keys[\"Num1\"] = 97] = \"Num1\";\r\n    Keys[Keys[\"Num2\"] = 98] = \"Num2\";\r\n    Keys[Keys[\"Num3\"] = 99] = \"Num3\";\r\n    Keys[Keys[\"Num4\"] = 100] = \"Num4\";\r\n    Keys[Keys[\"Num5\"] = 101] = \"Num5\";\r\n    Keys[Keys[\"Num6\"] = 102] = \"Num6\";\r\n    Keys[Keys[\"Num7\"] = 103] = \"Num7\";\r\n    Keys[Keys[\"Num8\"] = 104] = \"Num8\";\r\n    Keys[Keys[\"Num9\"] = 105] = \"Num9\";\r\n    Keys[Keys[\"Num0\"] = 96] = \"Num0\";\r\n    Keys[Keys[\"Numlock\"] = 144] = \"Numlock\";\r\n    Keys[Keys[\"Semicolon\"] = 186] = \"Semicolon\";\r\n    Keys[Keys[\"A\"] = 65] = \"A\";\r\n    Keys[Keys[\"B\"] = 66] = \"B\";\r\n    Keys[Keys[\"C\"] = 67] = \"C\";\r\n    Keys[Keys[\"D\"] = 68] = \"D\";\r\n    Keys[Keys[\"E\"] = 69] = \"E\";\r\n    Keys[Keys[\"F\"] = 70] = \"F\";\r\n    Keys[Keys[\"G\"] = 71] = \"G\";\r\n    Keys[Keys[\"H\"] = 72] = \"H\";\r\n    Keys[Keys[\"I\"] = 73] = \"I\";\r\n    Keys[Keys[\"J\"] = 74] = \"J\";\r\n    Keys[Keys[\"K\"] = 75] = \"K\";\r\n    Keys[Keys[\"L\"] = 76] = \"L\";\r\n    Keys[Keys[\"M\"] = 77] = \"M\";\r\n    Keys[Keys[\"N\"] = 78] = \"N\";\r\n    Keys[Keys[\"O\"] = 79] = \"O\";\r\n    Keys[Keys[\"P\"] = 80] = \"P\";\r\n    Keys[Keys[\"Q\"] = 81] = \"Q\";\r\n    Keys[Keys[\"R\"] = 82] = \"R\";\r\n    Keys[Keys[\"S\"] = 83] = \"S\";\r\n    Keys[Keys[\"T\"] = 84] = \"T\";\r\n    Keys[Keys[\"U\"] = 85] = \"U\";\r\n    Keys[Keys[\"V\"] = 86] = \"V\";\r\n    Keys[Keys[\"W\"] = 87] = \"W\";\r\n    Keys[Keys[\"X\"] = 88] = \"X\";\r\n    Keys[Keys[\"Y\"] = 89] = \"Y\";\r\n    Keys[Keys[\"Z\"] = 90] = \"Z\";\r\n    Keys[Keys[\"Shift\"] = 16] = \"Shift\";\r\n    Keys[Keys[\"Alt\"] = 18] = \"Alt\";\r\n    Keys[Keys[\"Up\"] = 38] = \"Up\";\r\n    Keys[Keys[\"Down\"] = 40] = \"Down\";\r\n    Keys[Keys[\"Left\"] = 37] = \"Left\";\r\n    Keys[Keys[\"Right\"] = 39] = \"Right\";\r\n    Keys[Keys[\"Space\"] = 32] = \"Space\";\r\n    Keys[Keys[\"Esc\"] = 27] = \"Esc\";\r\n})(Keys || (Keys = {}));\r\n/**\r\n * Event thrown on a game object for a key event\r\n */\r\nvar KeyEvent = /** @class */ (function (_super) {\r\n    __extends(KeyEvent, _super);\r\n    /**\r\n     * @param key  The key responsible for throwing the event\r\n     */\r\n    function KeyEvent(key) {\r\n        var _this = _super.call(this) || this;\r\n        _this.key = key;\r\n        return _this;\r\n    }\r\n    return KeyEvent;\r\n}(GameEvent));\r\nexport { KeyEvent };\r\n/**\r\n * Provides keyboard support for Excalibur.\r\n *\r\n * [[include:Keyboard.md]]\r\n */\r\nvar Keyboard = /** @class */ (function (_super) {\r\n    __extends(Keyboard, _super);\r\n    function Keyboard() {\r\n        var _this = _super.call(this) || this;\r\n        _this._keys = [];\r\n        _this._keysUp = [];\r\n        _this._keysDown = [];\r\n        return _this;\r\n    }\r\n    Keyboard.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Initialize Keyboard event listeners\r\n     */\r\n    Keyboard.prototype.init = function (global) {\r\n        var _this = this;\r\n        global = global || window;\r\n        global.addEventListener('blur', function () {\r\n            _this._keys.length = 0; // empties array efficiently\r\n        });\r\n        // key up is on window because canvas cannot have focus\r\n        global.addEventListener('keyup', function (ev) {\r\n            var code = _this._normalizeKeyCode(ev.keyCode);\r\n            var key = _this._keys.indexOf(code);\r\n            _this._keys.splice(key, 1);\r\n            _this._keysUp.push(code);\r\n            var keyEvent = new KeyEvent(code);\r\n            // alias the old api, we may want to deprecate this in the future\r\n            _this.eventDispatcher.emit('up', keyEvent);\r\n            _this.eventDispatcher.emit('release', keyEvent);\r\n        });\r\n        // key down is on window because canvas cannot have focus\r\n        global.addEventListener('keydown', function (ev) {\r\n            var code = _this._normalizeKeyCode(ev.keyCode);\r\n            if (_this._keys.indexOf(code) === -1) {\r\n                _this._keys.push(code);\r\n                _this._keysDown.push(code);\r\n                var keyEvent = new KeyEvent(code);\r\n                _this.eventDispatcher.emit('down', keyEvent);\r\n                _this.eventDispatcher.emit('press', keyEvent);\r\n            }\r\n        });\r\n    };\r\n    Keyboard.prototype.update = function () {\r\n        // Reset keysDown and keysUp after update is complete\r\n        this._keysDown.length = 0;\r\n        this._keysUp.length = 0;\r\n        // Emit synthetic \"hold\" event\r\n        for (var i = 0; i < this._keys.length; i++) {\r\n            this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\r\n        }\r\n    };\r\n    /**\r\n     * Gets list of keys being pressed down\r\n     */\r\n    Keyboard.prototype.getKeys = function () {\r\n        return this._keys;\r\n    };\r\n    /**\r\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\r\n     * @param key Test whether a key was just pressed\r\n     */\r\n    Keyboard.prototype.wasPressed = function (key) {\r\n        return this._keysDown.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Tests if a certain key is held down. This is persisted between frames.\r\n     * @param key  Test whether a key is held down\r\n     */\r\n    Keyboard.prototype.isHeld = function (key) {\r\n        return this._keys.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\r\n     * @param key  Test whether a key was just released\r\n     */\r\n    Keyboard.prototype.wasReleased = function (key) {\r\n        return this._keysUp.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Normalizes some browser event key codes to map to standard Excalibur key codes\r\n     * @param code Event keyCode\r\n     * @see http://unixpapa.com/js/key.html\r\n     */\r\n    Keyboard.prototype._normalizeKeyCode = function (code) {\r\n        switch (code) {\r\n            case 59: // : ; in Firefox, Opera\r\n                return Keys.Semicolon;\r\n            default:\r\n                return code;\r\n        }\r\n    };\r\n    return Keyboard;\r\n}(Class));\r\nexport { Keyboard };\r\n//# sourceMappingURL=Keyboard.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EX_VERSION } from './';\r\nimport { Promise } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { UIActor } from './UIActor';\r\nimport { Actor } from './Actor';\r\nimport { Timer } from './Timer';\r\nimport { TileMap } from './TileMap';\r\nimport { Loader } from './Loader';\r\nimport { Detector } from './Util/Detector';\r\nimport { VisibleEvent, HiddenEvent, GameStartEvent, GameStopEvent, PreUpdateEvent, PostUpdateEvent, PreFrameEvent, PostFrameEvent, DeactivateEvent, ActivateEvent, PreDrawEvent, PostDrawEvent, InitializeEvent } from './Events';\r\nimport { Logger, LogLevel } from './Util/Log';\r\nimport { Color } from './Drawing/Color';\r\nimport { Scene } from './Scene';\r\nimport { Debug } from './Debug';\r\nimport { Class } from './Class';\r\nimport * as Input from './Input/Index';\r\nimport * as Util from './Util/Util';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\n/**\r\n * Enum representing the different display modes available to Excalibur\r\n */\r\nexport var DisplayMode;\r\n(function (DisplayMode) {\r\n    /**\r\n     * Show the game as full screen\r\n     */\r\n    DisplayMode[DisplayMode[\"FullScreen\"] = 0] = \"FullScreen\";\r\n    /**\r\n     * Scale the game to the parent DOM container\r\n     */\r\n    DisplayMode[DisplayMode[\"Container\"] = 1] = \"Container\";\r\n    /**\r\n     * Show the game as a fixed size\r\n     */\r\n    DisplayMode[DisplayMode[\"Fixed\"] = 2] = \"Fixed\";\r\n    /**\r\n     * Allow the game to be positioned with the [[IEngineOptions.position]] option\r\n     */\r\n    DisplayMode[DisplayMode[\"Position\"] = 3] = \"Position\";\r\n})(DisplayMode || (DisplayMode = {}));\r\n/**\r\n * Enum representing the different mousewheel event bubble prevention\r\n */\r\nexport var ScrollPreventionMode;\r\n(function (ScrollPreventionMode) {\r\n    /**\r\n     * Do not prevent any page scrolling\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Prevent page scroll if mouse is over the game canvas\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\r\n    /**\r\n     * Prevent all page scrolling via mouse wheel\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\r\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\r\n/**\r\n * The Excalibur Engine\r\n *\r\n * The [[Engine]] is the main driver for a game. It is responsible for\r\n * starting/stopping the game, maintaining state, transmitting events,\r\n * loading resources, and managing the scene.\r\n *\r\n * [[include:Engine.md]]\r\n */\r\nvar Engine = /** @class */ (function (_super) {\r\n    __extends(Engine, _super);\r\n    /**\r\n     * Creates a new game using the given [[IEngineOptions]]. By default, if no options are provided,\r\n     * the game will be rendered full screen (taking up all available browser window space).\r\n     * You can customize the game rendering through [[IEngineOptions]].\r\n     *\r\n     * Example:\r\n     *\r\n     * ```js\r\n     * var game = new ex.Engine({\r\n     *   width: 0, // the width of the canvas\r\n     *   height: 0, // the height of the canvas\r\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\r\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\r\n     *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\r\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\r\n     * });\r\n     *\r\n     * // call game.start, which is a Promise\r\n     * game.start().then(function () {\r\n     *   // ready, set, go!\r\n     * });\r\n     * ```\r\n     */\r\n    function Engine(options) {\r\n        var _this = _super.call(this) || this;\r\n        _this._hasStarted = false;\r\n        /**\r\n         * Access Excalibur debugging functionality.\r\n         */\r\n        _this.debug = new Debug();\r\n        /**\r\n         * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\r\n         */\r\n        _this.postProcessors = [];\r\n        /**\r\n         * Contains all the scenes currently registered with Excalibur\r\n         */\r\n        _this.scenes = {};\r\n        _this._animations = [];\r\n        /**\r\n         * Indicates whether the engine is set to fullscreen or not\r\n         */\r\n        _this.isFullscreen = false;\r\n        /**\r\n         * Indicates the current [[DisplayMode]] of the engine.\r\n         */\r\n        _this.displayMode = DisplayMode.FullScreen;\r\n        _this._suppressHiDPIScaling = false;\r\n        /**\r\n         * Indicates whether audio should be paused when the game is no longer visible.\r\n         */\r\n        _this.pauseAudioWhenHidden = true;\r\n        /**\r\n         * Indicates whether the engine should draw with debug information\r\n         */\r\n        _this.isDebug = false;\r\n        _this.debugColor = new Color(255, 255, 255);\r\n        /**\r\n         * The action to take when a fatal exception is thrown\r\n         */\r\n        _this.onFatalException = function (e) {\r\n            Logger.getInstance().fatal(e);\r\n        };\r\n        _this._isSmoothingEnabled = true;\r\n        _this._timescale = 1.0;\r\n        _this._isLoading = false;\r\n        _this._isInitialized = false;\r\n        options = Util.extend({}, Engine._DefaultEngineOptions, options);\r\n        // Check compatibility\r\n        var detector = new Detector();\r\n        if (!options.suppressMinimumBrowserFeatureDetection && !(_this._compatible = detector.test())) {\r\n            var message = document.createElement('div');\r\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\r\n            document.body.appendChild(message);\r\n            detector.failedTests.forEach(function (test) {\r\n                var testMessage = document.createElement('div');\r\n                testMessage.innerText = 'Browser feature missing ' + test;\r\n                document.body.appendChild(testMessage);\r\n            });\r\n            if (options.canvasElementId) {\r\n                var canvas = document.getElementById(options.canvasElementId);\r\n                if (canvas) {\r\n                    canvas.parentElement.removeChild(canvas);\r\n                }\r\n            }\r\n            return _this;\r\n        }\r\n        else {\r\n            _this._compatible = true;\r\n        }\r\n        // Use native console API for color fun\r\n        if (console.log && !options.suppressConsoleBootMessage) {\r\n            console.log(\"%cPowered by Excalibur.js (v\" + EX_VERSION + \")\", 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\r\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\r\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\r\n        }\r\n        _this._logger = Logger.getInstance();\r\n        // If debug is enabled, let's log browser features to the console.\r\n        if (_this._logger.defaultLevel === LogLevel.Debug) {\r\n            detector.logBrowserFeatures();\r\n        }\r\n        _this._logger.debug('Building engine...');\r\n        _this.canvasElementId = options.canvasElementId;\r\n        if (options.canvasElementId) {\r\n            _this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\r\n            _this.canvas = document.getElementById(options.canvasElementId);\r\n        }\r\n        else {\r\n            _this._logger.debug('Using generated canvas element');\r\n            _this.canvas = document.createElement('canvas');\r\n        }\r\n        if (options.width && options.height) {\r\n            if (options.displayMode === undefined) {\r\n                _this.displayMode = DisplayMode.Fixed;\r\n            }\r\n            _this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\r\n            _this.canvas.width = options.width;\r\n            _this.canvas.height = options.height;\r\n        }\r\n        else if (!options.displayMode) {\r\n            _this._logger.debug('Engine viewport is fullscreen');\r\n            _this.displayMode = DisplayMode.FullScreen;\r\n        }\r\n        if (options.backgroundColor) {\r\n            _this.backgroundColor = options.backgroundColor.clone();\r\n        }\r\n        _this._loader = new Loader();\r\n        _this._initialize(options);\r\n        _this.rootScene = _this.currentScene = new Scene(_this);\r\n        _this.addScene('root', _this.rootScene);\r\n        _this.goToScene('root');\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Engine.prototype, \"canvasWidth\", {\r\n        /**\r\n         * The width of the game canvas in pixels (physical width component of the\r\n         * resolution of the canvas element)\r\n         */\r\n        get: function () {\r\n            return this.canvas.width;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfCanvasWidth\", {\r\n        /**\r\n         * Returns half width of the game canvas in pixels (half physical width component)\r\n         */\r\n        get: function () {\r\n            return this.canvas.width / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"canvasHeight\", {\r\n        /**\r\n         * The height of the game canvas in pixels, (physical height component of\r\n         * the resolution of the canvas element)\r\n         */\r\n        get: function () {\r\n            return this.canvas.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfCanvasHeight\", {\r\n        /**\r\n         * Returns half height of the game canvas in pixels (half physical height component)\r\n         */\r\n        get: function () {\r\n            return this.canvas.height / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"drawWidth\", {\r\n        /**\r\n         * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            if (this.currentScene && this.currentScene.camera) {\r\n                return this.canvasWidth / this.currentScene.camera.getZoom() / this.pixelRatio;\r\n            }\r\n            return this.canvasWidth / this.pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfDrawWidth\", {\r\n        /**\r\n         * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            return this.drawWidth / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"drawHeight\", {\r\n        /**\r\n         * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            if (this.currentScene && this.currentScene.camera) {\r\n                return this.canvasHeight / this.currentScene.camera.getZoom() / this.pixelRatio;\r\n            }\r\n            return this.canvasHeight / this.pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfDrawHeight\", {\r\n        /**\r\n         * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            return this.drawHeight / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"isHiDpi\", {\r\n        /**\r\n         * Returns whether excalibur detects the current screen to be HiDPI\r\n         */\r\n        get: function () {\r\n            return this.pixelRatio !== 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"stats\", {\r\n        /**\r\n         * Access [[stats]] that holds frame statistics.\r\n         */\r\n        get: function () {\r\n            return this.debug.stats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"pixelRatio\", {\r\n        /**\r\n         * Returns the calculated pixel ration for use in rendering\r\n         */\r\n        get: function () {\r\n            if (this._suppressHiDPIScaling) {\r\n                return 1;\r\n            }\r\n            if (window.devicePixelRatio < 1) {\r\n                return 1;\r\n            }\r\n            var devicePixelRatio = window.devicePixelRatio || 1;\r\n            var pixelRatio = devicePixelRatio;\r\n            return pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Engine.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Engine.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    Engine.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     */\r\n    Engine.prototype.getWorldBounds = function () {\r\n        var left = this.screenToWorldCoordinates(Vector.Zero).x;\r\n        var top = this.screenToWorldCoordinates(Vector.Zero).y;\r\n        var right = left + this.drawWidth;\r\n        var bottom = top + this.drawHeight;\r\n        return new BoundingBox(left, top, right, bottom);\r\n    };\r\n    Object.defineProperty(Engine.prototype, \"timescale\", {\r\n        /**\r\n         * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\r\n         */\r\n        get: function () {\r\n            return this._timescale;\r\n        },\r\n        /**\r\n         * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\r\n         * when using time-based movement.\r\n         */\r\n        set: function (value) {\r\n            if (value <= 0) {\r\n                Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\r\n                return;\r\n            }\r\n            this._timescale = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Plays a sprite animation on the screen at the specified `x` and `y`\r\n     * (in game coordinates, not screen pixels). These animations play\r\n     * independent of actors, and will be cleaned up internally as soon\r\n     * as they are complete. Note animations that loop will never be\r\n     * cleaned up.\r\n     *\r\n     * @param animation  Animation to play\r\n     * @param x          x game coordinate to play the animation\r\n     * @param y          y game coordinate to play the animation\r\n     */\r\n    Engine.prototype.playAnimation = function (animation, x, y) {\r\n        this._animations.push(new AnimationNode(animation, x, y));\r\n    };\r\n    /**\r\n     * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\r\n     * will be drawn and updated.\r\n     */\r\n    Engine.prototype.addTileMap = function (tileMap) {\r\n        this.currentScene.addTileMap(tileMap);\r\n    };\r\n    /**\r\n     * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\r\n     */\r\n    Engine.prototype.removeTileMap = function (tileMap) {\r\n        this.currentScene.removeTileMap(tileMap);\r\n    };\r\n    /**\r\n     * Adds a [[Timer]] to the [[currentScene]].\r\n     * @param timer  The timer to add to the [[currentScene]].\r\n     */\r\n    Engine.prototype.addTimer = function (timer) {\r\n        return this.currentScene.addTimer(timer);\r\n    };\r\n    /**\r\n     * Removes a [[Timer]] from the [[currentScene]].\r\n     * @param timer  The timer to remove to the [[currentScene]].\r\n     */\r\n    Engine.prototype.removeTimer = function (timer) {\r\n        return this.currentScene.removeTimer(timer);\r\n    };\r\n    /**\r\n     * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n     * would levels or menus.\r\n     *\r\n     * @param key  The name of the scene, must be unique\r\n     * @param scene The scene to add to the engine\r\n     */\r\n    Engine.prototype.addScene = function (key, scene) {\r\n        if (this.scenes[key]) {\r\n            this._logger.warn('Scene', key, 'already exists overwriting');\r\n        }\r\n        this.scenes[key] = scene;\r\n        scene.engine = this;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype.removeScene = function (entity) {\r\n        if (entity instanceof Scene) {\r\n            // remove scene\r\n            for (var key in this.scenes) {\r\n                if (this.scenes.hasOwnProperty(key)) {\r\n                    if (this.scenes[key] === entity) {\r\n                        delete this.scenes[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (typeof entity === 'string') {\r\n            // remove scene\r\n            delete this.scenes[entity];\r\n        }\r\n    };\r\n    Engine.prototype.add = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.currentScene.addUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._addChild(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.addTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.addTileMap(entity);\r\n        }\r\n        if (arguments.length === 2) {\r\n            this.addScene(arguments[0], arguments[1]);\r\n        }\r\n    };\r\n    Engine.prototype.remove = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.currentScene.removeUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._removeChild(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.removeTileMap(entity);\r\n        }\r\n        if (entity instanceof Scene) {\r\n            this.removeScene(entity);\r\n        }\r\n        if (typeof entity === 'string') {\r\n            this.removeScene(entity);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an actor to the [[currentScene]] of the game. This is synonymous\r\n     * to calling `engine.currentScene.add(actor)`.\r\n     *\r\n     * Actors can only be drawn if they are a member of a scene, and only\r\n     * the [[currentScene]] may be drawn or updated.\r\n     *\r\n     * @param actor  The actor to add to the [[currentScene]]\r\n     */\r\n    Engine.prototype._addChild = function (actor) {\r\n        this.currentScene.add(actor);\r\n    };\r\n    /**\r\n     * Removes an actor from the [[currentScene]] of the game. This is synonymous\r\n     * to calling `engine.currentScene.remove(actor)`.\r\n     * Actors that are removed from a scene will no longer be drawn or updated.\r\n     *\r\n     * @param actor  The actor to remove from the [[currentScene]].\r\n     */\r\n    Engine.prototype._removeChild = function (actor) {\r\n        this.currentScene.remove(actor);\r\n    };\r\n    /**\r\n     * Changes the currently updating and drawing scene to a different,\r\n     * named scene. Calls the [[Scene]] lifecycle events.\r\n     * @param key  The key of the scene to transition to.\r\n     */\r\n    Engine.prototype.goToScene = function (key) {\r\n        if (this.scenes[key]) {\r\n            var oldScene = this.currentScene;\r\n            var newScene = this.scenes[key];\r\n            this._logger.debug('Going to scene:', key);\r\n            // only deactivate when initialized\r\n            if (this.currentScene.isInitialized) {\r\n                this.currentScene._deactivate.call(this.currentScene, [oldScene, newScene]);\r\n                this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\r\n            }\r\n            // set current scene to new one\r\n            this.currentScene = newScene;\r\n            // initialize the current scene if has not been already\r\n            this.currentScene._initialize(this);\r\n            this.currentScene._activate.call(this.currentScene, [oldScene, newScene]);\r\n            this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\r\n        }\r\n        else {\r\n            this._logger.error('Scene', key, 'does not exist!');\r\n        }\r\n    };\r\n    /**\r\n     * Transforms the current x, y from screen coordinates to world coordinates\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    Engine.prototype.screenToWorldCoordinates = function (point) {\r\n        var newX = point.x;\r\n        var newY = point.y;\r\n        // transform back to world space\r\n        newX = (newX / this.canvas.clientWidth) * this.drawWidth;\r\n        newY = (newY / this.canvas.clientHeight) * this.drawHeight;\r\n        // transform based on zoom\r\n        newX = newX - this.halfDrawWidth;\r\n        newY = newY - this.halfDrawHeight;\r\n        // shift by focus\r\n        if (this.currentScene && this.currentScene.camera) {\r\n            var focus = this.currentScene.camera.getFocus();\r\n            newX += focus.x;\r\n            newY += focus.y;\r\n        }\r\n        return new Vector(Math.floor(newX), Math.floor(newY));\r\n    };\r\n    /**\r\n     * Transforms a world coordinate, to a screen coordinate\r\n     * @param point  World coordinate to convert\r\n     */\r\n    Engine.prototype.worldToScreenCoordinates = function (point) {\r\n        var screenX = point.x;\r\n        var screenY = point.y;\r\n        // shift by focus\r\n        if (this.currentScene && this.currentScene.camera) {\r\n            var focus = this.currentScene.camera.getFocus();\r\n            screenX -= focus.x;\r\n            screenY -= focus.y;\r\n        }\r\n        // transform back on zoom\r\n        screenX = screenX + this.halfDrawWidth;\r\n        screenY = screenY + this.halfDrawHeight;\r\n        // transform back to screen space\r\n        screenX = (screenX * this.canvas.clientWidth) / this.drawWidth;\r\n        screenY = (screenY * this.canvas.clientHeight) / this.drawHeight;\r\n        return new Vector(Math.floor(screenX), Math.floor(screenY));\r\n    };\r\n    /**\r\n     * Sets the internal canvas height based on the selected display mode.\r\n     */\r\n    Engine.prototype._setHeightByDisplayMode = function (parent) {\r\n        if (this.displayMode === DisplayMode.Container) {\r\n            this.canvas.width = parent.clientWidth;\r\n            this.canvas.height = parent.clientHeight;\r\n        }\r\n        if (this.displayMode === DisplayMode.FullScreen) {\r\n            document.body.style.margin = '0px';\r\n            document.body.style.overflow = 'hidden';\r\n            this.canvas.width = parent.innerWidth;\r\n            this.canvas.height = parent.innerHeight;\r\n        }\r\n    };\r\n    /**\r\n     * Initializes the internal canvas, rendering context, displaymode, and native event listeners\r\n     */\r\n    Engine.prototype._initialize = function (options) {\r\n        var _this = this;\r\n        if (options.displayMode) {\r\n            this.displayMode = options.displayMode;\r\n        }\r\n        if (this.displayMode === DisplayMode.FullScreen || this.displayMode === DisplayMode.Container) {\r\n            var parent = (this.displayMode === DisplayMode.Container ? (this.canvas.parentElement || document.body) : window);\r\n            this._setHeightByDisplayMode(parent);\r\n            window.addEventListener('resize', function () {\r\n                _this._logger.debug('View port resized');\r\n                _this._setHeightByDisplayMode(parent);\r\n                _this._logger.info('parent.clientHeight ' + parent.clientHeight);\r\n                _this.setAntialiasing(_this._isSmoothingEnabled);\r\n            });\r\n        }\r\n        else if (this.displayMode === DisplayMode.Position) {\r\n            this._intializeDisplayModePosition(options);\r\n        }\r\n        // initialize inputs\r\n        this.input = {\r\n            keyboard: new Input.Keyboard(),\r\n            pointers: new Input.Pointers(this),\r\n            gamepads: new Input.Gamepads()\r\n        };\r\n        this.input.keyboard.init();\r\n        this.input.pointers.init(options && options.pointerScope === Input.PointerScope.Document ? document : this.canvas);\r\n        this.input.gamepads.init();\r\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\r\n        // Issue #385 make use of the visibility api\r\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n        var hidden, visibilityChange;\r\n        if (typeof document.hidden !== 'undefined') {\r\n            // Opera 12.10 and Firefox 18 and later support\r\n            hidden = 'hidden';\r\n            visibilityChange = 'visibilitychange';\r\n        }\r\n        else if ('msHidden' in document) {\r\n            hidden = 'msHidden';\r\n            visibilityChange = 'msvisibilitychange';\r\n        }\r\n        else if ('webkitHidden' in document) {\r\n            hidden = 'webkitHidden';\r\n            visibilityChange = 'webkitvisibilitychange';\r\n        }\r\n        document.addEventListener(visibilityChange, function () {\r\n            if (document[hidden]) {\r\n                _this.eventDispatcher.emit('hidden', new HiddenEvent(_this));\r\n                _this._logger.debug('Window hidden');\r\n            }\r\n            else {\r\n                _this.eventDispatcher.emit('visible', new VisibleEvent(_this));\r\n                _this._logger.debug('Window visible');\r\n            }\r\n        });\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this._suppressHiDPIScaling = !!options.suppressHiDPIScaling;\r\n        if (!options.suppressHiDPIScaling) {\r\n            this._initializeHiDpi();\r\n        }\r\n        if (!this.canvasElementId) {\r\n            document.body.appendChild(this.canvas);\r\n        }\r\n    };\r\n    Engine.prototype.onInitialize = function (_engine) {\r\n        // Override me\r\n    };\r\n    Engine.prototype._intializeDisplayModePosition = function (options) {\r\n        if (!options.position) {\r\n            throw new Error('DisplayMode of Position was selected but no position option was given');\r\n        }\r\n        else {\r\n            this.canvas.style.display = 'block';\r\n            this.canvas.style.position = 'absolute';\r\n            if (typeof options.position === 'string') {\r\n                var specifiedPosition = options.position.split(' ');\r\n                switch (specifiedPosition[0]) {\r\n                    case 'top':\r\n                        this.canvas.style.top = '0px';\r\n                        break;\r\n                    case 'bottom':\r\n                        this.canvas.style.bottom = '0px';\r\n                        break;\r\n                    case 'middle':\r\n                        this.canvas.style.top = '50%';\r\n                        var offsetY = -this.halfDrawHeight;\r\n                        this.canvas.style.marginTop = offsetY.toString();\r\n                        break;\r\n                    default:\r\n                        throw new Error('Invalid Position Given');\r\n                }\r\n                if (specifiedPosition[1]) {\r\n                    switch (specifiedPosition[1]) {\r\n                        case 'left':\r\n                            this.canvas.style.left = '0px';\r\n                            break;\r\n                        case 'right':\r\n                            this.canvas.style.right = '0px';\r\n                            break;\r\n                        case 'center':\r\n                            this.canvas.style.left = '50%';\r\n                            var offsetX = -this.halfDrawWidth;\r\n                            this.canvas.style.marginLeft = offsetX.toString();\r\n                            break;\r\n                        default:\r\n                            throw new Error('Invalid Position Given');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (options.position.top) {\r\n                    typeof options.position.top === 'number'\r\n                        ? (this.canvas.style.top = options.position.top.toString() + 'px')\r\n                        : (this.canvas.style.top = options.position.top);\r\n                }\r\n                if (options.position.right) {\r\n                    typeof options.position.right === 'number'\r\n                        ? (this.canvas.style.right = options.position.right.toString() + 'px')\r\n                        : (this.canvas.style.right = options.position.right);\r\n                }\r\n                if (options.position.bottom) {\r\n                    typeof options.position.bottom === 'number'\r\n                        ? (this.canvas.style.bottom = options.position.bottom.toString() + 'px')\r\n                        : (this.canvas.style.bottom = options.position.bottom);\r\n                }\r\n                if (options.position.left) {\r\n                    typeof options.position.left === 'number'\r\n                        ? (this.canvas.style.left = options.position.left.toString() + 'px')\r\n                        : (this.canvas.style.left = options.position.left);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Engine.prototype._initializeHiDpi = function () {\r\n        // Scale the canvas if needed\r\n        if (this.isHiDpi) {\r\n            var oldWidth = this.canvas.width;\r\n            var oldHeight = this.canvas.height;\r\n            this.canvas.width = oldWidth * this.pixelRatio;\r\n            this.canvas.height = oldHeight * this.pixelRatio;\r\n            this.canvas.style.width = oldWidth + 'px';\r\n            this.canvas.style.height = oldHeight + 'px';\r\n            this._logger.warn(\"Hi DPI screen detected, resetting canvas resolution from \\n                           \" + oldWidth + \"x\" + oldHeight + \" to \" + this.canvas.width + \"x\" + this.canvas.height + \" \\n                           css size will remain \" + oldWidth + \"x\" + oldHeight);\r\n            this.ctx.scale(this.pixelRatio, this.pixelRatio);\r\n            this._logger.warn(\"Canvas drawing context was scaled by \" + this.pixelRatio);\r\n        }\r\n    };\r\n    /**\r\n     * If supported by the browser, this will set the antialiasing flag on the\r\n     * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\r\n     * image resources.\r\n     * @param isSmooth  Set smoothing to true or false\r\n     */\r\n    Engine.prototype.setAntialiasing = function (isSmooth) {\r\n        this._isSmoothingEnabled = isSmooth;\r\n        var ctx = this.ctx;\r\n        ctx.imageSmoothingEnabled = isSmooth;\r\n        for (var _i = 0, _a = ['webkitImageSmoothingEnabled', 'mozImageSmoothingEnabled', 'msImageSmoothingEnabled']; _i < _a.length; _i++) {\r\n            var smoothing = _a[_i];\r\n            if (smoothing in ctx) {\r\n                ctx[smoothing] = isSmooth;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Return the current smoothing status of the canvas\r\n     */\r\n    Engine.prototype.getAntialiasing = function () {\r\n        return (this.ctx.imageSmoothingEnabled ||\r\n            this.ctx.webkitImageSmoothingEnabled ||\r\n            this.ctx.mozImageSmoothingEnabled ||\r\n            this.ctx.msImageSmoothingEnabled);\r\n    };\r\n    Object.defineProperty(Engine.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets whether the actor is Initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Engine.prototype._overrideInitialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * Updates the entire state of the game\r\n     * @param delta  Number of milliseconds elapsed since the last update.\r\n     */\r\n    Engine.prototype._update = function (delta) {\r\n        if (this._isLoading) {\r\n            // suspend updates untill loading is finished\r\n            this._loader.update(this, delta);\r\n            // Update input listeners\r\n            this.input.keyboard.update();\r\n            this.input.pointers.update();\r\n            this.input.gamepads.update();\r\n            return;\r\n        }\r\n        this._overrideInitialize(this);\r\n        // Publish preupdate events\r\n        this._preupdate(delta);\r\n        // process engine level events\r\n        this.currentScene.update(this, delta);\r\n        // update animations\r\n        this._animations = this._animations.filter(function (a) {\r\n            return !a.animation.isDone();\r\n        });\r\n        // Update input listeners\r\n        this.input.keyboard.update();\r\n        this.input.pointers.update();\r\n        this.input.gamepads.update();\r\n        // Publish update event\r\n        this._postupdate(delta);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._preupdate = function (delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(this, delta, this));\r\n        this.onPreUpdate(this, delta);\r\n    };\r\n    Engine.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._postupdate = function (delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(this, delta, this));\r\n        this.onPostUpdate(this, delta);\r\n    };\r\n    Engine.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Draws the entire game\r\n     * @param delta  Number of milliseconds elapsed since the last draw.\r\n     */\r\n    Engine.prototype._draw = function (delta) {\r\n        var ctx = this.ctx;\r\n        this._predraw(ctx, delta);\r\n        if (this._isLoading) {\r\n            this._loader.draw(ctx, delta);\r\n            // Drawing nothing else while loading\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n        ctx.fillStyle = this.backgroundColor.toString();\r\n        ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n        this.currentScene.draw(this.ctx, delta);\r\n        // todo needs to be a better way of doing this\r\n        var a = 0, len = this._animations.length;\r\n        for (a; a < len; a++) {\r\n            this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\r\n        }\r\n        // Draw debug information\r\n        if (this.isDebug) {\r\n            this.ctx.font = 'Consolas';\r\n            this.ctx.fillStyle = this.debugColor.toString();\r\n            var keys = this.input.keyboard.getKeys();\r\n            for (var j = 0; j < keys.length; j++) {\r\n                this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\r\n            }\r\n            this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\r\n        }\r\n        // Post processing\r\n        for (var i = 0; i < this.postProcessors.length; i++) {\r\n            this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._predraw = function (_ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\r\n        this.onPreDraw(_ctx, delta);\r\n    };\r\n    Engine.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._postdraw = function (_ctx, delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\r\n        this.onPostDraw(_ctx, delta);\r\n    };\r\n    Engine.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Starts the internal game loop for Excalibur after loading\r\n     * any provided assets.\r\n     * @param loader  Optional [[ILoader]] to use to load resources. The default loader is [[Loader]], override to provide your own\r\n     * custom loader.\r\n     */\r\n    Engine.prototype.start = function (loader) {\r\n        var _this = this;\r\n        if (!this._compatible) {\r\n            var promise = new Promise();\r\n            return promise.reject('Excalibur is incompatible with your browser');\r\n        }\r\n        var loadingComplete;\r\n        if (loader) {\r\n            this._loader = loader;\r\n            this._loader.wireEngine(this);\r\n            loadingComplete = this.load(this._loader);\r\n        }\r\n        else {\r\n            loadingComplete = Promise.resolve();\r\n        }\r\n        loadingComplete.then(function () {\r\n            _this.emit('start', new GameStartEvent(_this));\r\n        });\r\n        if (!this._hasStarted) {\r\n            this._hasStarted = true;\r\n            this._logger.debug('Starting game...');\r\n            Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\r\n            this._logger.debug('Game started');\r\n        }\r\n        else {\r\n            // Game already started;\r\n        }\r\n        return loadingComplete;\r\n    };\r\n    Engine.createMainLoop = function (game, raf, nowFn) {\r\n        var lastTime = nowFn();\r\n        return function mainloop() {\r\n            if (!game._hasStarted) {\r\n                return;\r\n            }\r\n            try {\r\n                game._requestId = raf(mainloop);\r\n                game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\r\n                // Get the time to calculate time-elapsed\r\n                var now = nowFn();\r\n                var elapsed = Math.floor(now - lastTime) || 1;\r\n                // Resolves issue #138 if the game has been paused, or blurred for\r\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\r\n                // and provides more expected behavior when the engine comes back\r\n                // into focus\r\n                if (elapsed > 200) {\r\n                    elapsed = 1;\r\n                }\r\n                var delta = elapsed * game.timescale;\r\n                // reset frame stats (reuse existing instances)\r\n                var frameId = game.stats.prevFrame.id + 1;\r\n                game.stats.prevFrame.reset(game.stats.currFrame);\r\n                game.stats.currFrame.reset();\r\n                game.stats.currFrame.id = frameId;\r\n                game.stats.currFrame.delta = delta;\r\n                game.stats.currFrame.fps = 1.0 / (delta / 1000);\r\n                var beforeUpdate = nowFn();\r\n                game._update(delta);\r\n                var afterUpdate = nowFn();\r\n                game._draw(delta);\r\n                var afterDraw = nowFn();\r\n                game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n                game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n                lastTime = now;\r\n                game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\r\n            }\r\n            catch (e) {\r\n                window.cancelAnimationFrame(game._requestId);\r\n                game.stop();\r\n                game.onFatalException(e);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Stops Excalibur's main loop, useful for pausing the game.\r\n     */\r\n    Engine.prototype.stop = function () {\r\n        if (this._hasStarted) {\r\n            this.emit('stop', new GameStopEvent(this));\r\n            this._hasStarted = false;\r\n            this._logger.debug('Game stopped');\r\n        }\r\n    };\r\n    /**\r\n     * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\r\n     */\r\n    Engine.prototype.isPaused = function () {\r\n        return !this._hasStarted;\r\n    };\r\n    /**\r\n     * Takes a screen shot of the current viewport and returns it as an\r\n     * HTML Image Element.\r\n     */\r\n    Engine.prototype.screenshot = function () {\r\n        var result = new Image();\r\n        var raw = this.canvas.toDataURL('image/png');\r\n        result.src = raw;\r\n        return result;\r\n    };\r\n    /**\r\n     * Another option available to you to load resources into the game.\r\n     * Immediately after calling this the game will pause and the loading screen\r\n     * will appear.\r\n     * @param loader  Some [[ILoadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\r\n     */\r\n    Engine.prototype.load = function (loader) {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        this._isLoading = true;\r\n        loader.load().then(function () {\r\n            setTimeout(function () {\r\n                _this._isLoading = false;\r\n                complete.resolve();\r\n            }, 500);\r\n        });\r\n        return complete;\r\n    };\r\n    /**\r\n     * Default [[IEngineOptions]]\r\n     */\r\n    Engine._DefaultEngineOptions = {\r\n        width: 0,\r\n        height: 0,\r\n        canvasElementId: '',\r\n        pointerScope: Input.PointerScope.Document,\r\n        suppressConsoleBootMessage: null,\r\n        suppressMinimumBrowserFeatureDetection: null,\r\n        suppressHiDPIScaling: null,\r\n        scrollPreventionMode: ScrollPreventionMode.Canvas,\r\n        backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\r\n    };\r\n    return Engine;\r\n}(Class));\r\nexport { Engine };\r\n/**\r\n * @internal\r\n */\r\nvar AnimationNode = /** @class */ (function () {\r\n    function AnimationNode(animation, x, y) {\r\n        this.animation = animation;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    return AnimationNode;\r\n}());\r\n//# sourceMappingURL=Engine.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Color } from './Drawing/Color';\r\nimport { Vector } from './Algebra';\r\nimport * as Util from './Util/Util';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\nimport * as Traits from './Traits/Index';\r\nimport { Configurable } from './Configurable';\r\nimport { Random } from './Math/Random';\r\n/**\r\n * An enum that represents the types of emitter nozzles\r\n */\r\nexport var EmitterType;\r\n(function (EmitterType) {\r\n    /**\r\n     * Constant for the circular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Circle\"] = 0] = \"Circle\";\r\n    /**\r\n     * Constant for the rectangular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Rectangle\"] = 1] = \"Rectangle\";\r\n})(EmitterType || (EmitterType = {}));\r\n/**\r\n * @hidden\r\n */\r\nvar ParticleImpl = /** @class */ (function () {\r\n    function ParticleImpl(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        this.position = new Vector(0, 0);\r\n        this.velocity = new Vector(0, 0);\r\n        this.acceleration = new Vector(0, 0);\r\n        this.particleRotationalVelocity = 0;\r\n        this.currentRotation = 0;\r\n        this.focus = null;\r\n        this.focusAccel = 0;\r\n        this.opacity = 1;\r\n        this.beginColor = Color.White.clone();\r\n        this.endColor = Color.White.clone();\r\n        // Life is counted in ms\r\n        this.life = 300;\r\n        this.fadeFlag = false;\r\n        // Color transitions\r\n        this._rRate = 1;\r\n        this._gRate = 1;\r\n        this._bRate = 1;\r\n        this._aRate = 0;\r\n        this._currentColor = Color.White.clone();\r\n        this.emitter = null;\r\n        this.particleSize = 5;\r\n        this.particleSprite = null;\r\n        this.sizeRate = 0;\r\n        this.elapsedMultiplier = 0;\r\n        var emitter = emitterOrConfig;\r\n        if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\r\n            var config = emitterOrConfig;\r\n            emitter = config.emitter;\r\n            life = config.life;\r\n            opacity = config.opacity;\r\n            endColor = config.endColor;\r\n            beginColor = config.beginColor;\r\n            position = config.position;\r\n            velocity = config.velocity;\r\n            acceleration = config.acceleration;\r\n            startSize = config.startSize;\r\n            endSize = config.endSize;\r\n        }\r\n        this.emitter = emitter;\r\n        this.life = life || this.life;\r\n        this.opacity = opacity || this.opacity;\r\n        this.endColor = endColor || this.endColor.clone();\r\n        this.beginColor = beginColor || this.beginColor.clone();\r\n        this._currentColor = this.beginColor.clone();\r\n        this.position = position || this.position;\r\n        this.velocity = velocity || this.velocity;\r\n        this.acceleration = acceleration || this.acceleration;\r\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\r\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\r\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\r\n        this._aRate = this.opacity / this.life;\r\n        this.startSize = startSize || 0;\r\n        this.endSize = endSize || 0;\r\n        if (this.endSize > 0 && this.startSize > 0) {\r\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\r\n            this.particleSize = this.startSize;\r\n        }\r\n    }\r\n    ParticleImpl.prototype.kill = function () {\r\n        this.emitter.removeParticle(this);\r\n    };\r\n    ParticleImpl.prototype.update = function (delta) {\r\n        this.life = this.life - delta;\r\n        this.elapsedMultiplier = this.elapsedMultiplier + delta;\r\n        if (this.life < 0) {\r\n            this.kill();\r\n        }\r\n        if (this.fadeFlag) {\r\n            this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\r\n        }\r\n        if (this.startSize > 0 && this.endSize > 0) {\r\n            this.particleSize = Util.clamp(this.sizeRate * delta + this.particleSize, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\r\n        }\r\n        this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\r\n        this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\r\n        this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\r\n        this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n        if (this.focus) {\r\n            var accel = this.focus\r\n                .sub(this.position)\r\n                .normalize()\r\n                .scale(this.focusAccel)\r\n                .scale(delta / 1000);\r\n            this.velocity = this.velocity.add(accel);\r\n        }\r\n        else {\r\n            this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\r\n        }\r\n        this.position = this.position.add(this.velocity.scale(delta / 1000));\r\n        if (this.particleRotationalVelocity) {\r\n            this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\r\n        }\r\n    };\r\n    ParticleImpl.prototype.draw = function (ctx) {\r\n        if (this.particleSprite) {\r\n            this.particleSprite.rotation = this.currentRotation;\r\n            this.particleSprite.scale.setTo(this.particleSize, this.particleSize);\r\n            this.particleSprite.draw(ctx, this.position.x, this.position.y);\r\n            return;\r\n        }\r\n        this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n        ctx.fillStyle = this._currentColor.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this.position.x, this.position.y, this.particleSize, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    };\r\n    return ParticleImpl;\r\n}());\r\nexport { ParticleImpl };\r\n/**\r\n * Particle is used in a [[ParticleEmitter]]\r\n */\r\nvar Particle = /** @class */ (function (_super) {\r\n    __extends(Particle, _super);\r\n    function Particle(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        return _super.call(this, emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) || this;\r\n    }\r\n    return Particle;\r\n}(Configurable(ParticleImpl)));\r\nexport { Particle };\r\n/**\r\n * @hidden\r\n */\r\nvar ParticleEmitterImpl = /** @class */ (function (_super) {\r\n    __extends(ParticleEmitterImpl, _super);\r\n    /**\r\n     * @param x       The x position of the emitter\r\n     * @param y       The y position of the emitter\r\n     * @param width   The width of the emitter\r\n     * @param height  The height of the emitter\r\n     */\r\n    function ParticleEmitterImpl(xOrConfig, y, width, height) {\r\n        var _this = _super.call(this, typeof xOrConfig === 'number' ? { x: xOrConfig, y: y, width: width, height: height } : xOrConfig) || this;\r\n        _this.numParticles = 0;\r\n        /**\r\n         * Gets or sets the isEmitting flag\r\n         */\r\n        _this.isEmitting = true;\r\n        /**\r\n         * Gets or sets the backing particle collection\r\n         */\r\n        _this.particles = null;\r\n        /**\r\n         * Gets or sets the backing deadParticle collection\r\n         */\r\n        _this.deadParticles = null;\r\n        /**\r\n         * Gets or sets the minimum particle velocity\r\n         */\r\n        _this.minVel = 0;\r\n        /**\r\n         * Gets or sets the maximum particle velocity\r\n         */\r\n        _this.maxVel = 0;\r\n        /**\r\n         * Gets or sets the acceleration vector for all particles\r\n         */\r\n        _this.acceleration = new Vector(0, 0);\r\n        /**\r\n         * Gets or sets the minimum angle in radians\r\n         */\r\n        _this.minAngle = 0;\r\n        /**\r\n         * Gets or sets the maximum angle in radians\r\n         */\r\n        _this.maxAngle = 0;\r\n        /**\r\n         * Gets or sets the emission rate for particles (particles/sec)\r\n         */\r\n        _this.emitRate = 1; //particles/sec\r\n        /**\r\n         * Gets or sets the life of each particle in milliseconds\r\n         */\r\n        _this.particleLife = 2000;\r\n        /**\r\n         * Gets or sets the opacity of each particle from 0 to 1.0\r\n         */\r\n        _this.opacity = 1;\r\n        /**\r\n         * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\r\n         */\r\n        _this.fadeFlag = false;\r\n        /**\r\n         * Gets or sets the optional focus where all particles should accelerate towards\r\n         */\r\n        _this.focus = null;\r\n        /**\r\n         * Gets or sets the acceleration for focusing particles if a focus has been specified\r\n         */\r\n        _this.focusAccel = 1;\r\n        /*\r\n          * Gets or sets the optional starting size for the particles\r\n          */\r\n        _this.startSize = null;\r\n        /*\r\n          * Gets or sets the optional ending size for the particles\r\n          */\r\n        _this.endSize = null;\r\n        /**\r\n         * Gets or sets the minimum size of all particles\r\n         */\r\n        _this.minSize = 5;\r\n        /**\r\n         * Gets or sets the maximum size of all particles\r\n         */\r\n        _this.maxSize = 5;\r\n        /**\r\n         * Gets or sets the beginning color of all particles\r\n         */\r\n        _this.beginColor = Color.White.clone();\r\n        /**\r\n         * Gets or sets the ending color of all particles\r\n         */\r\n        _this.endColor = Color.White.clone();\r\n        /**\r\n         * Gets or sets the sprite that a particle should use\r\n         * @warning Performance intensive\r\n         */\r\n        _this.particleSprite = null;\r\n        /**\r\n         * Gets or sets the emitter type for the particle emitter\r\n         */\r\n        _this.emitterType = EmitterType.Rectangle;\r\n        /**\r\n         * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\r\n         */\r\n        _this.radius = 0;\r\n        /**\r\n         * Gets or sets the particle rotational speed velocity\r\n         */\r\n        _this.particleRotationalVelocity = 0;\r\n        /**\r\n         * Indicates whether particles should start with a random rotation\r\n         */\r\n        _this.randomRotation = false;\r\n        _this._particlesToEmit = 0;\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.particles = new Util.Collection();\r\n        _this.deadParticles = new Util.Collection();\r\n        _this.random = new Random();\r\n        // Remove offscreen culling from particle emitters\r\n        for (var i = 0; i < _this.traits.length; i++) {\r\n            if (_this.traits[i] instanceof Traits.OffscreenCulling) {\r\n                _this.traits.splice(i, 1);\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    ParticleEmitterImpl.prototype.removeParticle = function (particle) {\r\n        this.deadParticles.push(particle);\r\n    };\r\n    /**\r\n     * Causes the emitter to emit particles\r\n     * @param particleCount  Number of particles to emit right now\r\n     */\r\n    ParticleEmitterImpl.prototype.emitParticles = function (particleCount) {\r\n        for (var i = 0; i < particleCount; i++) {\r\n            this.particles.push(this._createParticle());\r\n        }\r\n    };\r\n    ParticleEmitterImpl.prototype.clearParticles = function () {\r\n        this.particles.clear();\r\n    };\r\n    // Creates a new particle given the constraints of the emitter\r\n    ParticleEmitterImpl.prototype._createParticle = function () {\r\n        // todo implement emitter constraints;\r\n        var ranX = 0;\r\n        var ranY = 0;\r\n        var angle = Util.randomInRange(this.minAngle, this.maxAngle, this.random);\r\n        var vel = Util.randomInRange(this.minVel, this.maxVel, this.random);\r\n        var size = this.startSize || Util.randomInRange(this.minSize, this.maxSize, this.random);\r\n        var dx = vel * Math.cos(angle);\r\n        var dy = vel * Math.sin(angle);\r\n        if (this.emitterType === EmitterType.Rectangle) {\r\n            ranX = Util.randomInRange(this.pos.x, this.pos.x + this.getWidth(), this.random);\r\n            ranY = Util.randomInRange(this.pos.y, this.pos.y + this.getHeight(), this.random);\r\n        }\r\n        else if (this.emitterType === EmitterType.Circle) {\r\n            var radius = Util.randomInRange(0, this.radius, this.random);\r\n            ranX = radius * Math.cos(angle) + this.pos.x;\r\n            ranY = radius * Math.sin(angle) + this.pos.y;\r\n        }\r\n        var p = new Particle(this, this.particleLife, this.opacity, this.beginColor, this.endColor, new Vector(ranX, ranY), new Vector(dx, dy), this.acceleration, this.startSize, this.endSize);\r\n        p.fadeFlag = this.fadeFlag;\r\n        p.particleSize = size;\r\n        if (this.particleSprite) {\r\n            p.particleSprite = this.particleSprite;\r\n        }\r\n        p.particleRotationalVelocity = this.particleRotationalVelocity;\r\n        if (this.randomRotation) {\r\n            p.currentRotation = Util.randomInRange(0, Math.PI * 2, this.random);\r\n        }\r\n        if (this.focus) {\r\n            p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\r\n            p.focusAccel = this.focusAccel;\r\n        }\r\n        return p;\r\n    };\r\n    ParticleEmitterImpl.prototype.update = function (engine, delta) {\r\n        var _this = this;\r\n        _super.prototype.update.call(this, engine, delta);\r\n        if (this.isEmitting) {\r\n            this._particlesToEmit += this.emitRate * (delta / 1000);\r\n            //var numParticles = Math.ceil(this.emitRate * delta / 1000);\r\n            if (this._particlesToEmit > 1.0) {\r\n                this.emitParticles(Math.floor(this._particlesToEmit));\r\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\r\n            }\r\n        }\r\n        this.particles.forEach(function (p) { return p.update(delta); });\r\n        this.deadParticles.forEach(function (p) { return _this.particles.removeElement(p); });\r\n        this.deadParticles.clear();\r\n    };\r\n    ParticleEmitterImpl.prototype.draw = function (ctx) {\r\n        // todo is there a more efficient to draw\r\n        // possibly use a webgl offscreen canvas and shaders to do particles?\r\n        this.particles.forEach(function (p) { return p.draw(ctx); });\r\n    };\r\n    ParticleEmitterImpl.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n        ctx.fillStyle = Color.Black.toString();\r\n        ctx.fillText('Particles: ' + this.particles.count(), this.pos.x, this.pos.y + 20);\r\n        if (this.focus) {\r\n            ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\r\n            DrawUtil.line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, _super.prototype.getCenter.call(this).x, _super.prototype.getCenter.call(this).y);\r\n            ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\r\n        }\r\n    };\r\n    return ParticleEmitterImpl;\r\n}(Actor));\r\nexport { ParticleEmitterImpl };\r\n/**\r\n * Using a particle emitter is a great way to create interesting effects\r\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\r\n * extend [[Actor]] allowing you to use all of the features that come with.\r\n *\r\n * [[include:Particles.md]]\r\n */\r\nvar ParticleEmitter = /** @class */ (function (_super) {\r\n    __extends(ParticleEmitter, _super);\r\n    function ParticleEmitter(xOrConfig, y, width, height) {\r\n        return _super.call(this, xOrConfig, y, width, height) || this;\r\n    }\r\n    return ParticleEmitter;\r\n}(Configurable(ParticleEmitterImpl)));\r\nexport { ParticleEmitter };\r\n//# sourceMappingURL=Particles.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { GameEvent } from '../Events';\r\nvar MediaEvent = /** @class */ (function (_super) {\r\n    __extends(MediaEvent, _super);\r\n    function MediaEvent(target, _name) {\r\n        if (_name === void 0) { _name = 'MediaEvent'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this._name = _name;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MediaEvent.prototype, \"bubbles\", {\r\n        /**\r\n         * Media event cannot bubble\r\n         */\r\n        get: function () {\r\n            return false;\r\n        },\r\n        /**\r\n         * Media event cannot bubble\r\n         */\r\n        set: function (_value) {\r\n            // stubbed\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MediaEvent.prototype, \"_path\", {\r\n        /**\r\n         * Media event cannot bubble, so they have no path\r\n         */\r\n        get: function () {\r\n            return null;\r\n        },\r\n        /**\r\n         * Media event cannot bubble, so they have no path\r\n         */\r\n        set: function (_val) {\r\n            // stubbed\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    MediaEvent.prototype.stopPropagation = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    MediaEvent.prototype.action = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    MediaEvent.prototype.propagate = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    MediaEvent.prototype.layPath = function (_actor) {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    return MediaEvent;\r\n}(GameEvent));\r\nexport { MediaEvent };\r\nvar NativeSoundEvent = /** @class */ (function (_super) {\r\n    __extends(NativeSoundEvent, _super);\r\n    function NativeSoundEvent(target, track) {\r\n        var _this = _super.call(this, target, 'NativeSoundEvent') || this;\r\n        _this.track = track;\r\n        return _this;\r\n    }\r\n    return NativeSoundEvent;\r\n}(MediaEvent));\r\nexport { NativeSoundEvent };\r\n//# sourceMappingURL=MediaEvents.js.map","import { Physics } from './../Physics';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { Pair } from './Pair';\r\nimport { CollisionType } from './../Actor';\r\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\r\nvar NaiveCollisionBroadphase = /** @class */ (function () {\r\n    function NaiveCollisionBroadphase() {\r\n        this._lastFramePairs = [];\r\n        this._lastFramePairsHash = {};\r\n    }\r\n    NaiveCollisionBroadphase.prototype.track = function () {\r\n        // pass\r\n    };\r\n    NaiveCollisionBroadphase.prototype.untrack = function () {\r\n        // pass\r\n    };\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n     */\r\n    NaiveCollisionBroadphase.prototype.broadphase = function (targets) {\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        var potentialColliders = targets.filter(function (other) {\r\n            return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        var actor1;\r\n        var actor2;\r\n        var collisionPairs = [];\r\n        for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n            actor1 = potentialColliders[j];\r\n            for (var i = j + 1; i < l; i++) {\r\n                actor2 = potentialColliders[i];\r\n                var minimumTranslationVector;\r\n                if ((minimumTranslationVector = actor1.collides(actor2))) {\r\n                    var pair = new Pair(actor1.body, actor2.body);\r\n                    pair.collision = new CollisionContact(actor1.collisionArea, actor2.collisionArea, minimumTranslationVector, actor1.pos, minimumTranslationVector);\r\n                    if (!collisionPairs.some(function (cp) {\r\n                        return cp.id === pair.id;\r\n                    })) {\r\n                        collisionPairs.push(pair);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return collisionPairs;\r\n    };\r\n    /**\r\n     * Identify actual collisions from those pairs, and calculate collision impulse\r\n     */\r\n    NaiveCollisionBroadphase.prototype.narrowphase = function (pairs) {\r\n        return pairs;\r\n    };\r\n    NaiveCollisionBroadphase.prototype.runCollisionStartEnd = function (pairs) {\r\n        var currentFrameHash = {};\r\n        for (var _i = 0, pairs_1 = pairs; _i < pairs_1.length; _i++) {\r\n            var p = pairs_1[_i];\r\n            // load currentFrameHash\r\n            currentFrameHash[p.id] = p;\r\n            // find all new collisions\r\n            if (!this._lastFramePairsHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\r\n                actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\r\n            }\r\n        }\r\n        // find all old collisions\r\n        for (var _a = 0, _b = this._lastFramePairs; _a < _b.length; _a++) {\r\n            var p = _b[_a];\r\n            if (!currentFrameHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\r\n                actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\r\n            }\r\n        }\r\n        // reset the last frame cache\r\n        this._lastFramePairs = pairs;\r\n        this._lastFramePairsHash = currentFrameHash;\r\n    };\r\n    /**\r\n     * Resolve the position and velocity of the physics bodies\r\n     */\r\n    NaiveCollisionBroadphase.prototype.resolve = function (pairs) {\r\n        for (var _i = 0, pairs_2 = pairs; _i < pairs_2.length; _i++) {\r\n            var pair = pairs_2[_i];\r\n            pair.resolve(Physics.collisionResolutionStrategy);\r\n        }\r\n        return pairs.filter(function (p) { return p.canCollide; });\r\n    };\r\n    NaiveCollisionBroadphase.prototype.update = function () {\r\n        return 0;\r\n    };\r\n    NaiveCollisionBroadphase.prototype.debugDraw = function () {\r\n        return;\r\n    };\r\n    return NaiveCollisionBroadphase;\r\n}());\r\nexport { NaiveCollisionBroadphase };\r\n//# sourceMappingURL=NaiveCollisionBroadphase.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Effects from './SpriteEffects';\r\nimport { Vector } from '../Algebra';\r\nimport { Engine } from '../Engine';\r\nimport * as Util from '../Util/Util';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar AnimationImpl = /** @class */ (function () {\r\n    /**\r\n     * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\r\n     *\r\n     * @param engine  Reference to the current game engine\r\n     * @param images  An array of sprites to create the frames for the animation\r\n     * @param speed   The number in milliseconds to display each frame in the animation\r\n     * @param loop    Indicates whether the animation should loop after it is completed\r\n     */\r\n    function AnimationImpl(engineOrConfig, sprites, speed, loop) {\r\n        /**\r\n         * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\r\n         * generate an [[Animation]].\r\n         */\r\n        this.sprites = [];\r\n        /**\r\n         * Current frame index being shown\r\n         */\r\n        this.currentFrame = 0;\r\n        this._oldTime = Date.now();\r\n        this.anchor = new Vector(0.0, 0.0);\r\n        this.rotation = 0.0;\r\n        this.scale = new Vector(1, 1);\r\n        /**\r\n         * Indicates whether the animation should loop after it is completed\r\n         */\r\n        this.loop = true;\r\n        /**\r\n         * Indicates the frame index the animation should freeze on for a non-looping\r\n         * animation. By default it is the last frame.\r\n         */\r\n        this.freezeFrame = -1;\r\n        /**\r\n         * Flip each frame vertically. Sets [[Sprite.flipVertical]].\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.drawWidth = 0;\r\n        this.drawHeight = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        var engine = engineOrConfig;\r\n        if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\r\n            var config = engineOrConfig;\r\n            engine = config.engine;\r\n            sprites = config.sprites;\r\n            speed = config.speed;\r\n            loop = config.loop;\r\n        }\r\n        this.sprites = sprites;\r\n        this.speed = speed;\r\n        this._engine = engine;\r\n        if (loop != null) {\r\n            this.loop = loop;\r\n        }\r\n        if (sprites && sprites[0]) {\r\n            this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\r\n            this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\r\n            this.width = sprites[0] ? sprites[0].width : 0;\r\n            this.height = sprites[0] ? sprites[0].height : 0;\r\n            this.freezeFrame = sprites.length - 1;\r\n        }\r\n    }\r\n    /**\r\n     * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    AnimationImpl.prototype.opacity = function (value) {\r\n        this.addEffect(new Effects.Opacity(value));\r\n    };\r\n    /**\r\n     * Applies the grayscale effect to a sprite, removing color information.\r\n     */\r\n    AnimationImpl.prototype.grayscale = function () {\r\n        this.addEffect(new Effects.Grayscale());\r\n    };\r\n    /**\r\n     * Applies the invert effect to a sprite, inverting the pixel colors.\r\n     */\r\n    AnimationImpl.prototype.invert = function () {\r\n        this.addEffect(new Effects.Invert());\r\n    };\r\n    /**\r\n     * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    AnimationImpl.prototype.fill = function (color) {\r\n        this.addEffect(new Effects.Fill(color));\r\n    };\r\n    /**\r\n     * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\r\n     * provided color.\r\n     */\r\n    AnimationImpl.prototype.colorize = function (color) {\r\n        this.addEffect(new Effects.Colorize(color));\r\n    };\r\n    /**\r\n     * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Lighten(factor));\r\n    };\r\n    /**\r\n     * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Darken(factor));\r\n    };\r\n    /**\r\n     * Applies the saturate effect to a sprite, saturates the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Saturate(factor));\r\n    };\r\n    /**\r\n     * Applies the desaturate effect to a sprite, desaturates the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Desaturate(factor));\r\n    };\r\n    /**\r\n     * Add a [[ISpriteEffect]] manually\r\n     */\r\n    AnimationImpl.prototype.addEffect = function (effect) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].addEffect(effect);\r\n        }\r\n    };\r\n    AnimationImpl.prototype.removeEffect = function (param) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].removeEffect(param);\r\n        }\r\n    };\r\n    /**\r\n     * Clear all sprite effects\r\n     */\r\n    AnimationImpl.prototype.clearEffects = function () {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].clearEffects();\r\n        }\r\n    };\r\n    AnimationImpl.prototype._setAnchor = function (point) {\r\n        //if (!this.anchor.equals(point)) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].anchor.setTo(point.x, point.y);\r\n        }\r\n        //}\r\n    };\r\n    AnimationImpl.prototype._setRotation = function (radians) {\r\n        //if (this.rotation !== radians) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].rotation = radians;\r\n        }\r\n        //}\r\n    };\r\n    AnimationImpl.prototype._setScale = function (scale) {\r\n        //if (!this.scale.equals(scale)) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].scale = scale;\r\n        }\r\n        //}\r\n    };\r\n    /**\r\n     * Resets the animation to first frame.\r\n     */\r\n    AnimationImpl.prototype.reset = function () {\r\n        this.currentFrame = 0;\r\n    };\r\n    /**\r\n     * Indicates whether the animation is complete, animations that loop are never complete.\r\n     */\r\n    AnimationImpl.prototype.isDone = function () {\r\n        return !this.loop && this.currentFrame >= this.sprites.length;\r\n    };\r\n    /**\r\n     * Not meant to be called by game developers. Ticks the animation forward internally and\r\n     * calculates whether to change to the frame.\r\n     * @internal\r\n     */\r\n    AnimationImpl.prototype.tick = function () {\r\n        var time = Date.now();\r\n        if (time - this._oldTime > this.speed) {\r\n            this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\r\n            this._oldTime = time;\r\n        }\r\n    };\r\n    AnimationImpl.prototype._updateValues = function () {\r\n        this._setAnchor(this.anchor);\r\n        this._setRotation(this.rotation);\r\n        this._setScale(this.scale);\r\n    };\r\n    /**\r\n     * Skips ahead a specified number of frames in the animation\r\n     * @param frames  Frames to skip ahead\r\n     */\r\n    AnimationImpl.prototype.skip = function (frames) {\r\n        this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\r\n    };\r\n    AnimationImpl.prototype.draw = function (ctx, x, y) {\r\n        this.tick();\r\n        this._updateValues();\r\n        var currSprite;\r\n        if (this.currentFrame < this.sprites.length) {\r\n            currSprite = this.sprites[this.currentFrame];\r\n            if (this.flipVertical) {\r\n                currSprite.flipVertical = this.flipVertical;\r\n            }\r\n            if (this.flipHorizontal) {\r\n                currSprite.flipHorizontal = this.flipHorizontal;\r\n            }\r\n            currSprite.draw(ctx, x, y);\r\n        }\r\n        if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\r\n            currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\r\n            currSprite.draw(ctx, x, y);\r\n        }\r\n        // add the calculated width\r\n        if (currSprite) {\r\n            this.drawWidth = currSprite.drawWidth;\r\n            this.drawHeight = currSprite.drawHeight;\r\n        }\r\n    };\r\n    /**\r\n     * Plays an animation at an arbitrary location in the game.\r\n     * @param x  The x position in the game to play\r\n     * @param y  The y position in the game to play\r\n     */\r\n    AnimationImpl.prototype.play = function (x, y) {\r\n        this.reset();\r\n        this._engine.playAnimation(this, x, y);\r\n    };\r\n    return AnimationImpl;\r\n}());\r\nexport { AnimationImpl };\r\n/**\r\n * Animations allow you to display a series of images one after another,\r\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\r\n *\r\n * [[include:Animations.md]]\r\n */\r\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation(engineOrConfig, images, speed, loop) {\r\n        return _super.call(this, engineOrConfig, images, speed, loop) || this;\r\n    }\r\n    return Animation;\r\n}(Configurable(AnimationImpl)));\r\nexport { Animation };\r\n//# sourceMappingURL=Animation.js.map","import { Vector } from '../Algebra';\r\n/**\r\n * Creates a closed polygon drawing given a list of [[Vector]]s.\r\n *\r\n * @warning Use sparingly as Polygons are performance intensive\r\n */\r\nvar Polygon = /** @class */ (function () {\r\n    /**\r\n     * @param points  The vectors to use to build the polygon in order\r\n     */\r\n    function Polygon(points) {\r\n        /**\r\n         * The width of the lines of the polygon\r\n         */\r\n        this.lineWidth = 5;\r\n        /**\r\n         * Indicates whether the polygon is filled or not.\r\n         */\r\n        this.filled = false;\r\n        this._points = [];\r\n        this.anchor = new Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.scale = new Vector(1, 1);\r\n        this._points = points;\r\n        var minX = this._points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.x);\r\n        }, 0);\r\n        var maxX = this._points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.x);\r\n        }, 0);\r\n        this.drawWidth = maxX - minX;\r\n        var minY = this._points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.y);\r\n        }, 0);\r\n        var maxY = this._points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.y);\r\n        }, 0);\r\n        this.drawHeight = maxY - minY;\r\n        this.height = this.drawHeight;\r\n        this.width = this.drawWidth;\r\n    }\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.addEffect = function () {\r\n        // not supported on polygons\r\n    };\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.removeEffect = function () {\r\n        // not supported on polygons\r\n    };\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.clearEffects = function () {\r\n        // not supported on polygons\r\n    };\r\n    Polygon.prototype.reset = function () {\r\n        //pass\r\n    };\r\n    Polygon.prototype.draw = function (ctx, x, y) {\r\n        ctx.save();\r\n        ctx.translate(x + this.anchor.x, y + this.anchor.y);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        ctx.rotate(this.rotation);\r\n        ctx.beginPath();\r\n        ctx.lineWidth = this.lineWidth;\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        var firstPoint = this._points[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        var i = 0, len = this._points.length;\r\n        for (i; i < len; i++) {\r\n            ctx.lineTo(this._points[i].x, this._points[i].y);\r\n        }\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        if (this.filled) {\r\n            ctx.fillStyle = this.fillColor.toString();\r\n            ctx.fill();\r\n        }\r\n        ctx.strokeStyle = this.lineColor.toString();\r\n        if (this.flipHorizontal) {\r\n            ctx.translate(this.drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ctx.translate(0, this.drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    };\r\n    return Polygon;\r\n}());\r\nexport { Polygon };\r\n//# sourceMappingURL=Polygon.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Sprite } from './Sprite';\r\nimport { Animation } from './Animation';\r\nimport { Color } from './Color';\r\nimport * as Effects from './SpriteEffects';\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Logger } from '../Util/Log';\r\nimport { TextAlign, BaseAlign } from '../Label';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar SpriteSheetImpl = /** @class */ (function () {\r\n    /**\r\n     * @param image     The backing image texture to build the SpriteSheet\r\n     * @param columns   The number of columns in the image texture\r\n     * @param rows      The number of rows in the image texture\r\n     * @param spWidth   The width of each individual sprite in pixels\r\n     * @param spHeight  The height of each individual sprite in pixels\r\n     */\r\n    function SpriteSheetImpl(imageOrConfigOrSprites, columns, rows, spWidth, spHeight) {\r\n        this.sprites = [];\r\n        this.image = null;\r\n        this.columns = 0;\r\n        this.rows = 0;\r\n        this.spWidth = 0;\r\n        this.spHeight = 0;\r\n        var loadFromImage = false;\r\n        if (imageOrConfigOrSprites instanceof Array) {\r\n            this.sprites = imageOrConfigOrSprites;\r\n        }\r\n        else {\r\n            if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\r\n                this.columns = imageOrConfigOrSprites.columns;\r\n                this.rows = imageOrConfigOrSprites.rows;\r\n                this.spWidth = imageOrConfigOrSprites.spWidth;\r\n                this.spHeight = imageOrConfigOrSprites.spHeight;\r\n                this.image = imageOrConfigOrSprites.image;\r\n            }\r\n            else {\r\n                this.image = imageOrConfigOrSprites;\r\n                this.columns = columns;\r\n                this.rows = rows;\r\n                this.spWidth = spWidth;\r\n                this.spHeight = spHeight;\r\n            }\r\n            this.sprites = new Array(this.columns * this.rows);\r\n            loadFromImage = true;\r\n        }\r\n        // TODO: Inspect actual image dimensions with preloading\r\n        /*if(spWidth * columns > this.internalImage.naturalWidth){\r\n             throw new Error(\"SpriteSheet specified is wider than image width\");\r\n          }\r\n    \r\n          if(spHeight * rows > this.internalImage.naturalHeight){\r\n             throw new Error(\"SpriteSheet specified is higher than image height\");\r\n          }*/\r\n        if (loadFromImage) {\r\n            var i = 0;\r\n            var j = 0;\r\n            for (i = 0; i < this.rows; i++) {\r\n                for (j = 0; j < this.columns; j++) {\r\n                    this.sprites[j + i * this.columns] = new Sprite(this.image, j * this.spWidth, i * this.spHeight, this.spWidth, this.spHeight);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Create an animation from the this SpriteSheet by listing out the\r\n     * sprite indices. Sprites are organized in row major order in the SpriteSheet.\r\n     * @param engine   Reference to the current game [[Engine]]\r\n     * @param indices  An array of sprite indices to use in the animation\r\n     * @param speed    The number in milliseconds to display each frame in the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationByIndices = function (engine, indices, speed) {\r\n        var _this = this;\r\n        var images = indices.map(function (index) {\r\n            return _this.sprites[index];\r\n        });\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, images, speed);\r\n    };\r\n    /**\r\n     * Create an animation from the this SpriteSheet by specifing the range of\r\n     * images with the beginning (inclusive) and ending (exclusive) index\r\n     * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\r\n     * @param engine      Reference to the current game Engine\r\n     * @param beginIndex  The index to start taking frames (inclusive)\r\n     * @param endIndex    The index to stop taking frames (exclusive)\r\n     * @param speed       The number in milliseconds to display each frame in the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationBetween = function (engine, beginIndex, endIndex, speed) {\r\n        var images = this.sprites.slice(beginIndex, endIndex);\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, images, speed);\r\n    };\r\n    /**\r\n     * Treat the entire SpriteSheet as one animation, organizing the frames in\r\n     * row major order.\r\n     * @param engine  Reference to the current game [[Engine]]\r\n     * @param speed   The number in milliseconds to display each frame the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationForAll = function (engine, speed) {\r\n        var sprites = this.sprites.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, sprites, speed);\r\n    };\r\n    /**\r\n     * Retreive a specific sprite from the SpriteSheet by its index. Sprites are organized\r\n     * in row major order in the SpriteSheet.\r\n     * @param index  The index of the sprite\r\n     */\r\n    SpriteSheetImpl.prototype.getSprite = function (index) {\r\n        if (index >= 0 && index < this.sprites.length) {\r\n            return this.sprites[index];\r\n        }\r\n        else {\r\n            throw new Error('Invalid index: ' + index);\r\n        }\r\n    };\r\n    /**\r\n     * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\r\n     * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\r\n     * largest dimension (width, height) from among the sprite coordinates\r\n     * @param engine\r\n     * @param spriteCoordinates\r\n     * @param speed\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationByCoords = function (engine, spriteCoordinates, speed) {\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var sprites = new Array(spriteCoordinates.length);\r\n        for (var i = 0; i < spriteCoordinates.length; i++) {\r\n            var coord = spriteCoordinates[i];\r\n            // no need to pass image again if using a spritesheet\r\n            coord.image = coord.image || this.image;\r\n            maxWidth = Math.max(maxWidth, coord.drawWidth);\r\n            maxHeight = Math.max(maxHeight, coord.drawHeight);\r\n            sprites[i] = new Sprite(coord);\r\n        }\r\n        var anim = new Animation(engine, sprites, speed);\r\n        anim.drawWidth = maxWidth;\r\n        anim.drawHeight = maxHeight;\r\n        return anim;\r\n    };\r\n    return SpriteSheetImpl;\r\n}());\r\nexport { SpriteSheetImpl };\r\n/**\r\n * Sprite sheets are a useful mechanism for slicing up image resources into\r\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\r\n * in row major order in the [[SpriteSheet]].\r\n *\r\n * [[include:SpriteSheets.md]]\r\n */\r\nvar SpriteSheet = /** @class */ (function (_super) {\r\n    __extends(SpriteSheet, _super);\r\n    function SpriteSheet(imageOrConfigOrSprites, columns, rows, spWidth, spHeight) {\r\n        return _super.call(this, imageOrConfigOrSprites, columns, rows, spWidth, spHeight) || this;\r\n    }\r\n    return SpriteSheet;\r\n}(Configurable(SpriteSheetImpl)));\r\nexport { SpriteSheet };\r\nvar SpriteFontImpl = /** @class */ (function (_super) {\r\n    __extends(SpriteFontImpl, _super);\r\n    /**\r\n     * @param image           The backing image texture to build the SpriteFont\r\n     * @param alphabet        A string representing all the characters in the image, in row major order.\r\n     * @param caseInsensitive  Indicate whether this font takes case into account\r\n     * @param columns         The number of columns of characters in the image\r\n     * @param rows            The number of rows of characters in the image\r\n     * @param spWidth         The width of each character in pixels\r\n     * @param spHeight        The height of each character in pixels\r\n     */\r\n    function SpriteFontImpl(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) {\r\n        var _this = _super.call(this, imageOrConfig instanceof Texture\r\n            ? {\r\n                image: imageOrConfig,\r\n                spWidth: spWidth,\r\n                spHeight: spHeight,\r\n                rows: rows,\r\n                columns: columns\r\n            }\r\n            : imageOrConfig) || this;\r\n        _this._currentColor = Color.Black.clone();\r\n        _this._currentOpacity = 1.0;\r\n        _this._sprites = {};\r\n        // text shadow\r\n        _this._textShadowOn = false;\r\n        _this._textShadowDirty = true;\r\n        _this._textShadowColor = Color.Black.clone();\r\n        _this._textShadowSprites = {};\r\n        _this._shadowOffsetX = 5;\r\n        _this._shadowOffsetY = 5;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            alphabet = imageOrConfig.alphabet;\r\n            caseInsensitive = imageOrConfig.caseInsensitive;\r\n        }\r\n        _this._alphabet = alphabet;\r\n        _this._caseInsensitive = caseInsensitive;\r\n        _this._sprites = _this.getTextSprites();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\r\n     */\r\n    SpriteFontImpl.prototype.getTextSprites = function () {\r\n        var lookup = {};\r\n        for (var i = 0; i < this._alphabet.length; i++) {\r\n            var char = this._alphabet[i];\r\n            if (this._caseInsensitive) {\r\n                char = char.toLowerCase();\r\n            }\r\n            lookup[char] = this.sprites[i].clone();\r\n        }\r\n        return lookup;\r\n    };\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     */\r\n    SpriteFontImpl.prototype.setTextShadow = function (offsetX, offsetY, shadowColor) {\r\n        this._textShadowOn = true;\r\n        this._shadowOffsetX = offsetX;\r\n        this._shadowOffsetY = offsetY;\r\n        this._textShadowColor = shadowColor.clone();\r\n        this._textShadowDirty = true;\r\n        for (var character in this._sprites) {\r\n            this._textShadowSprites[character] = this._sprites[character].clone();\r\n        }\r\n    };\r\n    /**\r\n     * Toggles text shadows on or off\r\n     */\r\n    SpriteFontImpl.prototype.useTextShadow = function (on) {\r\n        this._textShadowOn = on;\r\n        if (on) {\r\n            this.setTextShadow(5, 5, this._textShadowColor);\r\n        }\r\n    };\r\n    /**\r\n     * Draws the current sprite font\r\n     */\r\n    SpriteFontImpl.prototype.draw = function (ctx, text, x, y, options) {\r\n        options = this._parseOptions(options);\r\n        if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\r\n            this._currentOpacity = options.opacity;\r\n            this._currentColor = options.color;\r\n            for (var char in this._sprites) {\r\n                this._sprites[char].clearEffects();\r\n                this._sprites[char].fill(options.color);\r\n                this._sprites[char].opacity(options.opacity);\r\n            }\r\n        }\r\n        if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\r\n            for (var characterShadow in this._textShadowSprites) {\r\n                this._textShadowSprites[characterShadow].clearEffects();\r\n                this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\r\n            }\r\n            this._textShadowDirty = false;\r\n        }\r\n        // find the current length of text in pixels\r\n        var sprite = this.sprites[0];\r\n        // find the current height fo the text in pixels\r\n        var height = sprite.drawHeight;\r\n        // calculate appropriate scale for font size\r\n        var scale = options.fontSize / height;\r\n        var length = text.length * sprite.drawWidth * scale + text.length * options.letterSpacing;\r\n        var currX = x;\r\n        if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\r\n            currX = x;\r\n        }\r\n        else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\r\n            currX = x - length;\r\n        }\r\n        else if (options.textAlign === TextAlign.Center) {\r\n            currX = x - length / 2;\r\n        }\r\n        var currY = y - height * scale;\r\n        if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\r\n            currY = y;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Ideographic ||\r\n            options.baseAlign === BaseAlign.Bottom ||\r\n            options.baseAlign === BaseAlign.Alphabetic) {\r\n            currY = y - height * scale;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Middle) {\r\n            currY = y - (height * scale) / 2;\r\n        }\r\n        for (var i = 0; i < text.length; i++) {\r\n            var character = text[i];\r\n            if (this._caseInsensitive) {\r\n                character = character.toLowerCase();\r\n            }\r\n            try {\r\n                // if text shadow\r\n                if (this._textShadowOn) {\r\n                    this._textShadowSprites[character].scale.x = scale;\r\n                    this._textShadowSprites[character].scale.y = scale;\r\n                    this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\r\n                }\r\n                var charSprite = this._sprites[character];\r\n                charSprite.scale.x = scale;\r\n                charSprite.scale.y = scale;\r\n                charSprite.draw(ctx, currX, currY);\r\n                currX += charSprite.drawWidth + options.letterSpacing;\r\n            }\r\n            catch (e) {\r\n                Logger.getInstance().error(\"SpriteFont Error drawing char \" + character);\r\n            }\r\n        }\r\n    };\r\n    SpriteFontImpl.prototype._parseOptions = function (options) {\r\n        return {\r\n            fontSize: options.fontSize || 10,\r\n            letterSpacing: options.letterSpacing || 0,\r\n            color: options.color || Color.Black.clone(),\r\n            textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\r\n            baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\r\n            maxWidth: options.maxWidth || -1,\r\n            opacity: options.opacity || 0\r\n        };\r\n    };\r\n    return SpriteFontImpl;\r\n}(SpriteSheet));\r\nexport { SpriteFontImpl };\r\n/**\r\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\r\n * a particular bitmap as a font. Note that some font features are not\r\n * supported by Sprite fonts.\r\n *\r\n * [[include:SpriteFonts.md]]\r\n */\r\nvar SpriteFont = /** @class */ (function (_super) {\r\n    __extends(SpriteFont, _super);\r\n    function SpriteFont(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) {\r\n        return _super.call(this, imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) || this;\r\n    }\r\n    return SpriteFont;\r\n}(Configurable(SpriteFontImpl)));\r\nexport { SpriteFont };\r\n//# sourceMappingURL=SpriteSheet.js.map","var ExResponse = /** @class */ (function () {\r\n    function ExResponse() {\r\n    }\r\n    ExResponse.type = {\r\n        any: '',\r\n        blob: 'blob',\r\n        json: 'json',\r\n        text: 'text',\r\n        document: 'document',\r\n        arraybuffer: 'arraybuffer'\r\n    };\r\n    return ExResponse;\r\n}());\r\nexport { ExResponse };\r\n//# sourceMappingURL=IAudioImplementation.js.map","import { Random } from './Random';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as Util from '../Util/Util';\r\nfunction _lerp(time, a, b) {\r\n    return a + time * (b - a);\r\n}\r\nfunction _fade(t) {\r\n    return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\n/**\r\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/\r\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html\r\n */\r\nvar PerlinGenerator = /** @class */ (function () {\r\n    function PerlinGenerator(options) {\r\n        this._perm = [\r\n            151,\r\n            160,\r\n            137,\r\n            91,\r\n            90,\r\n            15,\r\n            131,\r\n            13,\r\n            201,\r\n            95,\r\n            96,\r\n            53,\r\n            194,\r\n            233,\r\n            7,\r\n            225,\r\n            140,\r\n            36,\r\n            103,\r\n            30,\r\n            69,\r\n            142,\r\n            8,\r\n            99,\r\n            37,\r\n            240,\r\n            21,\r\n            10,\r\n            23,\r\n            190,\r\n            6,\r\n            148,\r\n            247,\r\n            120,\r\n            234,\r\n            75,\r\n            0,\r\n            26,\r\n            197,\r\n            62,\r\n            94,\r\n            252,\r\n            219,\r\n            203,\r\n            117,\r\n            35,\r\n            11,\r\n            32,\r\n            57,\r\n            177,\r\n            33,\r\n            88,\r\n            237,\r\n            149,\r\n            56,\r\n            87,\r\n            174,\r\n            20,\r\n            125,\r\n            136,\r\n            171,\r\n            168,\r\n            68,\r\n            175,\r\n            74,\r\n            165,\r\n            71,\r\n            134,\r\n            139,\r\n            48,\r\n            27,\r\n            166,\r\n            77,\r\n            146,\r\n            158,\r\n            231,\r\n            83,\r\n            111,\r\n            229,\r\n            122,\r\n            60,\r\n            211,\r\n            133,\r\n            230,\r\n            220,\r\n            105,\r\n            92,\r\n            41,\r\n            55,\r\n            46,\r\n            245,\r\n            40,\r\n            244,\r\n            102,\r\n            143,\r\n            54,\r\n            65,\r\n            25,\r\n            63,\r\n            161,\r\n            1,\r\n            216,\r\n            80,\r\n            73,\r\n            209,\r\n            76,\r\n            132,\r\n            187,\r\n            208,\r\n            89,\r\n            18,\r\n            169,\r\n            200,\r\n            196,\r\n            135,\r\n            130,\r\n            116,\r\n            188,\r\n            159,\r\n            86,\r\n            164,\r\n            100,\r\n            109,\r\n            198,\r\n            173,\r\n            186,\r\n            3,\r\n            64,\r\n            52,\r\n            217,\r\n            226,\r\n            250,\r\n            124,\r\n            123,\r\n            5,\r\n            202,\r\n            38,\r\n            147,\r\n            118,\r\n            126,\r\n            255,\r\n            82,\r\n            85,\r\n            212,\r\n            207,\r\n            206,\r\n            59,\r\n            227,\r\n            47,\r\n            16,\r\n            58,\r\n            17,\r\n            182,\r\n            189,\r\n            28,\r\n            42,\r\n            223,\r\n            183,\r\n            170,\r\n            213,\r\n            119,\r\n            248,\r\n            152,\r\n            2,\r\n            44,\r\n            154,\r\n            163,\r\n            70,\r\n            221,\r\n            153,\r\n            101,\r\n            155,\r\n            167,\r\n            43,\r\n            172,\r\n            9,\r\n            129,\r\n            22,\r\n            39,\r\n            253,\r\n            19,\r\n            98,\r\n            108,\r\n            110,\r\n            79,\r\n            113,\r\n            224,\r\n            232,\r\n            178,\r\n            185,\r\n            112,\r\n            104,\r\n            218,\r\n            246,\r\n            97,\r\n            228,\r\n            251,\r\n            34,\r\n            242,\r\n            193,\r\n            238,\r\n            210,\r\n            144,\r\n            12,\r\n            191,\r\n            179,\r\n            162,\r\n            241,\r\n            81,\r\n            51,\r\n            145,\r\n            235,\r\n            249,\r\n            14,\r\n            239,\r\n            107,\r\n            49,\r\n            192,\r\n            214,\r\n            31,\r\n            181,\r\n            199,\r\n            106,\r\n            157,\r\n            184,\r\n            84,\r\n            204,\r\n            176,\r\n            115,\r\n            121,\r\n            50,\r\n            45,\r\n            127,\r\n            4,\r\n            150,\r\n            254,\r\n            138,\r\n            236,\r\n            205,\r\n            93,\r\n            222,\r\n            114,\r\n            67,\r\n            29,\r\n            24,\r\n            72,\r\n            243,\r\n            141,\r\n            128,\r\n            195,\r\n            78,\r\n            66,\r\n            215,\r\n            61,\r\n            156,\r\n            180\r\n        ];\r\n        this._p = new Uint8Array(512);\r\n        this._defaultPerlinOptions = {\r\n            octaves: 1,\r\n            frequency: 1,\r\n            amplitude: 1,\r\n            persistance: 0.5\r\n        };\r\n        options = Util.extend({}, this._defaultPerlinOptions, options);\r\n        this.persistance = options.persistance;\r\n        this.amplitude = options.amplitude;\r\n        this.frequency = options.frequency;\r\n        this.octaves = options.octaves;\r\n        if (options.seed) {\r\n            this._random = new Random(options.seed);\r\n        }\r\n        else {\r\n            this._random = new Random();\r\n        }\r\n        this._perm = this._random.shuffle(this._perm);\r\n        for (var i = 0; i < 512; i++) {\r\n            this._p[i] = this._perm[i % 256] & 0xff;\r\n        }\r\n    }\r\n    PerlinGenerator.prototype.noise = function () {\r\n        var amp = this.amplitude;\r\n        var freq = this.frequency;\r\n        var total = 0;\r\n        var maxValue = 0;\r\n        for (var i = 0; i < this.octaves; i++) {\r\n            switch (arguments.length) {\r\n                case 1:\r\n                    total += this._noise1d(arguments[0] * freq) * amp;\r\n                    break;\r\n                case 2:\r\n                    total += this._noise2d(arguments[0] * freq, arguments[1] * freq) * amp;\r\n                    break;\r\n                case 3:\r\n                    total += this._noise3d(arguments[0] * freq, arguments[1] * freq, arguments[2] * freq) * amp;\r\n                    break;\r\n                /* istanbul ignore next */\r\n                default:\r\n                    throw new Error('Invalid arguments for perlin noise');\r\n            }\r\n            maxValue += amp;\r\n            amp *= this.persistance;\r\n            freq *= 2;\r\n        }\r\n        return total / maxValue;\r\n    };\r\n    /**\r\n     * Generates a list starting at 0 and ending at 1 of contious perlin noise, by default the step is 1/length;\r\n     *\r\n     */\r\n    PerlinGenerator.prototype.sequence = function (length, step) {\r\n        if (!step) {\r\n            step = 1 / length;\r\n        }\r\n        var array = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            array[i] = this.noise(i * step);\r\n        }\r\n        return array;\r\n    };\r\n    /**\r\n     * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width),\r\n     * by default the step will 1/(min(dimension))\r\n     */\r\n    PerlinGenerator.prototype.grid = function (width, height, step) {\r\n        if (!step) {\r\n            step = 1 / Math.min(width, height);\r\n        }\r\n        var array = new Array(width * height);\r\n        for (var y = 0; y < height; y++) {\r\n            for (var x = 0; x < width; x++) {\r\n                array[x + y * width] = this.noise(x * step, y * step);\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n    PerlinGenerator.prototype._gradient3d = function (hash, x, y, z) {\r\n        var h = hash & 0xf;\r\n        var u = h < 8 ? x : y;\r\n        var v = h < 4 ? y : h === 12 || h === 14 ? x : z;\r\n        return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\r\n    };\r\n    PerlinGenerator.prototype._gradient2d = function (hash, x, y) {\r\n        var value = (hash & 1) === 0 ? x : y;\r\n        return (hash & 2) === 0 ? -value : value;\r\n    };\r\n    PerlinGenerator.prototype._gradient1d = function (hash, x) {\r\n        return (hash & 1) === 0 ? -x : x;\r\n    };\r\n    PerlinGenerator.prototype._noise1d = function (x) {\r\n        var intX = Math.floor(x) & 0xff; // force 0-255 integers to lookup in permutation\r\n        x -= Math.floor(x);\r\n        var fadeX = _fade(x);\r\n        return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\r\n    };\r\n    PerlinGenerator.prototype._noise2d = function (x, y) {\r\n        var intX = Math.floor(x) & 0xff;\r\n        var intY = Math.floor(y) & 0xff;\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        var fadeX = _fade(x);\r\n        var fadeY = _fade(y);\r\n        var a = this._p[intX] + intY;\r\n        var b = this._p[intX + 1] + intY;\r\n        return ((_lerp(fadeY, _lerp(fadeX, this._gradient2d(this._p[a], x, y), this._gradient2d(this._p[b], x - 1, y)), _lerp(fadeX, this._gradient2d(this._p[a + 1], x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))) +\r\n            1) /\r\n            2);\r\n    };\r\n    PerlinGenerator.prototype._noise3d = function (x, y, z) {\r\n        var intX = Math.floor(x) & 0xff;\r\n        var intY = Math.floor(y) & 0xff;\r\n        var intZ = Math.floor(z) & 0xff;\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        z -= Math.floor(z);\r\n        var fadeX = _fade(x);\r\n        var fadeY = _fade(y);\r\n        var fadeZ = _fade(z);\r\n        var a = this._p[intX] + intY;\r\n        var b = this._p[intX + 1] + intY;\r\n        var aa = this._p[a] + intZ;\r\n        var ba = this._p[b] + intZ;\r\n        var ab = this._p[a + 1] + intZ;\r\n        var bb = this._p[b + 1] + intZ;\r\n        return ((_lerp(fadeZ, _lerp(fadeY, _lerp(fadeX, this._gradient3d(this._p[aa], x, y, z), this._gradient3d(this._p[ba], x - 1, y, z)), _lerp(fadeX, this._gradient3d(this._p[ab], x, y - 1, z), this._gradient3d(this._p[bb], x - 1, y - 1, z))), _lerp(fadeY, _lerp(fadeX, this._gradient3d(this._p[aa + 1], x, y, z - 1), this._gradient3d(this._p[ba + 1], x - 1, y, z - 1)), _lerp(fadeX, this._gradient3d(this._p[ab + 1], x, y - 1, z - 1), this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1)))) +\r\n            1) /\r\n            2);\r\n    };\r\n    return PerlinGenerator;\r\n}());\r\nexport { PerlinGenerator };\r\n/**\r\n * A helper to draw 2D perlin maps given a perlin generator and a function\r\n */\r\nvar PerlinDrawer2D = /** @class */ (function () {\r\n    /**\r\n     * @param generator - An existing perlin generator\r\n     * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\r\n     */\r\n    function PerlinDrawer2D(generator, colorFcn) {\r\n        this.generator = generator;\r\n        this.colorFcn = colorFcn;\r\n        if (!colorFcn) {\r\n            this.colorFcn = function (val) {\r\n                return val < 125 ? Color.Black : Color.White;\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Returns an image of 2D perlin noise\r\n     */\r\n    PerlinDrawer2D.prototype.image = function (width, height) {\r\n        var image = document.createElement('img');\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext('2d');\r\n        this.draw(ctx, 0, 0, width, height);\r\n        image.src = canvas.toDataURL();\r\n        return image;\r\n    };\r\n    /**\r\n     * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\r\n     */\r\n    PerlinDrawer2D.prototype.draw = function (ctx, x, y, width, height) {\r\n        var grid = this.generator.grid(width, height);\r\n        var imageData = ctx.getImageData(x, y, width, height);\r\n        for (var j = 0; j < height; j++) {\r\n            for (var i = 0; i < width; i++) {\r\n                var val = grid[i + width * j];\r\n                var c = Math.floor(val * 255) & 0xff;\r\n                var pixel = (i + j * imageData.width) * 4;\r\n                var color = this.colorFcn(c);\r\n                imageData.data[pixel] = color.r;\r\n                imageData.data[pixel + 1] = color.g;\r\n                imageData.data[pixel + 2] = color.b;\r\n                imageData.data[pixel + 3] = Math.floor(color.a * 255);\r\n            }\r\n        }\r\n        ctx.putImageData(imageData, x, y);\r\n    };\r\n    return PerlinDrawer2D;\r\n}());\r\nexport { PerlinDrawer2D };\r\n//# sourceMappingURL=PerlinNoise.js.map","import { Logger } from './../Util/Log';\r\nexport var ColorBlindness;\r\n(function (ColorBlindness) {\r\n    ColorBlindness[ColorBlindness[\"Protanope\"] = 0] = \"Protanope\";\r\n    ColorBlindness[ColorBlindness[\"Deuteranope\"] = 1] = \"Deuteranope\";\r\n    ColorBlindness[ColorBlindness[\"Tritanope\"] = 2] = \"Tritanope\";\r\n})(ColorBlindness || (ColorBlindness = {}));\r\n/**\r\n * This post processor can correct colors and simulate color blindness.\r\n * It is possible to use this on every game, but the game's performance\r\n * will suffer measurably. It's better to use it as a helpful tool while developing your game.\r\n * Remember, the best practice is to design with color blindness in mind.\r\n *\r\n * [[include:ColorBlind.md]]\r\n */\r\nvar ColorBlindCorrector = /** @class */ (function () {\r\n    function ColorBlindCorrector(engine, simulate, colorMode) {\r\n        if (simulate === void 0) { simulate = false; }\r\n        if (colorMode === void 0) { colorMode = ColorBlindness.Protanope; }\r\n        this.engine = engine;\r\n        this.simulate = simulate;\r\n        this.colorMode = colorMode;\r\n        this._vertexShader = 'attribute vec2 a_position;' +\r\n            'attribute vec2 a_texCoord;' +\r\n            'uniform vec2 u_resolution;' +\r\n            'varying vec2 v_texCoord;' +\r\n            'void main() {' +\r\n            // convert the rectangle from pixels to 0.0 to 1.0\r\n            'vec2 zeroToOne = a_position / u_resolution;' +\r\n            // convert from 0->1 to 0->2\r\n            'vec2 zeroToTwo = zeroToOne * 2.0;' +\r\n            // convert from 0->2 to -1->+1 (clipspace)\r\n            'vec2 clipSpace = zeroToTwo - 1.0;' +\r\n            'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\r\n            // pass the texCoord to the fragment shader\r\n            // The GPU will interpolate this value between points.\r\n            'v_texCoord = a_texCoord;' +\r\n            '}';\r\n        this._fragmentShader = 'precision mediump float;' +\r\n            // our texture\r\n            'uniform sampler2D u_image;' +\r\n            // the texCoords passed in from the vertex shader.\r\n            'varying vec2 v_texCoord;' +\r\n            // Color blind conversions\r\n            /*'mat3 m[9] =' +\r\n           '{' +\r\n              'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\r\n              'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\r\n              'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\r\n              'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\r\n              'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\r\n              'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\r\n              'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\r\n              'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\r\n              'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\r\n           '};' +*/\r\n            'void main() {' +\r\n            'vec4 o =  texture2D(u_image, v_texCoord);' +\r\n            // RGB to LMS matrix conversion\r\n            'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\r\n            'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\r\n            'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\r\n            // Simulate color blindness\r\n            '//MODE CODE//' +\r\n            /* Deuteranope for testing\r\n              'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\r\n            // LMS to RGB matrix conversion\r\n            'vec4 error;' +\r\n            'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\r\n            'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\r\n            'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\r\n            'error.a = 1.0;' +\r\n            'vec4 diff = o - error;' +\r\n            'vec4 correction;' +\r\n            'correction.r = 0.0;' +\r\n            'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\r\n            'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\r\n            'correction = o + correction;' +\r\n            'correction.a = o.a;' +\r\n            '//SIMULATE//' +\r\n            '}';\r\n        this._internalCanvas = document.createElement('canvas');\r\n        this._internalCanvas.width = engine.drawWidth;\r\n        this._internalCanvas.height = engine.drawHeight;\r\n        this._gl = this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\r\n        this._program = this._gl.createProgram();\r\n        var fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\r\n        var vertextShader = this._getShader('Vertex', this._vertexShader);\r\n        this._gl.attachShader(this._program, vertextShader);\r\n        this._gl.attachShader(this._program, fragmentShader);\r\n        this._gl.linkProgram(this._program);\r\n        if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\r\n            Logger.getInstance().error('Unable to link shader program!');\r\n        }\r\n        this._gl.useProgram(this._program);\r\n    }\r\n    ColorBlindCorrector.prototype._getFragmentShaderByMode = function (colorMode) {\r\n        var code = '';\r\n        if (colorMode === ColorBlindness.Protanope) {\r\n            code =\r\n                'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\r\n                    'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n        }\r\n        else if (colorMode === ColorBlindness.Deuteranope) {\r\n            code =\r\n                'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n        }\r\n        else if (colorMode === ColorBlindness.Tritanope) {\r\n            code =\r\n                'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n                    'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\r\n        }\r\n        if (this.simulate) {\r\n            this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\r\n        }\r\n        else {\r\n            this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\r\n        }\r\n        return this._fragmentShader.replace('//MODE CODE//', code);\r\n    };\r\n    ColorBlindCorrector.prototype._setRectangle = function (x, y, width, height) {\r\n        var x1 = x;\r\n        var x2 = x + width;\r\n        var y1 = y;\r\n        var y2 = y + height;\r\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]), this._gl.STATIC_DRAW);\r\n    };\r\n    ColorBlindCorrector.prototype._getShader = function (type, program) {\r\n        var shader;\r\n        if (type === 'Fragment') {\r\n            shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\r\n        }\r\n        else if (type === 'Vertex') {\r\n            shader = this._gl.createShader(this._gl.VERTEX_SHADER);\r\n        }\r\n        else {\r\n            Logger.getInstance().error('Error unknown shader type', type);\r\n        }\r\n        this._gl.shaderSource(shader, program);\r\n        this._gl.compileShader(shader);\r\n        if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\r\n            Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\r\n            return null;\r\n        }\r\n        return shader;\r\n    };\r\n    ColorBlindCorrector.prototype.process = function (image, out) {\r\n        // look up where the vertex data needs to go.\r\n        var positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\r\n        var texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\r\n        var texCoordBuffer = this._gl.createBuffer();\r\n        this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\r\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), this._gl.STATIC_DRAW);\r\n        this._gl.enableVertexAttribArray(texCoordLocation);\r\n        this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n        // Create a texture.\r\n        var texture = this._gl.createTexture();\r\n        this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\r\n        // Set the parameters so we can render any size image.\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\r\n        // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\r\n        this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n        // Upload the image into the texture.\r\n        this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\r\n        // lookup uniforms\r\n        var resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\r\n        // set the resolution\r\n        this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\r\n        // Create a buffer for the position of the rectangle corners.\r\n        var positionBuffer = this._gl.createBuffer();\r\n        this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\r\n        this._gl.enableVertexAttribArray(positionLocation);\r\n        this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n        // Set a rectangle the same size as the image.\r\n        this._setRectangle(0, 0, image.width, image.height);\r\n        // Draw the rectangle.\r\n        this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\r\n        // Grab tranformed image from internal canvas\r\n        var pixelData = new Uint8Array(image.width * image.height * 4);\r\n        this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\r\n        image.data.set(pixelData);\r\n        out.putImageData(image, 0, 0);\r\n    };\r\n    return ColorBlindCorrector;\r\n}());\r\nexport { ColorBlindCorrector };\r\n//# sourceMappingURL=ColorBlindCorrector.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Promise } from '../../Promises';\r\nimport * as Util from '../../Util/Util';\r\nimport { AudioContextFactory } from './AudioContext';\r\n/**\r\n * Internal class for producing of AudioInstances\r\n */\r\n/* istanbul ignore next */\r\nvar AudioInstanceFactory = /** @class */ (function () {\r\n    function AudioInstanceFactory() {\r\n    }\r\n    AudioInstanceFactory.create = function (src) {\r\n        if (typeof src === 'string') {\r\n            return new AudioTagInstance(src);\r\n        }\r\n        if (src instanceof AudioBuffer) {\r\n            return new WebAudioInstance(src);\r\n        }\r\n        return new AudioInstance(src);\r\n    };\r\n    return AudioInstanceFactory;\r\n}());\r\nexport { AudioInstanceFactory };\r\n/**\r\n * Internal class representing base AudioInstance implementation\r\n */\r\n/* istanbul ignore next */\r\nvar AudioInstance = /** @class */ (function () {\r\n    function AudioInstance(_src) {\r\n        this._src = _src;\r\n        this._volume = 1;\r\n        this._loop = false;\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n    }\r\n    Object.defineProperty(AudioInstance.prototype, \"loop\", {\r\n        get: function () {\r\n            return this._loop;\r\n        },\r\n        set: function (value) {\r\n            this._loop = value;\r\n            if (this._instance) {\r\n                this._instance.loop = value;\r\n                this._wireUpOnEnded();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AudioInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            this._volume = Util.clamp(value, 0, 1.0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AudioInstance.prototype.isPlaying = function () {\r\n        return this._isPlaying;\r\n    };\r\n    AudioInstance.prototype.pause = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPaused = true;\r\n        this._isPlaying = false;\r\n    };\r\n    AudioInstance.prototype.stop = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n    };\r\n    AudioInstance.prototype.play = function () {\r\n        if (this._isPaused) {\r\n            this._resumePlayBack();\r\n        }\r\n        if (!this._isPlaying) {\r\n            this._startPlayBack();\r\n        }\r\n        return this._playingPromise;\r\n    };\r\n    AudioInstance.prototype._startPlayBack = function () {\r\n        this._isPlaying = true;\r\n        this._isPaused = false;\r\n        this._playingPromise = new Promise();\r\n    };\r\n    AudioInstance.prototype._resumePlayBack = function () {\r\n        if (!this._isPaused) {\r\n            return;\r\n        }\r\n        this._isPaused = false;\r\n        this._isPlaying = true;\r\n    };\r\n    AudioInstance.prototype._wireUpOnEnded = function () {\r\n        var _this = this;\r\n        if (!this.loop) {\r\n            this._instance.onended = function () { return _this._handleOnEnded(); };\r\n        }\r\n    };\r\n    AudioInstance.prototype._handleOnEnded = function () {\r\n        /**\r\n         * Override me\r\n         */\r\n    };\r\n    return AudioInstance;\r\n}());\r\nexport { AudioInstance };\r\n/**\r\n * Internal class representing a HTML5 audio instance\r\n */\r\n/* istanbul ignore next */\r\nvar AudioTagInstance = /** @class */ (function (_super) {\r\n    __extends(AudioTagInstance, _super);\r\n    function AudioTagInstance(src) {\r\n        var _this = _super.call(this, src) || this;\r\n        _this._instance = new Audio(src);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AudioTagInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            value = Util.clamp(value, 0, 1.0);\r\n            this._volume = value;\r\n            this._instance.volume = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AudioTagInstance.prototype.pause = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._instance.pause();\r\n        this._isPaused = true;\r\n        this._isPlaying = false;\r\n    };\r\n    AudioTagInstance.prototype.stop = function () {\r\n        _super.prototype.stop.call(this);\r\n        this._instance.pause();\r\n        this._instance.currentTime = 0;\r\n        this._handleOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._startPlayBack = function () {\r\n        _super.prototype._startPlayBack.call(this);\r\n        this._instance.load();\r\n        this._instance.loop = this.loop;\r\n        this._instance.play();\r\n        this._wireUpOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._resumePlayBack = function () {\r\n        _super.prototype._resumePlayBack.call(this);\r\n        this._instance.play();\r\n        this._wireUpOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._handleOnEnded = function () {\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        this._playingPromise.resolve(true);\r\n    };\r\n    return AudioTagInstance;\r\n}(AudioInstance));\r\nexport { AudioTagInstance };\r\n/**\r\n * Internal class representing a Web Audio AudioBufferSourceNode instance\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\r\n */\r\n/* istanbul ignore next */\r\nvar WebAudioInstance = /** @class */ (function (_super) {\r\n    __extends(WebAudioInstance, _super);\r\n    function WebAudioInstance(_src) {\r\n        var _this = _super.call(this, _src) || this;\r\n        _this._audioContext = AudioContextFactory.create();\r\n        _this._volumeNode = _this._audioContext.createGain();\r\n        /**\r\n         * Current playback offset (in seconds)\r\n         */\r\n        _this._currentOffset = 0;\r\n        _this._createNewBufferSource();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(WebAudioInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            value = Util.clamp(value, 0, 1.0);\r\n            this._volume = value;\r\n            if (this._volumeNode.gain.setTargetAtTime) {\r\n                this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0);\r\n            }\r\n            else {\r\n                this._volumeNode.gain.value = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebAudioInstance.prototype, \"_playbackRate\", {\r\n        get: function () {\r\n            return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebAudioInstance.prototype.pause = function () {\r\n        _super.prototype.pause.call(this);\r\n        this._instance.stop(0);\r\n        // Playback rate will be a scale factor of how fast/slow the audio is being played\r\n        // default is 1.0\r\n        // we need to invert it to get the time scale\r\n        this._setPauseOffset();\r\n    };\r\n    WebAudioInstance.prototype.stop = function () {\r\n        _super.prototype.stop.call(this);\r\n        this._currentOffset = 0;\r\n        this._instance.stop(0);\r\n        // handler will not be wired up if we were looping\r\n        if (!this._instance.onended) {\r\n            this._handleOnEnded();\r\n        }\r\n    };\r\n    WebAudioInstance.prototype._startPlayBack = function () {\r\n        _super.prototype._startPlayBack.call(this);\r\n        if (!this._instance) {\r\n            this._createNewBufferSource();\r\n        }\r\n        this._rememberStartTime();\r\n        this._volumeNode.connect(this._audioContext.destination);\r\n        this._instance.start(0, 0);\r\n        this._currentOffset = 0;\r\n        this._playingPromise = new Promise();\r\n        this._wireUpOnEnded();\r\n    };\r\n    WebAudioInstance.prototype._resumePlayBack = function () {\r\n        _super.prototype._resumePlayBack.call(this);\r\n        // a buffer source can only be started once\r\n        // so we need to dispose of the previous instance before\r\n        // \"resuming\" the next one\r\n        this._instance.onended = null; // dispose of any previous event handler\r\n        this._createNewBufferSource();\r\n        var duration = this._playbackRate * this._src.duration;\r\n        var restartTime = this._currentOffset % duration;\r\n        this._rememberStartTime(restartTime * -1000);\r\n        this._instance.start(0, restartTime);\r\n        this._wireUpOnEnded();\r\n    };\r\n    WebAudioInstance.prototype._handleOnEnded = function () {\r\n        // pausing calls stop(0) which triggers onended event\r\n        // so we don't \"resolve\" yet (when we resume we'll try again)\r\n        if (!this._isPaused) {\r\n            this._isPlaying = false;\r\n            this._playingPromise.resolve(true);\r\n        }\r\n    };\r\n    WebAudioInstance.prototype._rememberStartTime = function (amend) {\r\n        this._startTime = new Date().getTime() + (amend | 0);\r\n    };\r\n    WebAudioInstance.prototype._setPauseOffset = function () {\r\n        this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\r\n    };\r\n    WebAudioInstance.prototype._createNewBufferSource = function () {\r\n        this._instance = this._audioContext.createBufferSource();\r\n        this._instance.buffer = this._src;\r\n        this._instance.loop = this.loop;\r\n        this._instance.playbackRate.setValueAtTime(1.0, 0);\r\n        this._instance.connect(this._volumeNode);\r\n    };\r\n    return WebAudioInstance;\r\n}(AudioInstance));\r\nexport { WebAudioInstance };\r\n//# sourceMappingURL=AudioInstance.js.map","import { Logger } from './Log';\r\n/**\r\n * Whether or not the browser can play this file as HTML5 Audio\r\n */\r\nexport function canPlayFile(file) {\r\n    try {\r\n        var a = new Audio();\r\n        var filetype = /.*\\.([A-Za-z0-9]+)$/;\r\n        var type = file.match(filetype)[1];\r\n        if (a.canPlayType('audio/' + type)) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e) {\r\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\r\n        return false;\r\n    }\r\n}\r\n//# sourceMappingURL=Sound.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { ExResponse } from '../../Interfaces/IAudioImplementation';\r\nimport { Resource } from '../Resource';\r\nimport { AudioInstanceFactory } from './AudioInstance';\r\nimport { AudioContextFactory } from './AudioContext';\r\nimport { NativeSoundEvent } from '../../Events/MediaEvents';\r\nimport { Promise } from '../../Promises';\r\nimport { canPlayFile } from '../../Util/Sound';\r\n/**\r\n * The [[Sound]] object allows games built in Excalibur to load audio\r\n * components, from soundtracks to sound effects. [[Sound]] is an [[ILoadable]]\r\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\r\n *\r\n * [[include:Sounds.md]]\r\n */\r\nvar Sound = /** @class */ (function (_super) {\r\n    __extends(Sound, _super);\r\n    /**\r\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\r\n     */\r\n    function Sound() {\r\n        var paths = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            paths[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, '', '') || this;\r\n        _this._loop = false;\r\n        _this._volume = 1;\r\n        _this._isPaused = false;\r\n        _this._tracks = [];\r\n        _this._wasPlayingOnHidden = false;\r\n        _this._processedData = new Promise();\r\n        _this._audioContext = AudioContextFactory.create();\r\n        _this._detectResponseType();\r\n        /* Chrome : MP3, WAV, Ogg\r\n             * Firefox : WAV, Ogg,\r\n             * IE : MP3, WAV coming soon\r\n             * Safari MP3, WAV, Ogg\r\n             */\r\n        for (var _a = 0, paths_1 = paths; _a < paths_1.length; _a++) {\r\n            var path = paths_1[_a];\r\n            if (canPlayFile(path)) {\r\n                _this.path = path;\r\n                break;\r\n            }\r\n        }\r\n        if (!_this.path) {\r\n            _this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\r\n            _this.logger.warn('Attempting to use', paths[0]);\r\n            _this.path = paths[0]; // select the first specified\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Sound.prototype, \"loop\", {\r\n        get: function () {\r\n            return this._loop;\r\n        },\r\n        /**\r\n         * Indicates whether the clip should loop when complete\r\n         * @param value  Set the looping flag\r\n         */\r\n        set: function (value) {\r\n            this._loop = value;\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                track.loop = this._loop;\r\n            }\r\n            this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sound.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            this._volume = value;\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                track.volume = this._volume;\r\n            }\r\n            this.emit('volumechange', new NativeSoundEvent(this));\r\n            this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sound.prototype, \"instances\", {\r\n        /**\r\n         * Return array of Current AudioInstances playing or being paused\r\n         */\r\n        get: function () {\r\n            return this._tracks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Sound.prototype.wireEngine = function (engine) {\r\n        var _this = this;\r\n        if (engine) {\r\n            this._engine = engine;\r\n            this._engine.on('hidden', function () {\r\n                if (engine.pauseAudioWhenHidden && _this.isPlaying()) {\r\n                    _this._wasPlayingOnHidden = true;\r\n                    _this.pause();\r\n                }\r\n            });\r\n            this._engine.on('visible', function () {\r\n                if (engine.pauseAudioWhenHidden && _this._wasPlayingOnHidden) {\r\n                    _this.play();\r\n                    _this._wasPlayingOnHidden = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns how many instances of the sound are currently playing\r\n     */\r\n    Sound.prototype.instanceCount = function () {\r\n        return this._tracks.length;\r\n    };\r\n    /**\r\n     * Whether or not the sound is playing right now\r\n     */\r\n    Sound.prototype.isPlaying = function () {\r\n        return this._tracks.some(function (t) { return t.isPlaying(); });\r\n    };\r\n    /**\r\n     * Play the sound, returns a promise that resolves when the sound is done playing\r\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\r\n     */\r\n    Sound.prototype.play = function (volume) {\r\n        if (!this.isLoaded()) {\r\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\r\n            return Promise.resolve(true);\r\n        }\r\n        this.volume = volume || this.volume;\r\n        if (this._isPaused) {\r\n            return this._resumePlayback();\r\n        }\r\n        else {\r\n            return this._startPlayback();\r\n        }\r\n    };\r\n    /**\r\n     * Stop the sound, and do not rewind\r\n     */\r\n    Sound.prototype.pause = function () {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n            var track = _a[_i];\r\n            track.pause();\r\n        }\r\n        this._isPaused = true;\r\n        this.emit('pause', new NativeSoundEvent(this));\r\n        this.logger.debug('Paused all instances of sound', this.path);\r\n    };\r\n    /**\r\n     * Stop the sound and rewind\r\n     */\r\n    Sound.prototype.stop = function () {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n            var track = _a[_i];\r\n            track.stop();\r\n        }\r\n        this.emit('stop', new NativeSoundEvent(this));\r\n        this._isPaused = false;\r\n        this._tracks.length = 0;\r\n        this.logger.debug('Stopped all instances of sound', this.path);\r\n    };\r\n    Sound.prototype.setData = function (data) {\r\n        this.emit('emptied', new NativeSoundEvent(this));\r\n        this.data = data;\r\n        this._processedData = new Promise();\r\n    };\r\n    Sound.prototype.processData = function (data) {\r\n        var _this = this;\r\n        /**\r\n         * Processes raw arraybuffer data and decodes into WebAudio buffer (async).\r\n         */\r\n        var processPromise = data instanceof ArrayBuffer ? this._processArrayBufferData(data) : this._processBlobData(data);\r\n        return processPromise.then(function (processedData) { return _this._setProcessedData(processedData); });\r\n    };\r\n    /**\r\n     * Get Id of provided AudioInstance in current trackList\r\n     * @param track [[AudioInstance]] which Id is to be given\r\n     */\r\n    Sound.prototype.getTrackId = function (track) {\r\n        return this._tracks.indexOf(track);\r\n    };\r\n    Sound.prototype._resumePlayback = function () {\r\n        if (this._isPaused) {\r\n            var resumed = [];\r\n            // ensure we resume *current* tracks (if paused)\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                resumed.push(track.play());\r\n            }\r\n            this._isPaused = false;\r\n            this.emit('resume', new NativeSoundEvent(this));\r\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\r\n            // resolve when resumed tracks are done\r\n            return Promise.join(resumed);\r\n        }\r\n        else {\r\n            return Promise.resolve(true);\r\n        }\r\n    };\r\n    Sound.prototype._startPlayback = function () {\r\n        var _this = this;\r\n        var newTrack = this._createNewTrack();\r\n        var playPromise = new Promise();\r\n        newTrack.then(function (track) {\r\n            track.play().then(function (resolved) {\r\n                // when done, remove track\r\n                _this.emit('playbackend', new NativeSoundEvent(_this, track));\r\n                _this._tracks.splice(_this.getTrackId(track), 1);\r\n                playPromise.resolve(resolved);\r\n                return resolved;\r\n            });\r\n            _this.emit('playbackstart', new NativeSoundEvent(_this, track));\r\n            _this.logger.debug('Playing new instance for sound', _this.path);\r\n        });\r\n        return playPromise;\r\n    };\r\n    Sound.prototype._processArrayBufferData = function (data) {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        this._audioContext.decodeAudioData(data, function (buffer) {\r\n            complete.resolve(buffer);\r\n        }, function () {\r\n            _this.logger.error('Unable to decode ' +\r\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\r\n                'if this is an mp3 try removing id3 tags and album art from the file.');\r\n            complete.resolve(undefined);\r\n        });\r\n        return complete;\r\n    };\r\n    Sound.prototype._processBlobData = function (data) {\r\n        return new Promise().resolve(_super.prototype.processData.call(this, data));\r\n    };\r\n    Sound.prototype._setProcessedData = function (processedData) {\r\n        this._processedData.resolve(processedData);\r\n    };\r\n    Sound.prototype._createNewTrack = function () {\r\n        var _this = this;\r\n        var aiPromise = new Promise();\r\n        if (this._processedData.state() !== 0) {\r\n            this.processData(this.data);\r\n        }\r\n        this._processedData.then(function (processedData) {\r\n            aiPromise.resolve(_this._getTrackInstance(processedData));\r\n            return processedData;\r\n        }, function (error) {\r\n            _this.logger.error(error, 'Cannot create AudioInstance due to wrong processed data.');\r\n        });\r\n        return aiPromise;\r\n    };\r\n    Sound.prototype._getTrackInstance = function (data) {\r\n        var newTrack = AudioInstanceFactory.create(data);\r\n        newTrack.loop = this.loop;\r\n        newTrack.volume = this.volume;\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    };\r\n    Sound.prototype._detectResponseType = function () {\r\n        if (window.AudioContext) {\r\n            this.responseType = ExResponse.type.arraybuffer;\r\n        }\r\n        else {\r\n            this.responseType = ExResponse.type.blob;\r\n        }\r\n    };\r\n    return Sound;\r\n}(Resource));\r\nexport { Sound };\r\n//# sourceMappingURL=Sound.js.map","import { Logger } from './Log';\r\nimport * as Util from './Util';\r\n/**\r\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\r\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\r\n */\r\nexport function obsolete(options) {\r\n    options = Util.extend({}, { message: 'This method will be removed in future versions of Excalibur.', alternateMethod: null }, options);\r\n    return function (target, property, descriptor) {\r\n        if (!(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\r\n            throw new SyntaxError('Only functions/getters/setters can be marked as obsolete');\r\n        }\r\n        var methodSignature = \"\" + (target.name || '') + (target.name ? '.' : '') + property;\r\n        var message = methodSignature + \" is marked obsolete: \" + options.message +\r\n            (options.alternateMethod ? \" Use \" + options.alternateMethod + \" instead\" : '');\r\n        var method = Util.extend({}, descriptor);\r\n        if (descriptor.value) {\r\n            method.value = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.value.apply(this, arguments);\r\n            };\r\n            return method;\r\n        }\r\n        if (descriptor.get) {\r\n            method.get = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.get.apply(this, arguments);\r\n            };\r\n        }\r\n        if (descriptor.set) {\r\n            method.set = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.set.apply(this, arguments);\r\n            };\r\n        }\r\n        return method;\r\n    };\r\n}\r\n//# sourceMappingURL=Decorators.js.map","/**\r\n * The current Excalibur version string\r\n * @description `\"0.18.0\"` gets replaced by Webpack on build\r\n */\r\nexport var EX_VERSION = \"0.18.0\";\r\n// This file is used as the bundle entrypoint and exports everything\r\n// that will be exposed as the `ex` global variable.\r\nexport * from './Engine';\r\nexport { Actor, CollisionType } from './Actor';\r\nexport * from './Algebra';\r\nexport * from './Camera';\r\nexport * from './Class';\r\nexport * from './Configurable';\r\nexport * from './Debug';\r\nexport * from './EventDispatcher';\r\nexport * from './Events/MediaEvents';\r\nexport * from './Events';\r\nexport * from './Group';\r\nexport { Label, FontStyle, FontUnit, TextAlign, BaseAlign } from './Label';\r\nexport * from './Loader';\r\nexport { Particle, ParticleEmitter, EmitterType } from './Particles';\r\nexport * from './Physics';\r\nexport * from './Promises';\r\nexport * from './Scene';\r\nexport { TileMap, Cell, TileSprite } from './TileMap';\r\nexport * from './Timer';\r\nexport * from './Trigger';\r\nexport * from './UIActor';\r\nexport * from './Actions/Index';\r\nexport * from './Collision/Index';\r\nexport * from './Drawing/Index';\r\nexport * from './Interfaces/Index';\r\nexport * from './Math/Index';\r\nexport * from './PostProcessing/Index';\r\nexport * from './Resources/Index';\r\n// ex.Events namespace\r\nimport * as events from './Events';\r\nexport { events as Events };\r\n// ex.Input namespace\r\nimport * as input from './Input/Index';\r\nexport { input as Input };\r\n// ex.Traits namespace\r\nimport * as traits from './Traits/Index';\r\nexport { traits as Traits };\r\n// ex.Util namespaces\r\nimport * as util from './Util/Index';\r\nexport { util as Util };\r\nexport * from './Util/Decorators';\r\nexport * from './Util/Detector';\r\nexport * from './Util/CullingBox';\r\nexport * from './Util/EasingFunctions';\r\nexport * from './Util/Log';\r\nexport * from './Util/SortedList';\r\n//# sourceMappingURL=index.js.map","export * from './Util';\r\nimport * as drawUtil from './DrawUtil';\r\nexport { drawUtil as DrawUtil };\r\n//# sourceMappingURL=Index.js.map"],"sourceRoot":""}